<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>vasp使用教程 | xaz的花花世界</title>
  <meta name="keywords" content="">
  <meta name="description" content="vasp使用教程 | xaz的花花世界">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="快捷键">
<meta property="og:type" content="website">
<meta property="og:title" content="about">
<meta property="og:url" content="http://example.com/about/index.html">
<meta property="og:site_name" content="xaz的花花世界">
<meta property="og:description" content="快捷键">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/%E5%9B%BE%E7%89%87/%E5%BF%AB%E6%8D%B7%E9%94%AE.jpg">
<meta property="article:published_time" content="2024-05-25T09:36:13.000Z">
<meta property="article:modified_time" content="2024-05-25T09:40:28.322Z">
<meta property="article:author" content="xaz">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/%E5%9B%BE%E7%89%87/%E5%BF%AB%E6%8D%B7%E9%94%AE.jpg">


<link rel="icon" href="/img/1.png">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="xaz的花花世界" type="application/atom+xml">
</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/1.png"/>
</a>
<div class="author">
    <span>xaz</span>
</div>

<div class="icon">
    
</div>





<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(99)</small>
            
        </div>
    </li>
    
        
            
                
    <li>
        <div data-rel="学习笔记">
            
            学习笔记
            <small>(13)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="模拟方法">
            
            模拟方法
            <small>(14)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="分子动力学">
            <i class="fold iconfont icon-right"></i>
            分子动力学
            <small>(20)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="分子动力学&lt;---&gt;分析方法">
            <i class="fold iconfont icon-right"></i>
            分析方法
            <small>(8)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="分子动力学&lt;---&gt;分析方法&lt;---&gt;msd">
            
            msd
            <small>(3)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

                
                    
    <li>
        <div data-rel="分子动力学&lt;---&gt;lammps模拟">
            
            lammps模拟
            <small>(9)</small>
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="分子动力学&lt;---&gt;vasp模拟">
            
            vasp模拟
            <small>(3)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="机器学习">
            
            机器学习
            <small>(9)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="linux学习使用">
            
            linux学习使用
            <small>(11)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="课题研究">
            
            课题研究
            <small>(7)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="绘图与写作">
            
            绘图与写作
            <small>(6)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="杂谈">
            
            杂谈
            <small>(13)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="网站收集">
            
            网站收集
            <small>(5)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">关于</a>
        
        <a style="width: 50%"
                
                                           class="friends">友链</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="99">
<input type="hidden" id="yelog_site_word_count" value="163k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://www.ruanyifeng.com/blog/">阮一峰的网络日志</a></li>
            
            <li><a target="_blank" href="https://www.fomal.cn/social/link/">Fomalhaut</a></li>
            
            <li><a target="_blank" href="https://fe32.top/">唐志远</a></li>
            
            <li><a target="_blank" href="https://clashgithub.com/">clash节点分享</a></li>
            
            <li><a target="_blank" href="https://study.hycbook.com/">兼一书虫</a></li>
            
            <li><a target="_blank" href="https://blognas.hwb0307.com/">Bensz</a></li>
            
            <li><a target="_blank" href="https://wiki.cheng-group.net/">厦门大学程俊课题组</a></li>
            
            <li><a target="_blank" href="https://advancedmath.org/">advancedmath</a></li>
            
            <li><a target="_blank" href="https://blog.shishiruqi.com/">世事如棋</a></li>
            
            <li><a target="_blank" href="https://qijingzheng.github.io/">郑奇靖老师</a></li>
            
            <li><a target="_blank" href="https://blog.yizhou.ac.cn/">某个学弟</a></li>
            
            <li><a target="_blank" href="https://wiki.scio.icu/index.php/">一个wiki格式的博客</a></li>
            
            <li><a target="_blank" href="https://liuyuyang.net/">一个很励志的博客</a></li>
            
            <li><a target="_blank" href="https://wukan.me/">一个程序员</a></li>
            
            <li><a target="_blank" href="https://whuzbf.github.io/">理论物理方向一个博主郑卜凡</a></li>
            
            <li><a target="_blank" href="https://egoist.dev/">一个独立开发者chatwise作者</a></li>
            
            <li><a target="_blank" href="https://www.skyue.com/">拾月</a></li>
            
            <li><a target="_blank" href="https://www.damtp.cam.ac.uk/user/tong/index.html/">Professor David Tong</a></li>
            
            <li><a target="_blank" href="https://philippdubach.com/">经济金融科技博客</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>节点</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>影视 音乐 游戏 pt站</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>msd</a>
            </li>
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        
        <a id="top" class="全部文章 学习笔记 "
           href="/2024/05/27/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%BE%85%E5%AD%A6%E4%B9%A0%E5%86%85%E5%AE%B9/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="待学习内容">待学习内容</span>
            <span class="post-date" title="2024-05-27 09:28:23">2024/05/27</span>
        </a>
        
        
        <a id="top" class="全部文章 杂谈 "
           href="/2024/05/25/8-%E6%9D%82%E8%B0%88/%E7%AC%AC%E4%B8%80-%E7%9C%81%E8%87%AA%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="省自集">省自集</span>
            <span class="post-date" title="2024-05-25 21:14:43">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2025/11/10/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/linux%E6%9B%B4%E6%8D%A2%E5%A4%A7%E7%A1%AC%E7%9B%98/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux更换大硬盘">linux更换大硬盘</span>
            <span class="post-date" title="2025-11-10 09:11:01">2025/11/10</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2025/11/04/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E4%BD%BF%E7%94%A8sscha%E8%AE%A1%E7%AE%97%E9%9D%9E%E8%B0%90%E5%A3%B0%E5%AD%90/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="使用sscha计算非谐声子">使用sscha计算非谐声子</span>
            <span class="post-date" title="2025-11-04 09:36:56">2025/11/04</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2025/10/31/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/NaXSiO%E5%B7%A5%E4%BD%9C%E6%B5%81/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="NaXSiO工作流">NaXSiO工作流</span>
            <span class="post-date" title="2025-10-31 16:28:51">2025/10/31</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2025/10/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/openmx%E4%BD%BF%E7%94%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="openmx使用">openmx使用</span>
            <span class="post-date" title="2025-10-25 09:37:08">2025/10/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2025/09/22/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%94%B5%E6%B1%A0%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="电池基本知识">电池基本知识</span>
            <span class="post-date" title="2025-09-22 11:15:08">2025/09/22</span>
        </a>
        
        
        <a  class="全部文章 "
           href="/2025/09/08/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="无监督学习">无监督学习</span>
            <span class="post-date" title="2025-09-08 10:48:28">2025/09/08</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2025/06/03/8-%E6%9D%82%E8%B0%88/%E5%90%8D%E5%AE%B6%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="名家集">名家集</span>
            <span class="post-date" title="2025-06-03 09:59:13">2025/06/03</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2025/05/27/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E7%BC%96%E8%AF%91ACNN/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="编译ACNN">编译ACNN</span>
            <span class="post-date" title="2025-05-27 09:30:30">2025/05/27</span>
        </a>
        
        
        <a  class="全部文章 绘图与写作 "
           href="/2025/04/16/7-%E7%BB%98%E5%9B%BE%E4%B8%8E%E5%86%99%E4%BD%9C/%E5%85%B3%E4%BA%8E%E6%AF%95%E4%B8%9A%E8%AE%BA%E6%96%87/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="关于毕业论文">关于毕业论文</span>
            <span class="post-date" title="2025-04-16 10:29:27">2025/04/16</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 vasp模拟 "
           href="/2025/04/14/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/vasp%E6%A8%A1%E6%8B%9F/vasp%E4%B8%AD%E7%9A%84%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6%E7%B3%BB%E7%BB%BC/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vasp中的分子动力学系综">vasp中的分子动力学系综</span>
            <span class="post-date" title="2025-04-14 09:17:38">2025/04/14</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2025/04/09/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/vscode%E5%BF%AB%E6%8D%B7%E9%94%AE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vscode快捷键">vscode快捷键</span>
            <span class="post-date" title="2025-04-09 20:47:00">2025/04/09</span>
        </a>
        
        
        <a  class="全部文章 绘图与写作 "
           href="/2025/04/07/7-%E7%BB%98%E5%9B%BE%E4%B8%8E%E5%86%99%E4%BD%9C/python%E7%BB%98%E5%9B%BE%E5%9B%BE%E6%A1%88%E8%A7%84%E8%8C%83/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="python绘图图案规范">python绘图图案规范</span>
            <span class="post-date" title="2025-04-07 09:12:00">2025/04/07</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2025/02/17/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/bader%E7%94%B5%E8%8D%B7%E5%88%86%E6%9E%90/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="bader电荷分析">bader电荷分析</span>
            <span class="post-date" title="2025-02-17 14:21:06">2025/02/17</span>
        </a>
        
        
        <a  class="全部文章 绘图与写作 "
           href="/2025/02/14/7-%E7%BB%98%E5%9B%BE%E4%B8%8E%E5%86%99%E4%BD%9C/mattersim-x/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="mattersim-x">mattersim-x</span>
            <span class="post-date" title="2025-02-14 13:55:22">2025/02/14</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2025/02/11/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E5%8A%9F%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="功函数计算">功函数计算</span>
            <span class="post-date" title="2025-02-11 11:18:17">2025/02/11</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2025/01/21/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="大模型">大模型</span>
            <span class="post-date" title="2025-01-21 21:22:55">2025/01/21</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2025/01/09/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/%E4%B8%80%E4%BA%9B%E8%AF%BE%E9%A2%98/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="一些课题">一些课题</span>
            <span class="post-date" title="2025-01-09 14:10:02">2025/01/09</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2025/01/02/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/%E9%95%B6%E5%B5%8C%E5%9B%BE%E5%BD%A2/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="镶嵌图形">镶嵌图形</span>
            <span class="post-date" title="2025-01-02 11:07:02">2025/01/02</span>
        </a>
        
        
        <a  class="全部文章 网站收集 "
           href="/2024/12/25/9-%E7%BD%91%E7%AB%99%E6%94%B6%E9%9B%86/%E4%BA%A4%E6%B5%81%E7%AB%99/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="交流站">交流站</span>
            <span class="post-date" title="2024-12-25 16:15:50">2024/12/25</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2024/12/17/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/%E6%B2%B8%E7%9F%B3%E7%BB%93%E6%9E%84/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="沸石结构">沸石结构</span>
            <span class="post-date" title="2024-12-17 10:58:35">2024/12/17</span>
        </a>
        
        
        <a  class="全部文章 网站收集 "
           href="/2024/12/16/9-%E7%BD%91%E7%AB%99%E6%94%B6%E9%9B%86/%E8%B5%84%E6%BA%90%E7%BD%91%E7%AB%99/"
           data-tag="影视 音乐 游戏 pt站"
           data-author="" >
            <span class="post-title" title="资源网站">资源网站</span>
            <span class="post-date" title="2024-12-16 16:56:28">2024/12/16</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/10/25/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/git%E4%BD%BF%E7%94%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="git使用">git使用</span>
            <span class="post-date" title="2024-10-25 08:55:46">2024/10/25</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/10/03/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/manjaro%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="manjaro学习笔记">manjaro学习笔记</span>
            <span class="post-date" title="2024-10-03 11:38:17">2024/10/03</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/08/29/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E4%B8%8D%E5%90%8C%E7%9A%84%E4%B8%BB%E5%8A%A8%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="不同的主动学习方法">不同的主动学习方法</span>
            <span class="post-date" title="2024-08-29 08:08:58">2024/08/29</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/08/14/8-%E6%9D%82%E8%B0%88/%E8%AF%BB%E4%B9%A6%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="读书集">读书集</span>
            <span class="post-date" title="2024-08-14 15:53:48">2024/08/14</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/08/10/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E9%AB%98%E7%B2%BE%E5%BA%A6%E6%95%B0%E6%8D%AE%E9%9B%86%E6%9E%84%E5%BB%BA%E6%AD%A5%E9%AA%A4/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="高精度数据集构建步骤">高精度数据集构建步骤</span>
            <span class="post-date" title="2024-08-10 14:04:46">2024/08/10</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/07/18/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/OER%E5%92%8CHER/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="OER台阶图">OER台阶图</span>
            <span class="post-date" title="2024-07-18 20:55:56">2024/07/18</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/06/21/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="机器学习的理论基础">机器学习的理论基础</span>
            <span class="post-date" title="2024-06-21 19:40:04">2024/06/21</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/06/17/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BB%9F%E8%AE%A1%E5%8A%9B%E5%AD%A6/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="统计力学">统计力学</span>
            <span class="post-date" title="2024-06-17 21:25:23">2024/06/17</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/06/05/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/dpmd-dpgen/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="dpmd-dpgen">dpmd-dpgen</span>
            <span class="post-date" title="2024-06-05 15:22:59">2024/06/05</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/06/05/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/meta-dynamics-plumed/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="meta_dynamics_plumed">meta_dynamics_plumed</span>
            <span class="post-date" title="2024-06-05 15:22:59">2024/06/05</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/06/05/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E4%BB%8EMP%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E5%8F%96%E7%BB%93%E6%9E%84/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="从MP数据库提取结构">从MP数据库提取结构</span>
            <span class="post-date" title="2024-06-05 10:19:13">2024/06/05</span>
        </a>
        
        
        <a  class="全部文章 网站收集 "
           href="/2024/06/01/9-%E7%BD%91%E7%AB%99%E6%94%B6%E9%9B%86/%E6%95%85%E4%BA%8B%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="故事集">故事集</span>
            <span class="post-date" title="2024-06-01 20:29:00">2024/06/01</span>
        </a>
        
        
        <a  class="全部文章 网站收集 "
           href="/2024/05/31/9-%E7%BD%91%E7%AB%99%E6%94%B6%E9%9B%86/%E7%9F%A5%E8%AF%86%E7%BD%91%E7%AB%99/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="知识网站">知识网站</span>
            <span class="post-date" title="2024-05-31 10:08:33">2024/05/31</span>
        </a>
        
        
        <a  class="全部文章 网站收集 "
           href="/2024/05/30/9-%E7%BD%91%E7%AB%99%E6%94%B6%E9%9B%86/%E5%B7%A5%E5%85%B7%E7%BD%91%E7%AB%99/"
           data-tag="节点"
           data-author="" >
            <span class="post-title" title="工具网站">工具网站</span>
            <span class="post-date" title="2024-05-30 21:49:59">2024/05/30</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/30/8-%E6%9D%82%E8%B0%88/%E9%A3%8E%E7%89%A9%E9%9B%B6%E9%A3%9F%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="风物零食集">风物零食集</span>
            <span class="post-date" title="2024-05-30 19:01:58">2024/05/30</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/28/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/zotero%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="zotero使用技巧">zotero使用技巧</span>
            <span class="post-date" title="2024-05-28 16:16:10">2024/05/28</span>
        </a>
        
        
        <a  class="全部文章 绘图与写作 "
           href="/2024/05/27/7-%E7%BB%98%E5%9B%BE%E4%B8%8E%E5%86%99%E4%BD%9C/%E5%86%99%E4%BD%9C%E5%B7%A5%E5%85%B7/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="写作工具">写作工具</span>
            <span class="post-date" title="2024-05-27 19:37:31">2024/05/27</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/27/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/slurm%E7%B3%BB%E7%BB%9F/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="slurm系统">slurm系统</span>
            <span class="post-date" title="2024-05-27 16:36:48">2024/05/27</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/27/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/lammps_plumed%E5%AE%89%E8%A3%85/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="lammps_plumed安装">lammps_plumed安装</span>
            <span class="post-date" title="2024-05-27 09:36:27">2024/05/27</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/26/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/windows%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="windows使用技巧">windows使用技巧</span>
            <span class="post-date" title="2024-05-26 12:59:08">2024/05/26</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E9%AB%98%E9%80%9A%E9%87%8F%E7%AD%9B%E9%80%89%E7%BB%93%E6%9E%84/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="高通量筛选结构">高通量筛选结构</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/25/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BD%91%E6%98%93%E5%85%AC%E5%BC%80%E8%AF%BE_%E6%B0%A2%E5%8E%9F%E5%AD%90%E6%B3%A2%E5%87%BD%E6%95%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="网易公开课_氢原子波函数">网易公开课_氢原子波函数</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E8%A1%A8%E9%9D%A2%E8%AE%A1%E7%AE%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="表面计算">表面计算</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/25/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BC%BA%E9%99%B7%E8%83%BD/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="缺陷能">缺陷能</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 绘图与写作 "
           href="/2024/05/25/7-%E7%BB%98%E5%9B%BE%E4%B8%8E%E5%86%99%E4%BD%9C/%E7%BB%98%E5%9B%BE%E7%BB%86%E8%8A%82/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="绘图细节">绘图细节</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/25/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BA%B3%E7%B1%B3%E9%9A%8F%E6%9C%BA%E7%83%AD%E5%8A%9B%E5%AD%A6%E6%9A%91%E6%9C%9F%E8%AE%B2%E4%B9%A0%E7%8F%AD%202023/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="纳米随机热力学暑期讲习班">纳米随机热力学暑期讲习班</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E7%94%BB%E7%9B%B8%E5%9B%BE-%E8%AE%A1%E7%AE%97%E5%90%88%E6%88%90%E8%B7%AF%E5%BE%84/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="画相图-计算可能的合成路径">画相图-计算可能的合成路径</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/25/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/linux%E4%B8%AD%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux中的软件安装">linux中的软件安装</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E7%94%B5%E6%B1%A0%E8%AE%A1%E7%AE%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="电池计算">电池计算</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/25/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%94%B5%E5%AD%90%E8%83%BD%E5%B8%A6%E7%90%86%E8%AE%BA/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="电子能带理论">电子能带理论</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/05/25/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B8%8E%E4%B8%BB%E5%8A%A8%E5%AD%A6%E4%B9%A0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="机器学习与主动学习">机器学习与主动学习</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/25/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%99%B6%E6%A0%BC%E6%8C%AF%E5%8A%A8%E4%B8%8E%E5%A3%B0%E5%AD%90/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="晶格振动与声子">晶格振动与声子</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E5%A4%84%E7%90%86%E5%88%86%E6%95%B0%E5%8D%A0%E6%8D%AE%E7%BB%93%E6%9E%84/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="处理分数占据结构">处理分数占据结构</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6%E7%90%86%E8%A7%A3%E5%8F%8A%E5%8F%AF%E5%88%A9%E7%94%A8%E7%9A%84%E8%AE%A1%E7%AE%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="分子动力学理解及可利用的计算">分子动力学理解及可利用的计算</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/25/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/VDOS%20and%20band%20center/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="VDOS and band center">VDOS and band center</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2024/05/25/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/%E5%85%83%E7%B4%A0%E4%BB%B7%E6%80%81/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="元素价态">元素价态</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/vasp%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vasp使用教程">vasp使用教程</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2024/05/25/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/Te%E7%BA%B3%E7%B1%B3%E7%BA%BF/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Te纳米线">Te纳米线</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E4%B8%80%E4%BA%9Bpython%E8%84%9A%E6%9C%AC/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="一些python脚本">一些python脚本</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/NEB%E8%AE%A1%E7%AE%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="NEB计算">NEB计算</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 绘图与写作 "
           href="/2024/05/25/7-%E7%BB%98%E5%9B%BE%E4%B8%8E%E5%86%99%E4%BD%9C/markdown&latex%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="markdown&amp;latex使用教程">markdown&amp;latex使用教程</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/25/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/linux%E6%93%8D%E4%BD%9C/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux操作">linux操作</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/25/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/ABACUS%E4%BD%BF%E7%94%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ABACUS使用">ABACUS使用</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2024/05/25/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/can_do/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="can_do">can_do</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/lammps%E8%AE%A1%E7%AE%97msd/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="lammps计算msd">lammps计算msd</span>
            <span class="post-date" title="2024-05-25 10:42:50">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/%E8%BD%AC%E6%8D%A2lammps%E8%BD%A8%E8%BF%B9%E4%B8%BAXDATCAR/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="转换lammps轨迹为XDATCAR">转换lammps轨迹为XDATCAR</span>
            <span class="post-date" title="2024-05-25 10:41:42">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/lammps%E5%A4%84%E7%90%86%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="lammps处理计算结果">lammps处理计算结果</span>
            <span class="post-date" title="2024-05-25 10:32:15">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/lammps%E6%89%B9%E9%87%8F%E6%8F%90%E4%BB%BB%E5%8A%A1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="lammps批量提任务">lammps批量提任务</span>
            <span class="post-date" title="2024-05-25 10:31:33">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/05/25/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%85%B3%E4%BA%8Emaxvol/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="关于maxvol">关于maxvol</span>
            <span class="post-date" title="2024-05-25 10:30:25">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/%E8%BD%AC%E6%8D%A2POSCAR/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="转换POSCAR">转换POSCAR</span>
            <span class="post-date" title="2024-05-25 10:27:07">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 msd "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/npt%E7%B3%BB%E7%BB%BC%E4%B8%AD%E7%9A%84msd/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="npt系综中的msd">npt系综中的msd</span>
            <span class="post-date" title="2024-05-25 10:16:55">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/lammps%E7%9A%84%E8%BE%93%E5%87%BA/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="lammps的输出">lammps的输出</span>
            <span class="post-date" title="2024-05-25 10:15:56">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/%E5%86%85%E7%BD%AE%E7%9A%84msd%E7%AE%97%E6%B3%95&%E8%B4%A8%E5%BF%83%E9%A3%98%E7%A7%BB%E5%8A%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="内置的msd算法&amp;质心飘移&amp;TMSD与MSD">内置的msd算法&amp;质心飘移&amp;TMSD与MSD</span>
            <span class="post-date" title="2024-05-25 10:11:17">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/%E5%8F%82%E6%95%B0variable/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="参数variable">参数variable</span>
            <span class="post-date" title="2024-05-25 10:09:44">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/in-lmp%E5%8F%82%E6%95%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="in.lmp参数">in.lmp参数</span>
            <span class="post-date" title="2024-05-25 10:05:19">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 vasp模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/vasp%E6%A8%A1%E6%8B%9F/vasp%E6%89%B9%E9%87%8F%E6%8F%90%E4%BB%BB%E5%8A%A1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vasp批量提任务">vasp批量提任务</span>
            <span class="post-date" title="2024-05-25 09:36:55">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/van-hove-%E5%87%BD%E6%95%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="van hove 函数">van hove 函数</span>
            <span class="post-date" title="2024-05-25 09:23:40">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/%E5%A4%9A%E9%9D%A2%E4%BD%93%E6%8C%87%E6%95%B0%E8%AE%A1%E7%AE%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="多面体指数计算">多面体指数计算</span>
            <span class="post-date" title="2024-05-25 09:22:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 vasp模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/vasp%E6%A8%A1%E6%8B%9F/%E5%8D%87%E6%B8%A9%E8%BF%87%E7%A8%8B%E8%BE%A8%E6%9E%90/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="升温过程辨析">升温过程辨析</span>
            <span class="post-date" title="2024-05-25 09:21:27">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/%E5%BE%84%E5%90%91%E5%88%86%E5%B8%83%E5%87%BD%E6%95%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="径向分布函数-rdf">径向分布函数-rdf</span>
            <span class="post-date" title="2024-05-25 09:19:29">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/%E6%A6%82%E7%8E%87%E5%AF%86%E5%BA%A6%E5%9B%BE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="概率密度图">概率密度图</span>
            <span class="post-date" title="2024-05-25 09:18:21">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 msd "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/msd%E6%94%B6%E6%95%9B%E6%80%A7%E5%88%86%E6%9E%90/"
           data-tag="msd"
           data-author="" >
            <span class="post-title" title="msd收敛性分析">msd收敛性分析</span>
            <span class="post-date" title="2024-05-25 09:09:28">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 msd "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/vasp%E6%A0%BC%E5%BC%8F%E8%AE%A1%E7%AE%97msd/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vasp格式计算msd">vasp格式计算msd</span>
            <span class="post-date" title="2024-05-25 09:03:59">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/24/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%B6%85%E7%A6%BB%E5%AD%90%E5%AF%BC%E4%BD%93%E4%B8%AD%E9%98%BF%E4%BC%A6%E5%B0%BC%E4%B9%8C%E6%96%AF%E5%85%AC%E5%BC%8F%E7%9A%84%E7%89%A9%E7%90%86%E8%B5%B7%E6%BA%90/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="超离子导体中阿伦尼乌斯公式的物理起源">超离子导体中阿伦尼乌斯公式的物理起源</span>
            <span class="post-date" title="2024-05-24 21:17:54">2024/05/24</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/24/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%9B%BA%E6%80%81%E7%A6%BB%E5%AD%90%E5%AD%A6/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="固态离子学">固态离子学</span>
            <span class="post-date" title="2024-05-24 00:00:00">2024/05/24</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/23/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB%E6%A0%87%E5%87%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="文献阅读标准">文献阅读标准</span>
            <span class="post-date" title="2024-05-23 21:26:05">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E7%A9%BA%E6%9A%87%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="空暇集">空暇集</span>
            <span class="post-date" title="2024-05-23 20:47:46">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E7%96%BE%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="疾集">疾集</span>
            <span class="post-date" title="2024-05-23 14:34:22">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E4%BF%A1%E5%BF%B5%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="信念集">信念集</span>
            <span class="post-date" title="2024-05-23 14:19:39">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E6%84%A4%E6%85%A8%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="愤慨集">愤慨集</span>
            <span class="post-date" title="2024-05-23 14:15:43">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/other/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="other">other</span>
            <span class="post-date" title="2024-05-23 00:14:33">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E4%BB%BB%E5%8A%A1%E6%B8%85%E5%8D%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="任务清单">任务清单</span>
            <span class="post-date" title="2024-05-23 00:14:33">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E5%A5%87%E6%80%9D%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="奇思集">奇思集</span>
            <span class="post-date" title="2024-05-23 00:14:33">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/future/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="future">future</span>
            <span class="post-date" title="2024-05-23 00:14:33">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E5%B9%B4%E5%8D%8E%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="年华集">年华集</span>
            <span class="post-date" title="2024-05-23 00:14:33">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/11/8-%E6%9D%82%E8%B0%88/%E7%A4%BE%E4%BC%9A%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="社会集">社会集</span>
            <span class="post-date" title="2024-05-11 09:02:21">2024/05/11</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-2-模拟方法/vasp使用教程" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">vasp使用教程</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="模拟方法">模拟方法</a>
            
        </span>
        
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2025-11-18 10:48:33'>2024-05-25 22:01</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:18.6k</span>
        
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95%E3%80%81%E6%B5%81%E7%A8%8B%E4%B8%8E%E8%BE%93%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-text">1.计算方法、流程与输入文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%85%B3%E4%BA%8E%E7%BB%93%E6%9E%84%E4%BC%98%E5%8C%96"><span class="toc-text">1.关于结构优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E7%BB%93%E6%9E%84%E4%BC%98%E5%8C%96%E4%B8%AD%E7%94%B5%E5%AD%90%E6%AD%A5%E4%B8%8D%E6%94%B6%E6%95%9B%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">关于结构优化中电子步不收敛的问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E8%B5%9D%E5%8A%BF%E7%9A%84%E9%80%89%E6%8B%A9%E5%8F%8A%E8%B5%9D%E5%8A%BF%E7%B1%BB%E5%9E%8B"><span class="toc-text">关于赝势的选择及赝势类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%B5%8Bk%E7%82%B9-%E7%9B%B4%E6%8E%A5%E6%B5%8BKSPACING"><span class="toc-text">2.测k点 &#x2F;直接测KSPACING</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EENCUT"><span class="toc-text">关于ENCUT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EIVDW"><span class="toc-text">关于IVDW</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-ISMEAR%E4%B8%8ESIGMA"><span class="toc-text">3.ISMEAR与SIGMA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%AE%A1%E7%AE%97dos%E4%B8%8Eband"><span class="toc-text">4.计算dos与band</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-DOS%E8%B4%B9%E7%B1%B3%E8%83%BD%E7%BA%A7%E9%97%AE%E9%A2%98"><span class="toc-text">1. DOS费米能级问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%9C%9F%E7%A9%BA%E4%B8%AD%E4%B8%89%E7%BB%B4-%E4%BA%8C%E7%BB%B4%E6%9D%90%E6%96%99%E7%9A%84%E8%83%BD%E5%B8%A6%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-text">2. 真空中三维&#x2F;二维材料的能带路径问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%87%8D%E8%A6%81%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-text">3.重要的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%AD%A5%E9%AA%A4"><span class="toc-text">4.步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%BB%93%E6%9E%84%E4%BC%98%E5%8C%96"><span class="toc-text">1.结构优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%9D%99%E6%80%81%E8%87%AA%E6%B4%BD"><span class="toc-text">2.静态自洽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%AE%A1%E7%AE%97DOS%E7%9A%84%E9%9D%9E%E8%87%AA%E6%B4%BD"><span class="toc-text">3.计算DOS的非自洽</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E4%B8%A4%E6%AD%A5"><span class="toc-text">为什么需要两步</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#NSCF%E6%98%AF%E5%90%A6%E6%9B%B4%E6%96%B0CHGCAR%E5%92%8CWAVECAR"><span class="toc-text">NSCF是否更新CHGCAR和WAVECAR</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8HSE%E8%AE%A1%E7%AE%97DOS"><span class="toc-text">4**.使用HSE计算DOS**</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E8%AE%A1%E7%AE%97%E8%83%BD%E5%B8%A6"><span class="toc-text">5**.计算能带**</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E4%BD%9C%E5%9B%BE"><span class="toc-text">6. 作图</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%B5%8B%E8%AF%95NCORE%E5%92%8CKPAR"><span class="toc-text">5. 测试NCORE和KPAR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%85%B3%E4%BA%8E%E6%89%A9%E4%B8%89%E5%80%8D%E8%83%9E"><span class="toc-text">6.关于扩三倍胞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%9E%84%E5%BB%BAPOTCAR"><span class="toc-text">7. 构建POTCAR</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E8%BF%90%E8%A1%8C"><span class="toc-text">批量运行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-HSE06-%E8%AE%A1%E7%AE%97%E8%83%BD%E5%B8%A6"><span class="toc-text">9. HSE06 计算能带</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%87%AA%E6%97%8B%E8%BD%A8%E9%81%93%E8%80%A6%E5%90%88%E8%AE%A1%E7%AE%97%E8%83%BD%E5%B8%A6"><span class="toc-text">9.自旋轨道耦合计算能带</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E5%81%9A%E5%BC%82%E8%B4%A8%E7%BB%93"><span class="toc-text">10 .做异质结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E5%81%9A%E5%B7%AE%E5%88%86%E7%94%B5%E8%8D%B7%E5%AF%86%E5%BA%A6"><span class="toc-text">11.做差分电荷密度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%A6%82%E4%BD%95%E8%80%83%E8%99%91%E5%8A%A0U%E5%92%8C%E5%8A%A0%E7%A3%81%E6%80%A7"><span class="toc-text">12. 如何考虑加U和加磁性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A9%AC%E5%BE%B7%E9%9A%86%E8%A7%84%E5%88%99%EF%BC%88n-l-%E8%A7%84%E5%88%99%EF%BC%89"><span class="toc-text">马德隆规则（n+l 规则）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%B1%E5%8E%BB%E7%94%B5%E5%AD%90%E6%97%B6%EF%BC%9A"><span class="toc-text">失去电子时：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3d-%E4%B8%8E-4s-%E7%9A%84%E8%83%BD%E9%87%8F%E9%AB%98%E4%BD%8E"><span class="toc-text">3d 与 4s 的能量高低</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A4%B1%E7%94%B5%E5%AD%90%E9%A1%BA%E5%BA%8F"><span class="toc-text">2. 失电子顺序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E6%97%8F%E5%85%83%E7%B4%A0%EF%BC%88s-p-%E5%8C%BA%EF%BC%89"><span class="toc-text">主族元素（s, p 区）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%BF%87%E6%B8%A1%E9%87%91%E5%B1%9E%EF%BC%88d-%E5%8C%BA%EF%BC%89"><span class="toc-text">(2) 过渡金属（d 区）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%86%85%E8%BF%87%E6%B8%A1%E9%87%91%E5%B1%9E%EF%BC%88f-%E5%8C%BA%EF%BC%89"><span class="toc-text">(3) 内过渡金属（f 区）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%AD%90%E5%BA%8F%E6%95%B0%E5%92%8C%E8%BD%A8%E9%81%93%E6%94%B6%E7%BC%A9"><span class="toc-text">原子序数和轨道收缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E6%95%B0%E5%92%8C%E7%9B%B8%E4%BA%92%E4%BD%9C%E7%94%A8"><span class="toc-text">电子数和相互作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E8%BD%A8%E9%81%93%E5%B1%80%E5%9F%9F%E6%80%A7"><span class="toc-text">关于轨道局域性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%BD%A8%E9%81%93%E7%B1%BB%E5%9E%8B-l-%E5%AF%B9%E5%B1%80%E5%9F%9F%E6%80%A7%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-text">1. 轨道类型 (l) 对局域性的影响</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%BB%E9%87%8F%E5%AD%90%E6%95%B0-n-%E5%AF%B9%E5%B1%80%E5%9F%9F%E6%80%A7%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-text">2. 主量子数 (n) 对局域性的影响</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E5%88%A4%E6%96%AD"><span class="toc-text">综合判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%83%BD%E5%B8%A6%EF%BC%88Band-Structure%EF%BC%89"><span class="toc-text">能带（Band Structure）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%81%E5%AF%86%E5%BA%A6%EF%BC%88Density-of-States-DOS%EF%BC%89"><span class="toc-text">态密度（Density of States, DOS）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BB%B7%E6%80%81%E5%88%86%E6%9E%90"><span class="toc-text">1. 价态分析</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%AC%AC%E4%B8%80%E6%80%A7%E5%8E%9F%E7%90%86%E8%AE%A1%E7%AE%97"><span class="toc-text">2. 第一性原理计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%80%83%E8%99%91%E5%8A%A0-U%EF%BC%9F"><span class="toc-text">1. 为什么不考虑加 U？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%80%83%E8%99%91%E5%8A%A0%E7%A3%81%E6%80%A7%EF%BC%9F"><span class="toc-text">2. 为什么不考虑加磁性？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90%E5%8A%A0-U-%E7%9A%84%E6%83%85%E5%86%B5-%E8%AF%AF%E5%B7%AE%E7%A0%B4%E5%9D%8F%E6%80%A7%E5%A4%A7"><span class="toc-text">1. 强烈推荐加 U 的情况 (误差破坏性大)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%80%9A%E5%B8%B8%E4%B8%8D%E5%8A%A0-U-%E7%9A%84%E6%83%85%E5%86%B5-%E8%AF%AF%E5%B7%AE%E7%A0%B4%E5%9D%8F%E6%80%A7%E5%B0%8F"><span class="toc-text">2. 通常不加 U 的情况 (误差破坏性小)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%8C%BA%E5%88%AB%EF%BC%9A%E5%AE%9A%E6%80%A7%E9%94%99%E8%AF%AF-vs-%E5%AE%9A%E9%87%8F%E9%94%99%E8%AF%AF"><span class="toc-text">核心区别：定性错误 vs. 定量错误</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-NiO-d%E2%81%B8-%E6%9C%AA%E6%BB%A1-U-%E5%86%B3%E5%AE%9A%E4%BA%86%E2%80%9C%E8%83%BD%E4%B8%8D%E8%83%BD%E5%8A%A8%E2%80%9D-%E5%B1%80%E5%9F%9F%E5%8C%96"><span class="toc-text">1. NiO (d⁸, 未满): U 决定了“能不能动” (局域化)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ZnO-d%C2%B9%E2%81%B0-%E5%85%A8%E6%BB%A1-U-%E5%86%B3%E5%AE%9A%E4%BA%86%E2%80%9C%E6%9C%89%E5%A4%9A%E6%B7%B1%E2%80%9D-%E8%83%BD%E7%BA%A7%E4%BD%8D%E7%BD%AE"><span class="toc-text">2. ZnO (d¹⁰, 全满): U 决定了“有多深” (能级位置)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%83%BD%E9%87%8F%E4%BD%8D%E7%BD%AE%E7%9A%84%E5%B7%A8%E5%A4%A7%E5%B7%AE%E5%BC%82-%E7%89%A9%E7%90%86%E7%8E%B0%E5%AE%9E"><span class="toc-text">1. 能量位置的巨大差异 (物理现实)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-VASP-%E8%B5%9D%E5%8A%BF%E7%9A%84%E5%A4%84%E7%90%86-%E8%AE%A1%E7%AE%97%E7%8E%B0%E5%AE%9E"><span class="toc-text">2. VASP 赝势的处理 (计算现实)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E8%A6%81"><span class="toc-text">重要</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E8%A6%81-1"><span class="toc-text">重要</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8ELASPH%E5%92%8CLMAXMIX"><span class="toc-text">关于LASPH和LMAXMIX</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E7%A3%81%E6%80%A7"><span class="toc-text">13. 磁性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E5%8F%82%E6%95%B0%E5%8A%A0%E5%BF%AB%E8%AE%A1%E7%AE%97%E9%80%9F%E5%BA%A6"><span class="toc-text">14. 如何设置参数加快计算速度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E5%85%B3%E4%BA%8Evasp%E7%9A%84%E8%BE%93%E5%87%BA%E4%B8%AD%E7%9A%84free-energy-TOTEN-%E5%92%8Cenergy-without-entropy-%E5%92%8C-sigma-0"><span class="toc-text">15. 关于vasp的输出中的free energy TOTEN 和energy without entropy 和 sigma &gt;&gt;0</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E8%AE%A1%E7%AE%97%E5%A3%B0%E5%AD%90%E8%B0%B1"><span class="toc-text">12. 计算声子谱</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9C%89%E9%99%90%E4%BD%8D%E7%A7%BB%E6%B3%95-phonopy"><span class="toc-text">1. 有限位移法  phonopy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BB%98%E5%88%B6%E5%A3%B0%E5%AD%90%E8%B0%B1python%E8%84%9A%E6%9C%AC"><span class="toc-text">2. 绘制声子谱python脚本</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%85%B3%E4%BA%8E%E5%B9%B6%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="toc-text">2. 关于并行参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E4%BD%93%E7%B3%BB%E5%B9%B6%E8%A1%8C"><span class="toc-text">小体系并行</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E5%85%B3%E4%BA%8EK%E7%82%B9"><span class="toc-text">3. 关于K点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E6%B5%8B%E8%AF%95K%E7%82%B9%E5%92%8CkSPACING"><span class="toc-text">关于测试K点和kSPACING</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E8%AE%A1%E7%AE%97%E6%8A%A5%E9%94%99"><span class="toc-text">4.计算报错</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%95%E8%AF%95ISYM-0"><span class="toc-text">试试ISYM &#x3D; 0</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-internal-ERROR-RSPHER-running-out-of-buffer"><span class="toc-text">1. internal ERROR RSPHER:running out of buffer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8A%A5%E9%94%99-Error-EDDDAV-Call-to-ZHEGV-failed-Returncode"><span class="toc-text">2 . 报错 Error EDDDAV: Call to ZHEGV failed. Returncode &#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8A%A5%E9%94%99-ERROR-FEXCP-supplied-Exchange-correletion-table-is-too-small-maximal-index"><span class="toc-text">3. 报错 ERROR FEXCP: supplied Exchange-correletion table is too small, maximal index :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-ERROR-FEXCP-supplied-Exchange-correletion-table-is-too-small-maximal-index-3885"><span class="toc-text">4. ERROR FEXCP: supplied Exchange-correletion table is too small, maximal index :        3885</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Sub-Space-Matrix-is-not-hermitian"><span class="toc-text">5. Sub-Space-Matrix is not hermitian</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-HNFORM-ERROR-k-point-generating-vectors-and-reciprocal-lattice-are-incommensurate"><span class="toc-text">6. HNFORM: ERROR: k-point generating vectors and reciprocal lattice   are incommensurate.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E8%87%AA%E6%B4%BD%E4%B8%8D%E6%94%B6%E6%95%9B"><span class="toc-text">7.自洽不收敛</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA-BAD-TERMINATION-OF-ONE-OF-YOUR-APPLICATION-PROCESSES"><span class="toc-text">8. 内存溢出&#x2F;BAD TERMINATION OF ONE OF YOUR APPLICATION PROCESSES</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%B7%91%E5%AE%8C%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%A6%BB%E5%AD%90%E6%AD%A5%E6%8A%A5%E9%94%99-LAPACK-Routine-ZPOTRF-failed-INFO-1-KPOINT-1-SPIN-1"><span class="toc-text">9. 跑完第一个离子步报错  LAPACK: Routine ZPOTRF failed! INFO:1 KPOINT:1 SPIN:1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-Intel-MKL-ERROR-parameter-5-was-incorrect-on-entry-to-DSTEIN2"><span class="toc-text">10. Intel MKL ERROR parameter 5 was incorrect on entry to DSTEIN2.</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E8%AE%A1%E7%AE%97%E8%84%9A%E6%9C%AC"><span class="toc-text">5.计算脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%8F%98%E5%8E%8B%E4%BC%98%E5%8C%96"><span class="toc-text">1.变压优化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-tips"><span class="toc-text">6.tips</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E7%BC%96%E8%AF%91vasp"><span class="toc-text">7. 编译vasp</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%8F%AA%E7%BC%96%E8%AF%91vasp"><span class="toc-text">1.只编译vasp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%8A%8Avtst%E7%9A%84neb%E6%96%B9%E6%B3%95%E7%BC%96%E8%AF%91%E8%BF%9Bvasp"><span class="toc-text">2.把vtst的neb方法编译进vasp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%BC%96%E8%AF%91%E5%8F%AF%E8%AE%BE%E7%BD%AEoptcell%E7%9A%84vasp"><span class="toc-text">3. 编译可设置optcell的vasp</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E4%BD%BF%E7%94%A8MS%E6%8A%80%E5%B7%A7"><span class="toc-text">8. 使用MS技巧</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E5%85%B3%E4%BA%8E%E7%94%A8%E9%9B%B6%E7%82%B9%E6%8C%AF%E5%8A%A8%E8%83%BD%E4%BF%AE%E6%AD%A3%E8%87%AA%E7%94%B1%E8%83%BD"><span class="toc-text">9. 关于用零点振动能修正自由能</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E5%85%B3%E4%BA%8Evaspkit%E7%9A%84KPOINTS%E5%92%8CINPUT%E4%B8%AD%E7%9A%84KSPACING%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">10. 关于vaspkit的KPOINTS和INPUT中的KSPACING的关系</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E6%9C%BA%E5%99%A8%E4%BD%BF%E7%94%A8"><span class="toc-text">10.机器使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E7%94%9F%E6%88%90%E6%AD%A3%E4%BA%A4%E5%8C%85"><span class="toc-text">11. 生成正交包</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-4 i,
    .toc-level-4 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><div class='inner-toc'><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95%E3%80%81%E6%B5%81%E7%A8%8B%E4%B8%8E%E8%BE%93%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-text">1.计算方法、流程与输入文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%85%B3%E4%BA%8E%E7%BB%93%E6%9E%84%E4%BC%98%E5%8C%96"><span class="toc-text">1.关于结构优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E7%BB%93%E6%9E%84%E4%BC%98%E5%8C%96%E4%B8%AD%E7%94%B5%E5%AD%90%E6%AD%A5%E4%B8%8D%E6%94%B6%E6%95%9B%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">关于结构优化中电子步不收敛的问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E8%B5%9D%E5%8A%BF%E7%9A%84%E9%80%89%E6%8B%A9%E5%8F%8A%E8%B5%9D%E5%8A%BF%E7%B1%BB%E5%9E%8B"><span class="toc-text">关于赝势的选择及赝势类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%B5%8Bk%E7%82%B9-%E7%9B%B4%E6%8E%A5%E6%B5%8BKSPACING"><span class="toc-text">2.测k点 &#x2F;直接测KSPACING</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EENCUT"><span class="toc-text">关于ENCUT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EIVDW"><span class="toc-text">关于IVDW</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-ISMEAR%E4%B8%8ESIGMA"><span class="toc-text">3.ISMEAR与SIGMA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%AE%A1%E7%AE%97dos%E4%B8%8Eband"><span class="toc-text">4.计算dos与band</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-DOS%E8%B4%B9%E7%B1%B3%E8%83%BD%E7%BA%A7%E9%97%AE%E9%A2%98"><span class="toc-text">1. DOS费米能级问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%9C%9F%E7%A9%BA%E4%B8%AD%E4%B8%89%E7%BB%B4-%E4%BA%8C%E7%BB%B4%E6%9D%90%E6%96%99%E7%9A%84%E8%83%BD%E5%B8%A6%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-text">2. 真空中三维&#x2F;二维材料的能带路径问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%87%8D%E8%A6%81%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-text">3.重要的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%AD%A5%E9%AA%A4"><span class="toc-text">4.步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%BB%93%E6%9E%84%E4%BC%98%E5%8C%96"><span class="toc-text">1.结构优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%9D%99%E6%80%81%E8%87%AA%E6%B4%BD"><span class="toc-text">2.静态自洽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%AE%A1%E7%AE%97DOS%E7%9A%84%E9%9D%9E%E8%87%AA%E6%B4%BD"><span class="toc-text">3.计算DOS的非自洽</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E4%B8%A4%E6%AD%A5"><span class="toc-text">为什么需要两步</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#NSCF%E6%98%AF%E5%90%A6%E6%9B%B4%E6%96%B0CHGCAR%E5%92%8CWAVECAR"><span class="toc-text">NSCF是否更新CHGCAR和WAVECAR</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8HSE%E8%AE%A1%E7%AE%97DOS"><span class="toc-text">4**.使用HSE计算DOS**</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E8%AE%A1%E7%AE%97%E8%83%BD%E5%B8%A6"><span class="toc-text">5**.计算能带**</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E4%BD%9C%E5%9B%BE"><span class="toc-text">6. 作图</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%B5%8B%E8%AF%95NCORE%E5%92%8CKPAR"><span class="toc-text">5. 测试NCORE和KPAR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%85%B3%E4%BA%8E%E6%89%A9%E4%B8%89%E5%80%8D%E8%83%9E"><span class="toc-text">6.关于扩三倍胞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%9E%84%E5%BB%BAPOTCAR"><span class="toc-text">7. 构建POTCAR</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E8%BF%90%E8%A1%8C"><span class="toc-text">批量运行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-HSE06-%E8%AE%A1%E7%AE%97%E8%83%BD%E5%B8%A6"><span class="toc-text">9. HSE06 计算能带</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%87%AA%E6%97%8B%E8%BD%A8%E9%81%93%E8%80%A6%E5%90%88%E8%AE%A1%E7%AE%97%E8%83%BD%E5%B8%A6"><span class="toc-text">9.自旋轨道耦合计算能带</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E5%81%9A%E5%BC%82%E8%B4%A8%E7%BB%93"><span class="toc-text">10 .做异质结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E5%81%9A%E5%B7%AE%E5%88%86%E7%94%B5%E8%8D%B7%E5%AF%86%E5%BA%A6"><span class="toc-text">11.做差分电荷密度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%A6%82%E4%BD%95%E8%80%83%E8%99%91%E5%8A%A0U%E5%92%8C%E5%8A%A0%E7%A3%81%E6%80%A7"><span class="toc-text">12. 如何考虑加U和加磁性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A9%AC%E5%BE%B7%E9%9A%86%E8%A7%84%E5%88%99%EF%BC%88n-l-%E8%A7%84%E5%88%99%EF%BC%89"><span class="toc-text">马德隆规则（n+l 规则）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%B1%E5%8E%BB%E7%94%B5%E5%AD%90%E6%97%B6%EF%BC%9A"><span class="toc-text">失去电子时：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3d-%E4%B8%8E-4s-%E7%9A%84%E8%83%BD%E9%87%8F%E9%AB%98%E4%BD%8E"><span class="toc-text">3d 与 4s 的能量高低</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A4%B1%E7%94%B5%E5%AD%90%E9%A1%BA%E5%BA%8F"><span class="toc-text">2. 失电子顺序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E6%97%8F%E5%85%83%E7%B4%A0%EF%BC%88s-p-%E5%8C%BA%EF%BC%89"><span class="toc-text">主族元素（s, p 区）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%BF%87%E6%B8%A1%E9%87%91%E5%B1%9E%EF%BC%88d-%E5%8C%BA%EF%BC%89"><span class="toc-text">(2) 过渡金属（d 区）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%86%85%E8%BF%87%E6%B8%A1%E9%87%91%E5%B1%9E%EF%BC%88f-%E5%8C%BA%EF%BC%89"><span class="toc-text">(3) 内过渡金属（f 区）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%AD%90%E5%BA%8F%E6%95%B0%E5%92%8C%E8%BD%A8%E9%81%93%E6%94%B6%E7%BC%A9"><span class="toc-text">原子序数和轨道收缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E6%95%B0%E5%92%8C%E7%9B%B8%E4%BA%92%E4%BD%9C%E7%94%A8"><span class="toc-text">电子数和相互作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E8%BD%A8%E9%81%93%E5%B1%80%E5%9F%9F%E6%80%A7"><span class="toc-text">关于轨道局域性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%BD%A8%E9%81%93%E7%B1%BB%E5%9E%8B-l-%E5%AF%B9%E5%B1%80%E5%9F%9F%E6%80%A7%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-text">1. 轨道类型 (l) 对局域性的影响</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%BB%E9%87%8F%E5%AD%90%E6%95%B0-n-%E5%AF%B9%E5%B1%80%E5%9F%9F%E6%80%A7%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-text">2. 主量子数 (n) 对局域性的影响</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E5%88%A4%E6%96%AD"><span class="toc-text">综合判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%83%BD%E5%B8%A6%EF%BC%88Band-Structure%EF%BC%89"><span class="toc-text">能带（Band Structure）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%81%E5%AF%86%E5%BA%A6%EF%BC%88Density-of-States-DOS%EF%BC%89"><span class="toc-text">态密度（Density of States, DOS）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BB%B7%E6%80%81%E5%88%86%E6%9E%90"><span class="toc-text">1. 价态分析</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%AC%AC%E4%B8%80%E6%80%A7%E5%8E%9F%E7%90%86%E8%AE%A1%E7%AE%97"><span class="toc-text">2. 第一性原理计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%80%83%E8%99%91%E5%8A%A0-U%EF%BC%9F"><span class="toc-text">1. 为什么不考虑加 U？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%80%83%E8%99%91%E5%8A%A0%E7%A3%81%E6%80%A7%EF%BC%9F"><span class="toc-text">2. 为什么不考虑加磁性？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90%E5%8A%A0-U-%E7%9A%84%E6%83%85%E5%86%B5-%E8%AF%AF%E5%B7%AE%E7%A0%B4%E5%9D%8F%E6%80%A7%E5%A4%A7"><span class="toc-text">1. 强烈推荐加 U 的情况 (误差破坏性大)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%80%9A%E5%B8%B8%E4%B8%8D%E5%8A%A0-U-%E7%9A%84%E6%83%85%E5%86%B5-%E8%AF%AF%E5%B7%AE%E7%A0%B4%E5%9D%8F%E6%80%A7%E5%B0%8F"><span class="toc-text">2. 通常不加 U 的情况 (误差破坏性小)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%8C%BA%E5%88%AB%EF%BC%9A%E5%AE%9A%E6%80%A7%E9%94%99%E8%AF%AF-vs-%E5%AE%9A%E9%87%8F%E9%94%99%E8%AF%AF"><span class="toc-text">核心区别：定性错误 vs. 定量错误</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-NiO-d%E2%81%B8-%E6%9C%AA%E6%BB%A1-U-%E5%86%B3%E5%AE%9A%E4%BA%86%E2%80%9C%E8%83%BD%E4%B8%8D%E8%83%BD%E5%8A%A8%E2%80%9D-%E5%B1%80%E5%9F%9F%E5%8C%96"><span class="toc-text">1. NiO (d⁸, 未满): U 决定了“能不能动” (局域化)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ZnO-d%C2%B9%E2%81%B0-%E5%85%A8%E6%BB%A1-U-%E5%86%B3%E5%AE%9A%E4%BA%86%E2%80%9C%E6%9C%89%E5%A4%9A%E6%B7%B1%E2%80%9D-%E8%83%BD%E7%BA%A7%E4%BD%8D%E7%BD%AE"><span class="toc-text">2. ZnO (d¹⁰, 全满): U 决定了“有多深” (能级位置)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%83%BD%E9%87%8F%E4%BD%8D%E7%BD%AE%E7%9A%84%E5%B7%A8%E5%A4%A7%E5%B7%AE%E5%BC%82-%E7%89%A9%E7%90%86%E7%8E%B0%E5%AE%9E"><span class="toc-text">1. 能量位置的巨大差异 (物理现实)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-VASP-%E8%B5%9D%E5%8A%BF%E7%9A%84%E5%A4%84%E7%90%86-%E8%AE%A1%E7%AE%97%E7%8E%B0%E5%AE%9E"><span class="toc-text">2. VASP 赝势的处理 (计算现实)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E8%A6%81"><span class="toc-text">重要</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E8%A6%81-1"><span class="toc-text">重要</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8ELASPH%E5%92%8CLMAXMIX"><span class="toc-text">关于LASPH和LMAXMIX</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E7%A3%81%E6%80%A7"><span class="toc-text">13. 磁性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E5%8F%82%E6%95%B0%E5%8A%A0%E5%BF%AB%E8%AE%A1%E7%AE%97%E9%80%9F%E5%BA%A6"><span class="toc-text">14. 如何设置参数加快计算速度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E5%85%B3%E4%BA%8Evasp%E7%9A%84%E8%BE%93%E5%87%BA%E4%B8%AD%E7%9A%84free-energy-TOTEN-%E5%92%8Cenergy-without-entropy-%E5%92%8C-sigma-0"><span class="toc-text">15. 关于vasp的输出中的free energy TOTEN 和energy without entropy 和 sigma &gt;&gt;0</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E8%AE%A1%E7%AE%97%E5%A3%B0%E5%AD%90%E8%B0%B1"><span class="toc-text">12. 计算声子谱</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9C%89%E9%99%90%E4%BD%8D%E7%A7%BB%E6%B3%95-phonopy"><span class="toc-text">1. 有限位移法  phonopy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BB%98%E5%88%B6%E5%A3%B0%E5%AD%90%E8%B0%B1python%E8%84%9A%E6%9C%AC"><span class="toc-text">2. 绘制声子谱python脚本</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%85%B3%E4%BA%8E%E5%B9%B6%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="toc-text">2. 关于并行参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E4%BD%93%E7%B3%BB%E5%B9%B6%E8%A1%8C"><span class="toc-text">小体系并行</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E5%85%B3%E4%BA%8EK%E7%82%B9"><span class="toc-text">3. 关于K点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E6%B5%8B%E8%AF%95K%E7%82%B9%E5%92%8CkSPACING"><span class="toc-text">关于测试K点和kSPACING</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E8%AE%A1%E7%AE%97%E6%8A%A5%E9%94%99"><span class="toc-text">4.计算报错</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%95%E8%AF%95ISYM-0"><span class="toc-text">试试ISYM &#x3D; 0</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-internal-ERROR-RSPHER-running-out-of-buffer"><span class="toc-text">1. internal ERROR RSPHER:running out of buffer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8A%A5%E9%94%99-Error-EDDDAV-Call-to-ZHEGV-failed-Returncode"><span class="toc-text">2 . 报错 Error EDDDAV: Call to ZHEGV failed. Returncode &#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8A%A5%E9%94%99-ERROR-FEXCP-supplied-Exchange-correletion-table-is-too-small-maximal-index"><span class="toc-text">3. 报错 ERROR FEXCP: supplied Exchange-correletion table is too small, maximal index :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-ERROR-FEXCP-supplied-Exchange-correletion-table-is-too-small-maximal-index-3885"><span class="toc-text">4. ERROR FEXCP: supplied Exchange-correletion table is too small, maximal index :        3885</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Sub-Space-Matrix-is-not-hermitian"><span class="toc-text">5. Sub-Space-Matrix is not hermitian</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-HNFORM-ERROR-k-point-generating-vectors-and-reciprocal-lattice-are-incommensurate"><span class="toc-text">6. HNFORM: ERROR: k-point generating vectors and reciprocal lattice   are incommensurate.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E8%87%AA%E6%B4%BD%E4%B8%8D%E6%94%B6%E6%95%9B"><span class="toc-text">7.自洽不收敛</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA-BAD-TERMINATION-OF-ONE-OF-YOUR-APPLICATION-PROCESSES"><span class="toc-text">8. 内存溢出&#x2F;BAD TERMINATION OF ONE OF YOUR APPLICATION PROCESSES</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%B7%91%E5%AE%8C%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%A6%BB%E5%AD%90%E6%AD%A5%E6%8A%A5%E9%94%99-LAPACK-Routine-ZPOTRF-failed-INFO-1-KPOINT-1-SPIN-1"><span class="toc-text">9. 跑完第一个离子步报错  LAPACK: Routine ZPOTRF failed! INFO:1 KPOINT:1 SPIN:1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-Intel-MKL-ERROR-parameter-5-was-incorrect-on-entry-to-DSTEIN2"><span class="toc-text">10. Intel MKL ERROR parameter 5 was incorrect on entry to DSTEIN2.</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E8%AE%A1%E7%AE%97%E8%84%9A%E6%9C%AC"><span class="toc-text">5.计算脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%8F%98%E5%8E%8B%E4%BC%98%E5%8C%96"><span class="toc-text">1.变压优化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-tips"><span class="toc-text">6.tips</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E7%BC%96%E8%AF%91vasp"><span class="toc-text">7. 编译vasp</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%8F%AA%E7%BC%96%E8%AF%91vasp"><span class="toc-text">1.只编译vasp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%8A%8Avtst%E7%9A%84neb%E6%96%B9%E6%B3%95%E7%BC%96%E8%AF%91%E8%BF%9Bvasp"><span class="toc-text">2.把vtst的neb方法编译进vasp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%BC%96%E8%AF%91%E5%8F%AF%E8%AE%BE%E7%BD%AEoptcell%E7%9A%84vasp"><span class="toc-text">3. 编译可设置optcell的vasp</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E4%BD%BF%E7%94%A8MS%E6%8A%80%E5%B7%A7"><span class="toc-text">8. 使用MS技巧</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E5%85%B3%E4%BA%8E%E7%94%A8%E9%9B%B6%E7%82%B9%E6%8C%AF%E5%8A%A8%E8%83%BD%E4%BF%AE%E6%AD%A3%E8%87%AA%E7%94%B1%E8%83%BD"><span class="toc-text">9. 关于用零点振动能修正自由能</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E5%85%B3%E4%BA%8Evaspkit%E7%9A%84KPOINTS%E5%92%8CINPUT%E4%B8%AD%E7%9A%84KSPACING%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">10. 关于vaspkit的KPOINTS和INPUT中的KSPACING的关系</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E6%9C%BA%E5%99%A8%E4%BD%BF%E7%94%A8"><span class="toc-text">10.机器使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E7%94%9F%E6%88%90%E6%AD%A3%E4%BA%A4%E5%8C%85"><span class="toc-text">11. 生成正交包</span></a></li></ol></div></p>
<h1 id="1-计算方法、流程与输入文件"><a href="#1-计算方法、流程与输入文件" class="headerlink" title="1.计算方法、流程与输入文件"></a>1.计算方法、流程与输入文件</h1><h2 id="1-关于结构优化"><a href="#1-关于结构优化" class="headerlink" title="1.关于结构优化"></a>1.关于结构优化</h2><blockquote>
<p>为什么vasp优化的能量不能直接拿来用而需要再做一步自洽？因为优化过程中晶格在变化，但是优化过程中的G点网格没有更新，所以最后用的G点网格不适用最后的晶格常数</p>
<p>QE最后会有一步自洽，所以QE的能量是准的</p>
<p>ABACUS优化的能量是不准的</p>
</blockquote>
<ul>
<li><p>使用收敛的参数不会出现优化后的结构拿去自洽后能量变化的问题，也不会有优化后的结构再拿去cp CONTCAR POSCAR后优化还可以继续优化的问题，所以归根结底是收敛的参数的问题</p>
<p>用于验证的目录：五洲</p>
</li>
<li><p>一次使用收敛的高精度优化和多次递进参数优化得到的能量结果是相同的，所以是两种策略，一步高精度或者多步递进</p>
</li>
<li><p>高精度和低精度优化出来的结构会有体积的变化，即高低精度优化得到的不止能量上的差别，还有结构上的差别，因此使用高精度是必要的。</p>
</li>
<li><p>ENCUT和KSPACING比较方便，<strong>ENCUT通常1.3倍ENCUT是不够的</strong>，需要加大，而KSPACING比想象中更容易收敛，用0.2即可。</p>
</li>
<li><p>一定要优化到足够的精度，力的收敛标准不要吝啬 0.001，例如，优化不到位在算不同扩胞方式下表面的能带时差别会比较大</p>
<h3 id="关于结构优化中电子步不收敛的问题"><a href="#关于结构优化中电子步不收敛的问题" class="headerlink" title="关于结构优化中电子步不收敛的问题"></a>关于结构优化中电子步不收敛的问题</h3><ul>
<li>尝试增加SIGMA的值 &#x3D;0.1 </li>
<li>加磁性计算</li>
<li>更换赝势 （比如优化Eu发现使用Eu就不收敛，使用Eu_3很好收敛 还有Gd）</li>
<li>使用默认的磁矩&#x3D;1和设置特殊的磁矩通常差别不会很大，可以直接ISPIN &#x3D; 2</li>
</ul>
</li>
<li><p>**&#x3D;&#x3D;优化增加ENCUT!!!!&#x3D;&#x3D; 不然优化出的结构是不准确的 **</p>
</li>
</ul>
<p>&#x2F;work&#x2F;home&#x2F;xieyu&#x2F;workplace&#x2F;liz&#x2F;1K-Y-Si-O-pymatgen&#x2F;B-2&#x2F;1-opt&#x2F;1</p>
<p>可以在优化后做一个自洽来看下能量</p>
<p>一步优化往往是不对的，需要再优化一次，可能在再次优化的时候结构还会变化。</p>
<p>优化收敛后往往需要再优化一遍才能得到准确的结构，网格的原因，优化中的网格没有变化，重新优化会对结构产生新的网格</p>
<p>Q1 为什么在收敛后再优化还是能继续优化</p>
<p>Q2为什么自洽和优化的能量不一样</p>
<p>&#x3D;&#x3D;策略&#x3D;&#x3D;多步优化，分步优化  就算第一步收敛了也要再做一次优化</p>
<p>&#x3D;&#x3D;先粗优化后精优化不只是优化的策略，而是必须要做的事&#x3D;&#x3D;</p>
<p><strong>&#x3D;&#x3D;D:\4-work\1-project-PPT\M-2-软件-计算方法&#x2F;结构优化精度对比.pptx&#x3D;&#x3D;</strong></p>
<p><img src="/../../%E5%9B%BE%E7%89%87/image-20240109222800271.png" alt="image-20240109222800271"></p>
<p><img src="/../../%E5%9B%BE%E7%89%87/image-20240109222815206.png" alt="image-20240109222815206"></p>
<p><img src="/../../%E5%9B%BE%E7%89%87/image-20240109222829651.png" alt="image-20240109222829651"></p>
<p><img src="/../../%E5%9B%BE%E7%89%87/image-20240109222853989.png" alt="image-20240109222853989"></p>
<p>自洽判断结构能量次序的没有测，留到以后测吧！！！</p>
<pre><code class="shell"> SYSTEM=Li             
PREC = Accurate      
NELM = 60 （
#电子自洽迭代最大步数，默认为60
NELMIN = 2 
#电子自洽迭代最小步数，默认为2
EDIFF = 1e-5 
#电子自洽收敛标准，当两步总能小于该值时，电子自洽终止，默认为1e-4**
NSW = 200 
#原子弛豫最大步数，默认为0  
EDIFFG = -0.01 
#原子弛豫收敛标准，两步总能之差小于该值时，弛豫终止，设为负值时，表示力的收敛，一般负值是比较好的标准
**POTIM =  0.5 
#原子每步移动的距离，IBRION=1 2 3 时，默认为0.5，IBRION=0时，跑MD,需要手动输入**
**IBRION = 2 
#不同的原子能量下降方式，-1表示不移动，2表示共轭梯度法，默认当NSW = 0或1时为-1，为其他值时是0**
**ISIF = 3 
#结构优化哪些部分，IBRION=0时默认为0，其他默认为2**
**ENCUT = 600 
#截断能，默认为POTCAR文件里的ENMAX   ***
**ISPIN =2****
**#SYSTEM PREC EDIFF NSW IBRION EDIFFG POTIM ENCUT ISIF ISMEAR SIGMA ISTART ICHARG)**
**#当NSW=0 IBRION = -1时，ISIF=2或者ISIF=3是没有差别的，并不会优化晶格常数**
</code></pre>
<h2 id="关于赝势的选择及赝势类型"><a href="#关于赝势的选择及赝势类型" class="headerlink" title="关于赝势的选择及赝势类型"></a>关于赝势的选择及赝势类型</h2><p><a target="_blank" rel="noopener" href="https://vasp.at/wiki/Choosing_pseudopotentials">https://vasp.at/wiki/Choosing_pseudopotentials</a></p>
<p>_3 _2代表的是价态</p>
<p><a target="_blank" rel="noopener" href="https://vasp.at/wiki/Available_pseudopotentials#Different_variants_specified_by_the_suffix">https://vasp.at/wiki/Available_pseudopotentials#Different_variants_specified_by_the_suffix</a></p>
<h2 id="2-测k点-直接测KSPACING"><a href="#2-测k点-直接测KSPACING" class="headerlink" title="2.测k点 &#x2F;直接测KSPACING"></a><strong>2.测k点</strong> &#x2F;直接测KSPACING</h2><pre><code class="shell">for i in 1 2 3 4 5 6 7 8 9
do 
 for j in 1 2 3 4 5 6 7 8 9 
do 
 for k in 1 2 3 4 5 6 7 8 9
cat &gt; KPOINTS &lt;&lt;lizhaohenshuai
     Automatic generation
     0
     Monkhorst-pack
     $i $j $k
     0 0 0
lizhaohenshuai
mpirun  -np 48 vasp路径 &gt;vasp.log 2&gt;&amp;1
cp CONTCAR CONTCAR_$i
cp OUTCAR OUTCAR_$i
done
</code></pre>
<p>&#x3D;&#x3D;<strong>测试k点，截断能本质上是在测赝势（<code>POTCAR</code>),用自洽来保证能量算准然后再进行优化才有意义。</strong>&#x3D;&#x3D;</p>
<h3 id="关于ENCUT"><a href="#关于ENCUT" class="headerlink" title="关于ENCUT"></a>关于ENCUT</h3><p>ENCUT是个很重要的参数，它的变化能很大程度影响体系的能量，计算时应该确保ENCUT的收敛，推荐的1.3*ENMAX的值通常是不够的。</p>
<p>在做Te管的优化时，就发现，尽管Te的ENMAX为174 eV，1.3倍是226，但是使用300 eV和500eV优化出的结构是不同的，300eV下优化不能保持Te管的形貌，而500 eV下优化能够保持Te管的形貌。原因是我设置了力的收敛标准为-0.001，但是同一个构型300eV计算的力可能会稍高，导致500eV认为收敛的结构300eV认为不收敛，遇到这种情况可以适当降低收敛标准，也可能是对纳米管这类材料，ENMAX比较敏感</p>
<h3 id="关于IVDW"><a href="#关于IVDW" class="headerlink" title="关于IVDW"></a>关于IVDW</h3><p>尽管IVDW &#x3D; 11和IVDW&#x3D;12都是D3的校正，但是计算中发现，对一些层状材料（ZnInS），VDW&#x3D;12更加适用，计算得到的体积和实验值符合更好，</p>
<h2 id="3-ISMEAR与SIGMA"><a href="#3-ISMEAR与SIGMA" class="headerlink" title="3.ISMEAR与SIGMA"></a><strong>3.<code>ISMEAR与SIGMA</code></strong></h2><p>**<code>ISMEAR</code>  </p>
<ul>
<li><p><strong>对半导体或者绝缘体，使用<code>ISMEAR=-5</code>（一定不能用<code>&gt;0</code>),如果胞比较大（即使用的<code>K</code>点数目很小，如一两个，）使用<code>ISMEAR=0,SIGMA=0.05</code>;</strong></p>
</li>
<li><p><strong>对金属弛豫使用<code>ISMEAR=1</code>或者<code>2</code>，和一个比较好的<code>SIGMA</code>(默认为<code>0.2</code>，需要测试）</strong></p>
</li>
<li><p>&#x3D;&#x3D;<strong>对半导体和绝缘体不要用<code>ISMEAR&gt;0</code>；</strong>&#x3D;&#x3D;</p>
</li>
<li><p><strong>对于计算<code>DOS</code>,自洽（不需要弛豫时，不涉及力）时一律使用<code>ISMEAR=-5</code>；声子谱计算用<code>ISMEAR&gt;0</code>；计算能带时不同，详细见能带）</strong></p>
</li>
<li><p><strong>1.测<code>SIGMA  ISMEAR&gt;0时</code></strong></p>
</li>
</ul>
<pre><code class="shell">for i in 0.1 0.12 0.14 0.16 0.18 0.20 0.22 0.24 0.26 0.28 0.30
   do
  cat &gt; INCAR &lt;&lt; lizhaohenshuai
  SYSTEM=Li
  PREC = Accurate
  ENCUT = 600
  EDIFF = 1e-6
  IBRION = 2
  ISIF = 3
  NSW = 200
  ISMEAR = 1
  SIGMA = $i
  POTIM = 0.2
  EDIFFG = -0.001
  lizhaohenshuai

mpirun -np 48 vasp路径 &gt; vasp.log 2&gt;&amp;1

cp CONTCAR CONTCAR_$p
cp OUTCAR OUTCAR _$p
done  
</code></pre>
<ul>
<li><strong>2.提取熵值</strong></li>
</ul>
<p><strong>选择熵值最小的<code>SIGMA</code>，最高不能高于每原子大于<code>1mev</code></strong></p>
<hr>
<pre><code class="shell"> for i in 0.1 0.12 0.14 0.16 0.18 0.20 0.22 0.24 0.26 0.28 0.30
 echo -n $i &gt;&gt; energy.dat 
 grep  EENTRO OUTCAR_
</code></pre>
<p>&#x3D;&#x3D;<strong>总结</strong>&#x3D;&#x3D;</p>
<ol>
<li><strong>对结构弛豫（需要计算力），半导体&#x2F;绝缘体小胞用<code>ISMEAR=-5</code>，大胞用<code>ISMEAR=0</code>;金属用<code>ISMEAR=1或2</code>，需要测<code>SIGMA</code></strong></li>
<li>*<strong>对<code>dos</code>,由于自洽与非自洽都不需要计算力，统一使用<code>ISMEAR=-5</code>;</strong></li>
<li><strong>对能带，由于<code>ISMEAR=-5</code>不能识别线性的<code>kpoints</code>,因此半导体&#x2F;绝缘体用<code>ISMEAR=0</code>,金属用<code>ISMEAR=1或2</code></strong></li>
<li><strong>对声子谱，用<code>ISMEAR&gt;0</code></strong>**</li>
</ol>
<h2 id="4-计算dos与band"><a href="#4-计算dos与band" class="headerlink" title="4.计算dos与band"></a><strong>4.计算<code>dos</code>与<code>band</code></strong></h2><h3 id="1-DOS费米能级问题"><a href="#1-DOS费米能级问题" class="headerlink" title="1. DOS费米能级问题"></a>1. DOS费米能级问题</h3><ul>
<li><p>计算dos时，有时会发现dos步的费米能级和scf步的费米能级不同，这是因为dos使用了不同的k点，对于不同空间群的结构，使用的k点不恰当，可能会导致k点取不到价带顶，使得填充电子的时候，填充到了价带底。</p>
</li>
<li><p>计算dos时，第一步自洽会出现的问题：不同的k点数量得到的费米能级的值不同，</p>
<p>比如学校机&#x2F;data&#x2F;home&#x2F;mym&#x2F;workplace&#x2F;xieyu&#x2F;liz&#x2F;3-article&#x2F;3-K5YSi4O12&#x2F;3-dos&#x2F;2-dos 中，就发现使用444的k点无法判断准确的费米能级而333就可以，这个原因同上，直接改掉dos中的费米能级就行</p>
</li>
<li><p>也可能会遇到dos的费米能级比能带要低，导致能带的价带顶高于费米能级，原因是DOS的k点密度不够大，使得计算不够，可以加大计算dos的k点，（vaspkit里102设置成0.01），能够解决这个问题</p>
</li>
<li><p>vaspkit算完能带后会输出band_gap文件，里面的VBM按理说应该就是费米能级的位置，看这个值和dos里面doscar的费米能级哪个更小用哪个做费米能级</p>
</li>
<li><p>大体系应该减少在能带路径上的插值</p>
</li>
<li><p>计算能带、dos，结构的键长等参数有小的变化也会引起结果比较大的不同，可能差100meV。需要把结构优化到足够的精度，尤其是带真空层的</p>
</li>
</ul>
<h3 id="2-真空中三维-二维材料的能带路径问题"><a href="#2-真空中三维-二维材料的能带路径问题" class="headerlink" title="2. 真空中三维&#x2F;二维材料的能带路径问题"></a>2. 真空中三维&#x2F;二维材料的能带路径问题</h3><p>真空层的三维   能带结构用二维的k点路径 因为真空层厚度大，倒空间0 0 0.5 和0 0 0 没什么区别</p>
<blockquote>
<ul>
<li>记得加自旋  变得光滑用NEDOS   (<a target="_blank" rel="noopener" href="https://www.bigbrosci.com/2017/10/30/ex08/?highlight=%E6%B0%A7">https://www.bigbrosci.com/2017/10/30/ex08/?highlight=%E6%B0%A7</a>)</li>
<li>自旋极化什么时候加： 单原子的计算，O2分子，自由基相关计算，含 Fe Co Ni 的体系，体系有磁性，关注电子性质</li>
<li>查看体系磁矩 加上ISPIN&#x3D;2后在OSICAR中查看mag的数值</li>
</ul>
</blockquote>
<h3 id="3-重要的参数"><a href="#3-重要的参数" class="headerlink" title="3.重要的参数"></a>3.重要的参数</h3><ol>
<li><p>LORBIT</p>
<p>LORBIT控制PROCAR的产生</p>
</li>
</ol>
<h3 id="4-步骤"><a href="#4-步骤" class="headerlink" title="4.步骤"></a>4.步骤</h3><h4 id="1-结构优化"><a href="#1-结构优化" class="headerlink" title="1.结构优化"></a>1.<a href="#123">结构优化</a></h4><h4 id="2-静态自洽"><a href="#2-静态自洽" class="headerlink" title="2.静态自洽"></a>2.<strong>静态自洽</strong></h4><p>&#x3D;&#x3D;<strong>自洽得到准确的基态电子密度，然后固定电子密度，进行非自洽，dos进行两步的目的是更加精确；能带进行两步第二步是为了获得特定k点的能量和本征值</strong>&#x3D;&#x3D;</p>
<blockquote>
<p>SIGMA 增大会导致收敛缓慢，遇到不收敛的情况可以降低SIGMA试试</p>
<p>给定初始磁矩有助于收敛（根据MP)  自洽可以给磁矩，DOS就不用了，因为磁矩在scf时会被优化，给定磁矩并不真实</p>
</blockquote>
<blockquote>
<p>LORBIT 控制PROCAR的产生</p>
</blockquote>
<pre><code class="shell">IBRION = -1
NSW = 0
LWAVE = TRUE  #默认为True,输出WAVECAR
LCHARGE = TRUE #默认为True,输出CHGCAR
ISTART = 0
#当WAVECAR存在时，默认值为1，读取WAVECAR，其他情况默认为0，从头开始构建轨道
ICHARG = 2
#ISTART为0时默认为2，等于11时，从给定的CHGCAR读取本征值
ISMEAR = -5 #非常重要
ISPIN = 2
</code></pre>
<pre><code class="shell">SYSTEM = test
ALGO = Normal
ISYM = 0
LREAL =Auto
PREC = Normal
EDIFF = 1e-6
ENCUT = 800
NELMIN = 4
NELM = 500
IBRION = -1
ISIF = 2
ISMEAR = -5
PSTRESS = 0.001
KPAR = 4
NCORE = 6
LWAVE = TRUE
LCHARG = TRUE
ISTART = 0
ICHARG = 2
</code></pre>
<h4 id="3-计算DOS的非自洽"><a href="#3-计算DOS的非自洽" class="headerlink" title="3.计算DOS的非自洽"></a><strong>3.计算DOS的非自洽</strong></h4><h5 id="为什么需要两步"><a href="#为什么需要两步" class="headerlink" title="为什么需要两步"></a>为什么需要两步</h5><p>非自洽计算不会更新电荷密度，会根据新的k点网格计算新的波函数（验证后发现说法是对的，用一个不收敛的初步非自洽的电荷密度做NSCF发现很快就结束，没有迭代电荷密度）。所以必须要自洽过程收敛才能做后续的计算</p>
<p>SCF阶段用粗K点能收敛是因为电荷密度对K点相对不敏感，但DOS对K点高度敏感 。电荷密度收敛对K点密度要求较低：粗网格足以确定<code>ρ_ground</code>的空间分布</p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20250607103247173.png" alt="image-20250607103247173"></p>
<img src="./../../图片/image-20250607102932056.png" alt="image-20250607102932056" style="zoom:50%;" />



<h5 id="NSCF是否更新CHGCAR和WAVECAR"><a href="#NSCF是否更新CHGCAR和WAVECAR" class="headerlink" title="NSCF是否更新CHGCAR和WAVECAR"></a>NSCF是否更新CHGCAR和WAVECAR</h5><p>from vaspwiki</p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20250607104611811.png" alt="image-20250607104611811"></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20250607101925810.png" alt="image-20250607101925810"></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20250607101944749.png" alt="image-20250607101944749"></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20250607101957847.png" alt="image-20250607101957847"></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20250607102013248.png" alt="image-20250607102013248"></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20250607102024312.png" alt="image-20250607102024312"></p>
<p>&#x3D;&#x3D;<strong>加大k点计算更准确的电子态密度，<code>ISMEAR=-5</code></strong>&#x3D;&#x3D;</p>
<pre><code class="shell">NSW = 0
IBRION = -1
ISTART =1
ICHARG = 11
LORBIT = 11
ISMEAR = -5
NEDOS = 3000
ISPIN = 2
#增加K点网络  cp自洽的电荷密度 CHG CHGCAR  波函数 WAVECAR**
</code></pre>
<pre><code class="shell">SYSTEM = test
ALGO = Normal
ISYM = 0
LREAL =Auto
PREC = Normal
EDIFF = 1e-6
ENCUT = 800
NELMIN = 4
NELM = 500
IBRION = -1
ISIF = 2
ISMEAR = -5
PSTRESS = 0.001
KPAR = 4
NCORE = 6
ISTART = 1
ICHARG = 11
LORBIT = 11
NEDOS = 3000
</code></pre>
<h4 id="4-使用HSE计算DOS"><a href="#4-使用HSE计算DOS" class="headerlink" title="4**.使用HSE计算DOS**"></a>4**.使用<code>HSE</code>计算<code>DOS</code>**</h4><pre><code class="shell">#在非自洽计算时，INCAR加上
SYSTEM
ISMEAR = -5
LORBIT =10
ISTART = 1
ICHARG = 11
LHFCALC = .TRUE.  #采用杂化泛函计算
HFSCREEN = 0.2     #0.2代表HSE06，0.3代表HSE03
ALGO = All   #Damped更容易收敛
TIME = 0.4    
PRECFOCK = Fast
NKRED = 2
</code></pre>
<h4 id="5-计算能带"><a href="#5-计算能带" class="headerlink" title="5**.计算能带**"></a>5**.计算能带**</h4><blockquote>
<ul>
<li><strong>金属用<code>ISMEAR=1</code>, 半导体或绝缘体，用<code>ISMEAR=0</code>(能带就是不同k点上本征值连成的线,因为<code>ISMEAR=-5</code>正四面体法无法识别线性的<code>k-points</code></strong></li>
<li><strong>非自洽:非自洽就是在给定基态电子密度下的一次电子自洽，获得特定k点的能量本征值,给定电子密度下，计算特定k点的本征值，即本征能级（<code>EIGENVAL</code>文件）连起来获得能带</strong></li>
<li>不需要读取WAVECAR 即ISTART &#x3D; 0就可以，也不需要输出WAVECAR，即LWAVE &#x3D; .FALSE.</li>
<li>关于费米能级，认为dos&#x2F;自洽算出来的费米能级是准确的。通过看能带的OUTCAR对应费米能级的占据，可以检查是否是金属还是绝缘体</li>
</ul>
</blockquote>
<hr>
<pre><code class="shell">SYSTEM 
PREC=Accurate
EDIFF =1e-5
NSW = 0
IBRION = -1
ISIF = 2 
ENCUT = 1000
ISTART =1
ICHARG =11 
ISMEAR= 1
SIGMA = 0.2
NBANDS = 同自洽用的NBANDS/可以多设置一些，1.5倍吧
#k点要变化，cp自洽的电荷密度（和计算态密度比差别主要在k点）cp电子密度 波函数
#能带k点（特定高对称点间）（要先导入对称性 build-build symmetry)
  k-points along high symmetry lines
   20 ！20 intersections
   Line-mode
   rec（倒空间，cart笛卡尔空间）
    0 0 0 ! gamma
    0 0 1 ! X
    
    * * * ! X
    * * * ! 
   
  #dos和band画图：交换坐标轴，合并图片，右侧；绘图完成右侧锯齿可使线条更加平滑
</code></pre>
<ul>
<li><p>测试一个金属</p>
<p>ISMEAR &#x3D; -5的结果</p>
<p><img src="/../../%E5%9B%BE%E7%89%87/image-20230603154355515.png" alt="image-20230603154355515"></p>
<p>ISMEAR &#x3D; 1 SIGMA &#x3D; 0.2的结果</p>
<p><img src="/../../%E5%9B%BE%E7%89%87/image-20230603154452378.png" alt="image-20230603154452378"></p>
<p>ISMEAR &#x3D; 0 SIGMA &#x3D; 0.05的结果</p>
<p><img src="/../../%E5%9B%BE%E7%89%87/image-20230603154524087.png" alt="image-20230603154524087"></p>
<p>ISMEAR &#x3D; 0 SIGMA &#x3D; 0.05 调高k点密度的结果</p>
<p><img src="/../../%E5%9B%BE%E7%89%87/image-20230603154903386.png" alt="image-20230603154903386"></p>
<h4 id="6-作图"><a href="#6-作图" class="headerlink" title="6. 作图"></a>6. 作图</h4><p>&#x3D;&#x3D;自洽的费米能级是准确的，能带和dos使用同一个费米能级 需要把能带和dos里的DOSCAR的费米能级改成自洽的费米能级&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;自洽不要用太高密度的k点 数值误差&#x3D;&#x3D;</p>
</li>
</ul>
<h2 id="5-测试NCORE和KPAR"><a href="#5-测试NCORE和KPAR" class="headerlink" title="5. 测试NCORE和KPAR"></a>5. <strong>测试NCORE和KPAR</strong></h2><blockquote>
<p><strong>为了便于对比</strong></p>
<ol>
<li><strong>可以使用ISTART &#x3D; 1 ICHARG &#x3D; 11的方式，统一一个离子步的电子步个数，进而计算单个离子步所用时长</strong></li>
<li><strong>可以通过设置NELM 和NELMIN来固定电子步个数</strong></li>
</ol>
</blockquote>
<ul>
<li>1.产生INCAR</li>
</ul>
<pre><code class="shell">ncores=(1 2 4 8 12 16 18 24 )
kpars=(1 2 4 8 12 16 20 24)

# Create directories for each combination of parameters
for ncore in &quot;$&#123;ncores[@]&#125;&quot;; do
    for kpar in &quot;$&#123;kpars[@]&#125;&quot;; do
        dir=&quot;ncore$&#123;ncore&#125;-kpar$&#123;kpar&#125;&quot;
        mkdir -p $dir
        cp INCAR POSCAR POTCAR xiugai.sh $dir
        sed -i &quot;s/NCORE = .*/NCORE = $ncore/&quot; $dir/INCAR
        sed -i &quot;s/KPAR = .*/KPAR = $kpar/&quot; $dir/INCAR
    done
done
</code></pre>
<ul>
<li>2.计算（将所有任务提到一个节点上）</li>
</ul>
<pre><code class="shell">#!/bin/sh
#SBATCH  --job-name=vasp_job  
#SBATCH  --output=log.out.%j
#SBATCH  --error=log.err.%j
#SBATCH  --partition=xieyuib
#SBATCH  --nodes=4
#SBATCH  --ntasks=192

source /work/env/oneapi-2022.2.0
srun hostname | sort | uniq &gt;&gt; /tmp/nodefile.$$
NP=`srun hostname | wc -l`

ncores=(1 2 4 8 12 16 18 24 )
kpars=(4 8 )

# Run VASP in each directory and save the output
for dir in $(ls -d ncore*-kpar*); do
    cd $dir
    echo &quot;Running VASP with NCORE = $(grep &quot;NCORE&quot; INCAR | awk &#39;&#123;print $3&#125;&#39;), KPAR = $(grep &quot;KPAR&quot; INCAR | awk &#39;&#123;print $3&#125;&#39;)&quot;
#mpirun -genv I_MPI_FABRICS shm:ofa -machinefile /tmp/nodefile.$$ -n $NP /work/software/vasp.6.1.0/vasp_std  &gt; vasp.log 2&gt;&amp;1
mpirun -genv I_MPI_FABRICS shm:ofa -machinefile /tmp/nodefile.$$ -n $NP /work/software/vasp.6.1.0-oneapi2022.2.0/vasp.6.1.0/bin/vasp_std  &gt; vasp.log 2&gt;&amp;1
#/work/software/vasp.6.1.0-oneapi2022.2.0/vasp.6.1.0/bin/vasp_std  &gt; vasp.log 2&gt;&amp;1
#mpirun -n 48 /work/software/vasp6.1-intel2018/vasp_std &gt; vasp.log 2&gt;&amp;1
    cd ..
done


rm -rf /tmp/nodefile.$$
</code></pre>
<ul>
<li>3.提取数据</li>
</ul>
<pre><code class="shell">for dir in $(ls -d ncore*-kpar*); do
    echo &quot;Running VASP with NCORE = $(grep NCORE $dir/INCAR), KPAR = $(grep &quot;KPAR&quot; $dir/INCAR)&quot;  &gt;&gt; dat
    grep LOOP $dir/OUTCAR |tail -n 10 &gt;&gt; dat 
   
done
</code></pre>
<h2 id="6-关于扩三倍胞"><a href="#6-关于扩三倍胞" class="headerlink" title="6.关于扩三倍胞"></a>6.关于扩三倍胞</h2><ul>
<li><ol>
<li>扩胞是如何进行的</li>
</ol>
</li>
</ul>
<p><strong>from vesta</strong> </p>
<p><img src="/../../%E5%9B%BE%E7%89%87/image-20230513153714264.png" alt="image-20230513153714264"></p>
<p><strong>即</strong>$[a,b,c]P&#x3D;[a_1,b_1,c_1]$，新的a是旧有的a,b,c按照旋转矩阵第一列组合而来，依此类推。</p>
<p>&#x3D;&#x3D;<strong>注意：vesta在扩胞后会进行一步旋转</strong>，<strong>来得到晶格常数矩阵为下三角的晶格矩阵</strong>&#x3D;&#x3D;</p>
<p>只要保证扩胞矩阵的行列式为3，那么扩出来的胞就是三倍胞吗，一定不是</p>
<p>旋转矩阵1<br>$$<br>\begin{matrix}3&amp;0&amp;0\0&amp;1&amp;0\0&amp;0&amp;1\end{matrix}<br>$$<br>和旋转矩阵2<br>$$<br>\begin{matrix}3&amp;1&amp;0\0&amp;1&amp;0\0&amp;0&amp;1\end{matrix}<br>$$<br>行列式都是3，但是矩阵1乘出来是$[3a,b,c]$,而矩阵2乘出来是$[3a,a+b,c]$体积是不同的，非对角元</p>
<h2 id="7-构建POTCAR"><a href="#7-构建POTCAR" class="headerlink" title="7. 构建POTCAR"></a>7. 构建POTCAR</h2><pre><code class="python"># 字典：元素对应的赝势文件路径
base_pseudo_path = &#39;/work/home/liz/vasp_pot/potpaw_PBE/&#39;
pseudo_paths = &#123;
    &#39;H&#39;: &#39;H/POTCAR&#39;,
    &#39;Li&#39;: &#39;Li_sv/POTCAR&#39;,
    &#39;Be&#39;: &#39;Be_sv/POTCAR&#39;,
    &#39;B&#39;: &#39;B/POTCAR&#39;,
    &#39;C&#39;: &#39;C/POTCAR&#39;,
    &#39;N&#39;: &#39;N/POTCAR&#39;,
    &#39;O&#39;: &#39;O/POTCAR&#39;,
    &#39;F&#39;: &#39;F/POTCAR&#39;,
    &#39;Ne&#39;: &#39;Ne/POTCAR&#39;,
    &#39;Na&#39;: &#39;Na_pv/POTCAR&#39;,
    &#39;Mg&#39;: &#39;Mg_pv/POTCAR&#39;,
    &#39;Al&#39;: &#39;Al/POTCAR&#39;,
    &#39;Si&#39;: &#39;Si/POTCAR&#39;,
    &#39;P&#39;: &#39;P/POTCAR&#39;,
    &#39;S&#39;: &#39;S/POTCAR&#39;,
    &#39;Cl&#39;: &#39;Cl/POTCAR&#39;,
    &#39;K&#39;: &#39;K_sv/POTCAR&#39;,
    &#39;Ca&#39;: &#39;Ca_sv/POTCAR&#39;,
    &#39;Sc&#39;: &#39;Sc_sv/POTCAR&#39;,
    &#39;Ti&#39;: &#39;Ti_pv/POTCAR&#39;,
    &#39;V&#39;: &#39;V_pv/POTCAR&#39;,
    &#39;Cr&#39;: &#39;Cr_pv/POTCAR&#39;,
    &#39;Mn&#39;: &#39;Mn_pv/POTCAR&#39;,
    &#39;Fe&#39;: &#39;Fe_pv/POTCAR&#39;,
    &#39;Co&#39;: &#39;Co/POTCAR&#39;,
    &#39;Ni&#39;: &#39;Ni_pv/POTCAR&#39;,
    &#39;Cu&#39;: &#39;Cu_pv/POTCAR&#39;,
    &#39;Zn&#39;: &#39;Zn/POTCAR&#39;,
    &#39;Ga&#39;: &#39;Ga_d/POTCAR&#39;,
    &#39;Ge&#39;: &#39;Ge_d/POTCAR&#39;,
    &#39;As&#39;: &#39;As/POTCAR&#39;,
    &#39;Se&#39;: &#39;Se/POTCAR&#39;,
    &#39;Br&#39;: &#39;Br/POTCAR&#39;,
    &#39;Kr&#39;: &#39;Kr/POTCAR&#39;,
    &#39;Rb&#39;: &#39;Rb_sv/POTCAR&#39;,
    &#39;Sr&#39;: &#39;Sr_sv/POTCAR&#39;,
    &#39;Y&#39;: &#39;Y_sv/POTCAR&#39;,
    &#39;Zr&#39;: &#39;Zr_sv/POTCAR&#39;,
    &#39;Nb&#39;: &#39;Nb_pv/POTCAR&#39;,
    &#39;Mo&#39;: &#39;Mo_pv/POTCAR&#39;,
    &#39;Tc&#39;: &#39;Tc_pv/POTCAR&#39;,
    &#39;Ru&#39;: &#39;Ru_pv/POTCAR&#39;,
    &#39;Rh&#39;: &#39;Rh_pv/POTCAR&#39;,
    &#39;Pd&#39;: &#39;Pd/POTCAR&#39;,
    &#39;Ag&#39;: &#39;Ag/POTCAR&#39;,
    &#39;Cd&#39;: &#39;Cd/POTCAR&#39;,
    &#39;In&#39;: &#39;In_d/POTCAR&#39;,
    &#39;Sn&#39;: &#39;Sn_d/POTCAR&#39;,
    &#39;Sb&#39;: &#39;Sb/POTCAR&#39;,
    &#39;Te&#39;: &#39;Te/POTCAR&#39;,
    &#39;I&#39;: &#39;I/POTCAR&#39;,
    &#39;Xe&#39;: &#39;Xe/POTCAR&#39;,
    &#39;Cs&#39;: &#39;Cs_sv/POTCAR&#39;,
    &#39;Ba&#39;: &#39;Ba_sv/POTCAR&#39;,
    &#39;La&#39;: &#39;La/POTCAR&#39;,
    &#39;Ce&#39;: &#39;Ce/POTCAR&#39;,
    &#39;Pr&#39;: &#39;Pr_3/POTCAR&#39;,
    &#39;Nd&#39;: &#39;Nd_3/POTCAR&#39;,
    &#39;Pm&#39;: &#39;Pm_3/POTCAR&#39;,
    &#39;Sm&#39;: &#39;Sm_3/POTCAR&#39;,
    &#39;Eu&#39;: &#39;Eu/POTCAR&#39;,
    &#39;Gd&#39;: &#39;Gd/POTCAR&#39;,
    &#39;Tb&#39;: &#39;Tb_3/POTCAR&#39;,
    &#39;Dy&#39;: &#39;Dy_3/POTCAR&#39;,
    &#39;Ho&#39;: &#39;Ho_3/POTCAR&#39;,
    &#39;Er&#39;: &#39;Er_3/POTCAR&#39;,
    &#39;Tm&#39;: &#39;Tm_3/POTCAR&#39;,
    &#39;Yb&#39;: &#39;Yb_2/POTCAR&#39;,
    &#39;Lu&#39;: &#39;Lu_3/POTCAR&#39;,
    &#39;Hf&#39;: &#39;Hf_pv/POTCAR&#39;,
    &#39;Ta&#39;: &#39;Ta_pv/POTCAR&#39;,
    &#39;W&#39;: &#39;W_pv/POTCAR&#39;,
    &#39;Re&#39;: &#39;Re_pv/POTCAR&#39;,
    &#39;Os&#39;: &#39;Os_pv/POTCAR&#39;,
    &#39;Ir&#39;: &#39;Ir/POTCAR&#39;,
    &#39;Pt&#39;: &#39;Pt/POTCAR&#39;,
    &#39;Au&#39;: &#39;Au/POTCAR&#39;,
    &#39;Hg&#39;: &#39;Hg/POTCAR&#39;,
    &#39;Tl&#39;: &#39;Tl_d/POTCAR&#39;,
    &#39;Pb&#39;: &#39;Pb_d/POTCAR&#39;,
    &#39;Bi&#39;: &#39;Bi/POTCAR&#39;,
    &#39;Th&#39;: &#39;Th/POTCAR&#39;,
    &#39;Pa&#39;: &#39;Pa/POTCAR&#39;,
    &#39;U&#39;: &#39;U/POTCAR&#39;,
    &#39;Np&#39;: &#39;Np/POTCAR&#39;,
    &#39;Pu&#39;: &#39;Pu/POTCAR&#39;,
# 添加其他元素和对应的赝势路径
&#125;

for element, relative_path in pseudo_paths.items():
    full_path = f&quot;&#123;base_pseudo_path&#125;&#123;relative_path&#125;&quot;
    pseudo_paths[element] = full_path


# 读取 POSCAR 文件
def read_poscar(poscar_path):
    with open(poscar_path, &#39;r&#39;) as f:
        lines = f.readlines()
        elements = lines[5].split()
        return elements

# 创建大的 POTCAR 文件
def create_big_potcar(elements, pseudo_paths, output_path):
    with open(output_path, &#39;w&#39;) as f_out:
        for element in elements:
            if element in pseudo_paths:
                pseudo_path = pseudo_paths[element]
                with open(pseudo_path, &#39;r&#39;) as f_pseudo:
                    f_out.write(f_pseudo.read())
            else:
                print(f&quot;赝势文件不存在或未定义：&#123;element&#125;&quot;)

if __name__ == &quot;__main__&quot;:
    poscar_path = &quot;POSCAR&quot;  # 输入文件名
    output_potcar_path = &quot;POTCAR&quot;  # 输出的大 POTCAR 文件名

    elements = read_poscar(poscar_path)
    create_big_potcar(elements, pseudo_paths, output_potcar_path)
    print(&quot;大的 POTCAR 文件已创建&quot;)

</code></pre>
<h3 id="批量运行"><a href="#批量运行" class="headerlink" title="批量运行"></a>批量运行</h3><pre><code class="shell">for folder in */; do
    if [ -d &quot;$folder&quot; ]; then
        cp pot.py &quot;$folder&quot;
        cd &quot;$folder&quot;
        python pot.py &amp;
        sleep 10
        cd ..
    fi
done
</code></pre>
<h2 id="9-HSE06-计算能带"><a href="#9-HSE06-计算能带" class="headerlink" title="9. HSE06 计算能带"></a>9. HSE06 计算能带</h2><p><a target="_blank" rel="noopener" href="http://vaspkit.cn/index.php/29.html">杂化泛函计算能带 - VASPKIT与量化软件</a></p>
<p><a target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/IALGO">IALGO - Vaspwiki</a>  推荐用ALGO&#x3D;Damped或者All</p>
<p><a target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/LHFCALC">LHFCALC - Vaspwiki</a></p>
<blockquote>
<p>可以直接一步算，也就是直接用HSE06的方法算能带，但是对大体系可能会比较慢</p>
<p>可以分两步算，先使用PBE算CHG CHGCAR （需要注意的是PBE计算时KPOINTS要删掉不带权重的部分）然后copy CHG …等，使用HSE06计算能带 ，这样应该会更快点</p>
<p>两种算出来的有些许差别，在误差范围内，不同的初猜电荷密度和波函数会带来结果细微不同</p>
</blockquote>
<p>&#x3D;&#x3D;算能带第一步自洽就是得到电荷密度和波函数，普通算能带直接用ISTART &#x3D; 1 读WAVECAR和ICHARGE &#x3D; 11读CHGCAR就可以了。是给算能带的电荷密度和波函数给一个初猜值。ICHARGE&#x3D;11还有一个功能是固定住了电荷密度不变。&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;但是在HSE计算中，如果分两步来做，第二步的ICHARG不能固定住，需要用ICHARGE&#x3D;1,这样电荷密度可以迭代，读取的只是一个初猜值，因为HSE杂化泛函和普通的不同&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;最终建议：直接用一步法来做，省事又省时间&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;需要注意的点：计算HSE06的能带不能用ISMEAR &#x3D;-5，因为不识别，可用ISMEAR&#x3D;0&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;师弟遇到过一个问题：一步法得到的本征值和用HSE06自洽得到的本征值不同，因此建议是算一个自洽的本征值，如果和HSE06的结果一样，那就说明没问题，如果不一样，就要先HSE自洽，再读-算能带&#x3D;&#x3D;</p>
<p>1.结构优化</p>
<p>2.产生HSE06特用的KPOINTS</p>
<p>包括两部分，带权重的部分和不带权重的部分，其中带权重的部分是均匀撒点的，不带权重的能带的k点路径</p>
<p>均匀撒点是构建一个用于后面的良好的势，然后进行后面的计算，有没有pbe自洽的初猜值对最终的影响并不大</p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20231011185414503.png" alt="image-20231011185414503"></p>
<p>3.进行PBE自洽计算(不能用ISMEAR &#x3D;-5)</p>
<p>需要使用均匀洒点的kpoints，可以直接把上面的kpoints不带权重的部分删除，然后把k点数目修改掉</p>
<p>注意：不能使用不带权重的部分，否则算出来的带隙和直接使用HSE06计算不同</p>
<p>4.进行HSE06能带计算(复制CHG CHGCAR WAVECAR…)</p>
<p>SYSTEM &#x3D; Te<br>PREC &#x3D; Normal<br>EDIFF &#x3D; 1e-6<br>ENCUT &#x3D; 300<br>NELM &#x3D; 500<br>IBRION &#x3D; -1<br>ISIF &#x3D; 2<br>ISMEAR &#x3D; 0<br>SIGMA &#x3D; 0.05<br>PSTRESS &#x3D; 0.001<br>ISTART &#x3D; 0<br>ICHARG &#x3D;2<br>NPAR &#x3D; 12<br>ALGO &#x3D; Damped</p>
<p>！HSE参数</p>
<p>LHFCALC&#x3D;.TRUE.<br>HFSCREEN &#x3D; 0.2<br>TIME &#x3D; 0.4<br>LMAXFOCK &#x3D; 4<br>PRECFOCK&#x3D;Normal</p>
<blockquote>
<p>SIGMA &#x3D; 0. 05</p>
<p>&#x3D;&#x3D;处理数据产生能带时vaspkit不能用常规的，要用HSE特有的，252&#x3D;&#x3D;</p>
</blockquote>
<p>EIGENVAL 是本征值文件，可以看每个k点的本征值</p>
<h2 id="9-自旋轨道耦合计算能带"><a href="#9-自旋轨道耦合计算能带" class="headerlink" title="9.自旋轨道耦合计算能带"></a>9.自旋轨道耦合计算能带</h2><p><img src="/./../../%E5%9B%BE%E7%89%87/image-20230926195529367.png" alt="image-20230926195529367"></p>
<p>一个HSE06+SOC的能带计算</p>
<pre><code>SYSTEM = Te
PREC = Normal
EDIFF = 1e-6
ENCUT = 300
NELM = 500
IBRION = -1
ISIF = 2
ISMEAR = 0
SIGMA = 0.05
PSTRESS = 0.001
ISTART = 1
ICHARG =0
NPAR = 12
ALGO = Damped(收敛快，vaspwiki LHFCALC关键词下推荐的,all或者damped,算出来能带比较放心)
#HSE06参数
LHFCALC=.TRUE.
HFSCREEN = 0.2
TIME = 0.4
LMAXFOCK = 4
PRECFOCK=Normal
#SOC参数
ISPIN = 2
LSORBIT = .TRUE.
LORBMOM  = T
MAGMOM   = 9*0 给定每个原子每个方向（xyz)方向的磁矩，这里是3个原子，可以先按默认值给初猜，最后OUTCAR会输出每个方向的磁矩
LORBIT = 11
ISYM = -1
#使用GGA时的修正
GGA = PS
GGA_COMPAT = .FALSE.
</code></pre>
<blockquote>
<p>使用LDA比PBE要更容易收敛，LDA不需要GGA和GGA_COMPAT</p>
</blockquote>
<h2 id="10-做异质结"><a href="#10-做异质结" class="headerlink" title="10 .做异质结"></a>10 .做异质结</h2><p>&#x3D;&#x3D;记住，构建完优化时要用固定晶格的优化&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;要加范德华力&#x3D;&#x3D;</p>
<p>[利用Materials Studio构建异质结的详细攻略 - 知乎 (zhihu.com)](<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/291117500#:~:text=%E6%89%93%E5%BC%80Build">https://zhuanlan.zhihu.com/p/291117500#:~:text=打开Build</a> -Bulid,Layers，在Define Layers界面上导入slab1和slab2；然后点击Matching界面，检查两组参数a1、b1与a2、b2是否相近；选择Layer1、Layer2或者average合并晶胞，点击build按钮即可生成异质结结构。)</p>
<p>层状材料 是不应该加vdw的，只要是有周期性的材料都不应该加vdw</p>
<p>例子：PdSe   &#x2F;data&#x2F;home&#x2F;mym&#x2F;workplace&#x2F;xieyu&#x2F;liz&#x2F;2-cal&#x2F;8-PbSe2&#x2F;1-opt-PdSe2</p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20231113153952705.png" alt="image-20231113153952705"></p>
<p>加vdw后与文献不符合</p>
<p>这条存疑，在计算Te和WSe2优化时发现如果不加VDW&#x3D;12会导致体积膨胀严重，加VDW&#x3D;11膨胀也很严重</p>
<h2 id="11-做差分电荷密度"><a href="#11-做差分电荷密度" class="headerlink" title="11.做差分电荷密度"></a>11.做差分电荷密度</h2><p><a target="_blank" rel="noopener" href="https://blog.shishiruqi.com/2019/07/12/chgdiff/">https://blog.shishiruqi.com/2019/07/12/chgdiff/</a></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20231115105059098.png" alt="image-20231115105059098"></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20231115105111192.png" alt="image-20231115105111192"></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20231115105127103.png" alt="image-20231115105127103"></p>
<h2 id="12-如何考虑加U和加磁性"><a href="#12-如何考虑加U和加磁性" class="headerlink" title="12. 如何考虑加U和加磁性"></a>12. 如何考虑加U和加磁性</h2><p>U-强关联&#x2F;局域电子的库伦相互作用   轨道局域且有空</p>
<p>磁性 局域电子 且有未配对</p>
<p>要求：首先电子是局域的 是否局域看价态和原子序数</p>
<p>4f电子的轨道是十分局域的，4d好很多</p>
<p>3d (部分)、4d(部分)、4f</p>
<p>需要根据使用的POTCAR的价电子数目来决定是否加U和磁性</p>
<p>磁性可以都加上进行自动优化，但是U只在强局域轨道（3d 4f）上加就可以</p>
<p><a target="_blank" rel="noopener" href="https://vasp.at/wiki/Choosing_pseudopotentials">镧系用_2 _3可以不用加U，也可以不用加磁性，因为无法描述准确</a></p>
<p>Ti3+需要考虑加磁性计算，但是不需要考虑加U。因为Ti3+只有1个d电子，没有相互作用，只有磁性</p>
<hr>
<p>轨道能量排序</p>
<h3 id="马德隆规则（n-l-规则）"><a href="#马德隆规则（n-l-规则）" class="headerlink" title="马德隆规则（n+l 规则）"></a>马德隆规则（n+l 规则）</h3><p>这个规则提供了一个简单的方法来预测原子轨道能量的相对高低。它有两个部分：</p>
<ol>
<li><strong>n+l 值越小，轨道能量越低。</strong></li>
<li><strong>如果两个轨道的 n+l 值相同，则主量子数 n 越小，轨道能量越低。</strong></li>
</ol>
<p>1s&lt;2s&lt;2p&lt;3s&lt;3p&lt;4s&lt;3d&lt;4p&lt;5s&lt;4d&lt;5p&lt;6s&lt;4f&lt;5d&lt;6p</p>
<h3 id="失去电子时："><a href="#失去电子时：" class="headerlink" title="失去电子时："></a>失去电子时：</h3><h3 id="3d-与-4s-的能量高低"><a href="#3d-与-4s-的能量高低" class="headerlink" title="3d 与 4s 的能量高低"></a><strong>3d 与 4s 的能量高低</strong></h3><ul>
<li>在<strong>基态中性原子</strong>里：<ul>
<li>元素在填充轨道时，通常是 <strong>4s 先于 3d</strong> 填充（因为在未被占据时，4s 轨道能量略低于 3d）。</li>
<li>例如：Sc（钪）的基态构型是 [Ar] 3d¹ 4s²。</li>
</ul>
</li>
<li>在<strong>成键或离子化后</strong>：<ul>
<li>一旦 <strong>3d 开始被填充</strong>，电子-电子相互作用和屏蔽效应会导致 <strong>3d 轨道能量下降，相对变得比 4s 更稳定</strong>；同时 4s 轨道能量上升。</li>
<li>所以在多数 <strong>过渡金属</strong>中，3d 轨道能量 &lt; 4s 轨道能量。</li>
</ul>
</li>
</ul>
<h3 id="2-失电子顺序"><a href="#2-失电子顺序" class="headerlink" title="2. 失电子顺序"></a>2. <strong>失电子顺序</strong></h3><ul>
<li>电离时，电子是从<strong>能量较高的轨道</strong>先失去的。</li>
<li>因此，虽然在填充时是 <strong>4s → 3d</strong>，但在失电子时却是 <strong>4s → 3d</strong>（也就是说先失去 4s 再失去 3d）。</li>
</ul>
<h4 id="主族元素（s-p-区）"><a href="#主族元素（s-p-区）" class="headerlink" title="主族元素（s, p 区）"></a><strong>主族元素（s, p 区）</strong></h4><ul>
<li>电离顺序和填充顺序一致。<ul>
<li>例如：Na（[Ne] 3s¹），失去的是 3s 电子。</li>
<li>Cl（[Ne] 3s² 3p⁵），失去的是 3p 电子。</li>
</ul>
</li>
</ul>
<h4 id="2-过渡金属（d-区）"><a href="#2-过渡金属（d-区）" class="headerlink" title="(2) 过渡金属（d 区）"></a>(2) <strong>过渡金属（d 区）</strong></h4><ul>
<li><strong>先失去 4s，再失去 3d</strong>。<ul>
<li>这是因为一旦 3d 有电子，3d 轨道能量下降，而 4s 轨道能量升高。</li>
<li>例如：Fe（[Ar] 3d⁶ 4s²），<ul>
<li>Fe²⁺ → [Ar] 3d⁶（先失去 4s²）</li>
<li>Fe³⁺ → [Ar] 3d⁵（再失去一个 3d）。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="3-内过渡金属（f-区）"><a href="#3-内过渡金属（f-区）" class="headerlink" title="(3) 内过渡金属（f 区）"></a>(3) <strong>内过渡金属（f 区）</strong></h4><ul>
<li>类似规律：先失去 s 轨道电子，再失去 (n-2)f 或 (n-1)d。<ul>
<li>例如：Ce（[Xe] 4f¹ 5d¹ 6s²），失去电子时先丢 6s，再丢 5d&#x2F;4f。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="原子序数和轨道收缩"><a href="#原子序数和轨道收缩" class="headerlink" title="原子序数和轨道收缩"></a>原子序数和轨道收缩</h3><p>在同一周期（第四周期）中，从左到右，原子核的<strong>有效核电荷</strong>（Z_eff）逐渐增加。</p>
<ul>
<li><strong>Ti（原子序数 22）</strong>：有效核电荷相对较小。由于核对电子的吸引力较弱，Ti 的 3d 轨道空间分布比较<strong>弥散</strong>，或者说比较“胖”。电子在这个弥散的轨道上活动，彼此间的库仑排斥作用（电子关联）相对较弱。</li>
<li><strong>Co（原子序数 27）和 Ni（原子序数 28）</strong>：有效核电荷更大。强大的核吸引力将 3d 轨道向内拉，使得轨道空间分布<strong>收缩</strong>得非常厉害。电子被紧密地束缚在原子核附近，彼此间的距离更近，库仑排斥作用也就变得非常强烈，从而导致了<strong>强局域性</strong>。</li>
</ul>
<p>这个现象被称为<strong>轨道收缩</strong>。因此，越是靠右的过渡金属，其 d 轨道收缩得越厉害，电子局域性就越强。</p>
<h3 id="电子数和相互作用"><a href="#电子数和相互作用" class="headerlink" title="电子数和相互作用"></a>电子数和相互作用</h3><p>除了轨道收缩，d 轨道的电子数也很重要。</p>
<ul>
<li><strong>Ti$^{3+}$</strong> 的电子构型是 3d1，只有一个 d 电子。这个电子独自在轨道上，没有其他 d 电子的强排斥，所以关联作用很弱。</li>
<li><strong>Co$^{2+}$</strong> 的电子构型是 3d7，有七个 d 电子，其中三个是不成对的。这么多电子拥挤在收缩的 d 轨道上，它们之间的相互排斥力变得非常显著。这种强烈的排斥力是需要用 <strong>Hubbard U</strong> 来修正的</li>
</ul>
<hr>
<h3 id="关于轨道局域性"><a href="#关于轨道局域性" class="headerlink" title="关于轨道局域性"></a>关于轨道局域性</h3><p><strong>4f&gt; 3d&gt;4d &gt;5d</strong></p>
<p>判断 s, p, d, f 轨道的局域性，主要取决于两个因素：**主量子数（n）**和**角量子数（l）**。</p>
<p>简单来说，轨道越<strong>小</strong>，形状越<strong>复杂</strong>，其局域性就越强。</p>
<h3 id="1-轨道类型-l-对局域性的影响"><a href="#1-轨道类型-l-对局域性的影响" class="headerlink" title="1. 轨道类型 (l) 对局域性的影响"></a>1. 轨道类型 (l) 对局域性的影响</h3><p>对于同一主量子数 n 的不同轨道，局域性遵循以下规律：</p>
<p>s &lt; p &lt; d &lt; f</p>
<ul>
<li><strong>s 轨道</strong>（l&#x3D;0）是球形的，空间分布最弥散。</li>
<li><strong>p 轨道</strong>（l&#x3D;1）是哑铃形的，比 s 轨道更集中。</li>
<li><strong>d 轨道</strong>（l&#x3D;2）和 <strong>f 轨道</strong>（l&#x3D;3）形状更复杂，空间分布更集中，电子被更紧密地束缚在原子核周围。</li>
</ul>
<p>因此，<strong>f 轨道最局域</strong>，其次是 d 轨道，然后是 p 轨道，s 轨道最不局域（最弥散）。</p>
<h3 id="2-主量子数-n-对局域性的影响"><a href="#2-主量子数-n-对局域性的影响" class="headerlink" title="2. 主量子数 (n) 对局域性的影响"></a>2. 主量子数 (n) 对局域性的影响</h3><p>对于同一类型的轨道，局域性随着主量子数 n 的增加而减弱：</p>
<p>例如：3d &gt; 4d &gt; 5d</p>
<ul>
<li>主量子数 n 越大，轨道能量越高，电子离原子核越远，空间分布也越<strong>弥散</strong>。</li>
<li>这种弥散导致电子间的库仑排斥力减弱，因此局域性也随之减弱。</li>
</ul>
<h3 id="综合判断"><a href="#综合判断" class="headerlink" title="综合判断"></a>综合判断</h3><p>综合以上两点，我们可以得到一个大致的局域性判断顺序：</p>
<ol>
<li><strong>比较轨道类型（l）：</strong> f&gt;d&gt;p&gt;s</li>
<li><strong>比较主量子数（n）：</strong> n 越小，局域性越强。</li>
</ol>
<p>例如，比较 3d 和 4f 轨道：</p>
<ul>
<li>4f 是 f 轨道，天生比 d 轨道局域。</li>
<li>虽然 4f 的主量子数比 3d 大，但 f 轨道的强烈局域性效应<strong>主导</strong>了主量子数的影响。</li>
<li>因此，4f 轨道比 3d 轨道<strong>更局域</strong>。</li>
</ul>
<p><strong>结论</strong></p>
<p>将你列出的轨道按照局域性从强到弱排序，大致如下：</p>
<p>4f &gt; 3d &gt; 4d &gt; 5d &gt; 2p &gt; 3p &gt; 4p &gt; 5p &gt; 1s &gt; 2s &gt; 3s &gt; 4s &gt; 5s &gt; 6s &gt; 6p</p>
<p>需要注意的是，这个排序是基于一般物理规律的，在特定原子或化合物中，由于电子屏蔽和轨道杂化等复杂效应，实际的轨道能量顺序可能会有所不同，但局域性的基本规律依然成立。</p>
<hr>
<h3 id="能带（Band-Structure）"><a href="#能带（Band-Structure）" class="headerlink" title="能带（Band Structure）"></a>能带（Band Structure）</h3><p>能带图描述了电子能量随波矢（k-点）的变化。</p>
<ul>
<li><strong>局域化轨道：</strong> 局域化的电子，由于被原子核紧紧束缚，很难在晶体中移动。这导致它们在布里渊区中的能量变化很小，<strong>能带会非常平坦</strong>（斜率接近零）。能带越平坦，表明电子的有效质量越大，局域性越强。</li>
<li><strong>非局域化（巡游）轨道：</strong> 非局域化的电子可以在晶体中自由移动。它们的能量对波矢的变化很敏感，因此能带会非常<strong>分散</strong>（斜率很大）。</li>
</ul>
<p>举个例子，在计算含有 f 电子的稀土氧化物时，你会看到费米能级附近有一系列非常平坦的能带，这些就是局域的 f 轨道能带。而那些由 s 或 p 轨道形成的宽能带则非常分散。</p>
<h3 id="态密度（Density-of-States-DOS）"><a href="#态密度（Density-of-States-DOS）" class="headerlink" title="态密度（Density of States, DOS）"></a>态密度（Density of States, DOS）</h3><p>态密度图描述了在特定能量下有多少电子态。</p>
<ul>
<li><strong>局域化轨道：</strong> 局域化的电子，由于能量分散很小，在态密度图上会形成非常<strong>尖锐且狭窄的峰</strong>。峰越窄，电子在能量上分布的范围越小，局域性就越强。</li>
<li><strong>非局域化（巡游）轨道：</strong> 游走的电子，由于能量分散在一个很宽的能带上，因此在态密度图上会形成<strong>宽而弥散的峰</strong>。</li>
</ul>
<p>在实际计算中，我们通常会看<strong>分波态密度（Partial DOS 或 PDOS）</strong>。通过 PDOS，你可以清楚地看到特定原子上的特定轨道（如 3d 或 4f 轨道）对总态密度的贡献。如果某个原子的 f 轨道在费米能级附近形成一个非常尖锐的 PDOS 峰，那就说明这些电子是强局域化的。</p>
<hr>
<p><strong>电子关联（Electron Correlation）</strong>：在传统的密度泛函理论（DFT）中，特别是在局域密度近似（LDA）或广义梯度近似（GGA）下，对电子间的库仑排斥作用描述得不够精确。对于那些 d 电子或 f 电子具有强局域化特性的过渡金属或稀土元素，这种近似会导致错误的结果，比如带隙（band gap）被严重低估，甚至出现错误的金属态。</p>
<p><strong>强关联材料</strong>：像一些过渡金属氧化物，比如 NiO、CoO 等，它们的 d 电子非常局域，电子间的关联作用很强。为了更准确地描述这些材料的物理性质，比如带隙、磁性等，就需要引入 Hubbard U 来修正 d 轨道的能量。</p>
<hr>
<p>要判断一个体系中的电子是否具有局域性，通常需要从两个方面入手：<strong>价态分析</strong>和<strong>第一性原理计算</strong>。这两种方法可以相互印证，帮助你做出准确的判断。</p>
<hr>
<h4 id="1-价态分析"><a href="#1-价态分析" class="headerlink" title="1. 价态分析"></a>1. 价态分析</h4><p>这是最直接也最常用的方法，尤其适用于过渡金属和稀土元素。</p>
<ul>
<li><strong>看电子构型：</strong> 电子局域性主要来自未满的 <strong>d</strong> 或 <strong>f</strong> 轨道。<ul>
<li>如果一个离子的 <strong>d</strong> 或 <strong>f</strong> 轨道是空的（如 d0）或者全满的（如 d10），那么这些电子的关联作用通常可以忽略，它们不具有强局域性。例如，Ti$^{4+}$ (3d0) 或 Zn$^{2+}$ (3d10) 的 d 轨道电子就没有局域性。</li>
<li>如果 <strong>d</strong> 或 <strong>f</strong> 轨道是部分填充的（如 d1 到 d9），那么这些电子通常会表现出一定的局域性。例如，Fe$^{3+}$ (3d5) 和 Ni$^{2+}$ (3d8) 的 d 电子具有很强的局域性。</li>
</ul>
</li>
<li><strong>例外情况：</strong> 即使 d 轨道部分填充，如果元素本身在周期表中位置靠前（如 Ti, V），其 d 轨道的扩展性较强，电子局域性也相对较弱。而对于周期表靠后的元素（如 Co, Ni）以及稀土元素，其 d 或 f 轨道非常收缩，局域性就非常显著。</li>
</ul>
<hr>
<h3 id="2-第一性原理计算"><a href="#2-第一性原理计算" class="headerlink" title="2. 第一性原理计算"></a>2. 第一性原理计算</h3><p>如果你需要更精确或定量的判断，第一性原理计算是必不可少的工具。</p>
<ul>
<li><strong>分析态密度（DOS）和分波态密度（PDOS）：</strong><ul>
<li><strong>非局域化（巡游）电子：</strong> 如果电子是巡游的，那么它们在能量上会形成较宽的能带。在态密度图中，对应的峰会比较宽且弥散。例如，金属中的 s 和 p 电子通常是巡游的。</li>
<li><strong>局域化电子：</strong> 如果电子是局域的，它们会形成较窄的能带，甚至是在能隙中的孤立峰。在分波态密度图中，你会看到 d 或 f 轨道在费米能级附近出现非常尖锐且窄的峰，这通常是电子强关联的标志。</li>
</ul>
</li>
<li><strong>计算能带结构：</strong><ul>
<li><strong>非局域化：</strong> 对于巡游电子，其能带在布里渊区中会很分散，斜率较大，表明电子有效质量小，移动性强。</li>
<li><strong>局域化：</strong> 对于局域电子，其能带会非常平坦，斜率很小，甚至接近水平。这表明电子有效质量大，移动性差。能带越平坦，局域性越强。</li>
</ul>
</li>
</ul>
<hr>
<p>当用第一性原理方法计算时，我们通常不考虑对 <strong>p 电子</strong> 加 U，也不需要考虑它们的磁性。这主要是因为 p 电子的性质与 d 和 f 电子有本质区别。</p>
<h3 id="1-为什么不考虑加-U？"><a href="#1-为什么不考虑加-U？" class="headerlink" title="1. 为什么不考虑加 U？"></a>1. 为什么不考虑加 U？</h3><p>Hubbard U 是用来修正电子间强烈的库仑排斥作用，这种作用在那些空间分布非常局域的轨道上尤为显著。</p>
<ul>
<li><strong>p 轨道的空间分布：</strong> p 轨道是球形对称的，并且其空间分布比 d 和 f 轨道要<strong>弥散得多</strong>。这意味着 p 电子在原子核附近的局域化程度很低。</li>
<li><strong>电子间排斥力弱：</strong> 因为 p 电子分布在更大的空间范围内，它们之间的库仑排斥作用（即电子关联）相对较弱。传统的密度泛函理论（如 LDA 和 GGA）对这种弱关联作用的描述已经足够准确。</li>
<li><strong>能带特征：</strong> 像非金属元素（如 C, N, O, P, S）的 p 轨道通常会形成<strong>宽能带</strong>，这表明 p 电子是<strong>巡游（delocalized）</strong>的，而不是局域的。</li>
</ul>
<p>简而言之，p 电子的性质是巡游的，它们之间的关联作用很弱，因此不需要像 d 或 f 电子那样用 Hubbard U 来进行校正。</p>
<hr>
<h3 id="2-为什么不考虑加磁性？"><a href="#2-为什么不考虑加磁性？" class="headerlink" title="2. 为什么不考虑加磁性？"></a>2. 为什么不考虑加磁性？</h3><p>磁性，特别是局域磁矩，通常与<strong>不成对的电子</strong>有关。</p>
<ul>
<li><strong>p 轨道的配对：</strong> p 轨道能容纳 6 个电子。在大多数化合物中，非金属元素的 p 轨道要么是空的，要么是全满的，或者会通过化学键形成稳定的电子对。例如，在很多氧化物中，氧的 2p 轨道是全满的，不含不成对电子，因此不会产生磁性。</li>
<li><strong>自旋的非极化性：</strong> 即使存在不成对的 p 电子，它们通常也会形成<strong>巡游态</strong>，自旋方向在空间上是随机的，不会在某个原子上形成稳定的、局域的磁矩。因此，我们通常说 p 电子是“非磁性”的。</li>
</ul>
<p>相比之下，过渡金属和稀土元素的 d 和 f 轨道非常局域。这些轨道上的不成对电子（如 3d5 的 Fe$^{3+}$ 或 4f7 的 Gd$^{3+}$）倾向于在原子上保持固定的自旋方向，从而产生<strong>局域磁矩</strong>。这就是为什么我们在计算这些体系时，需要考虑自旋极化计算（也就是我们常说的“加磁性”）。</p>
<p><strong>结论：</strong> p 电子是巡游的，电子关联作用弱，并且通常形成稳定的电子对而不产生局域磁矩。因此，在第一性原理计算中，我们既不需要对 p 电子加 U，也不需要特别考虑它们的磁性。</p>
<hr>
<p>理解3d是一种很局域的轨道，那么所有3d满占据的元素应该都有3d电子的相互作用，那么所有3d10元素都应该加U对吗</p>
<p>您的理解非常深入，这个推论在很大程度上是正确的，但我们需要对“所有”这个词做一点精确的界定。</p>
<p>您的逻辑链是：</p>
<ol>
<li>3d 轨道很局域。 (正确)</li>
<li>局域轨道就有相互作用（自相互作用误差）。 (正确)</li>
<li>因此所有 3d¹⁰ 元素都应该加 U。 (<strong>这在实践中要看情况</strong>）</li>
</ol>
<p>您的直觉是对的：<strong>3d¹⁰ 电子的自相互作用误差并不会因为轨道被占满而消失。</strong> 标准的 GGA (如PBE) 泛函依然会<strong>低估</strong>这套 d¹⁰ 轨道的束缚能，导致它们在计算出的能带结构中<strong>能量位置过高</strong>（过于接近费米面）。</p>
<p>然而，是否<strong>“必须”</strong>加 U，取决于这个“能量位置错误”对你所研究的体系和性质有多大的<strong>“破坏性”</strong>。</p>
<p>我们可以把 3d¹⁰ 体系分为两大类：</p>
<hr>
<h3 id="1-强烈推荐加-U-的情况-误差破坏性大"><a href="#1-强烈推荐加-U-的情况-误差破坏性大" class="headerlink" title="1. 强烈推荐加 U 的情况 (误差破坏性大)"></a>1. 强烈推荐加 U 的情况 (误差破坏性大)</h3><p>这类体系的 d¹⁰ 能带虽然全满，但它们在能量上<strong>距离价带顶 (VBM) 非常近</strong>。</p>
<ul>
<li><strong>经典案例：</strong> ZnO (Zn²⁺ 是 3d¹⁰), Cu₂O (Cu¹⁺ 是 3d¹⁰), Ga₂O₃ (Ga³⁺ 是 3d¹⁰)</li>
<li><strong>PBE 的问题：</strong><ol>
<li>PBE 把 3d¹⁰ 能带的能量算得<strong>太高</strong>了。</li>
<li>这套错误的 d¹⁰ 能带与价带顶的 O 2p 轨道产生了<strong>过度的、虚假的 p-d 杂化</strong>。</li>
<li>这种虚假杂化错误地将价带顶（VBM）<strong>推高</strong>了。</li>
<li><strong>最终结果：</strong> 计算出的带隙<strong>严重偏低</strong>（例如 PBE 算 ZnO 带隙仅 0.8 eV 左右，而实验值是 3.4 eV）。</li>
</ol>
</li>
<li><strong>加 U 的作用：</strong> 在这里，加 U (如 <code>LDAUU = 8 eV</code>) 的作用就像一个“修正器”，它将 d¹⁰ 能带<strong>推回到更深、更合理</strong>的能量位置。这解除了虚假的 p-d 杂化，使价带顶回落，从而<strong>修正了带隙</strong>，使其更接近实验值。</li>
</ul>
<p><strong>结论：对于这类 3d¹⁰ 的宽带隙半导体&#x2F;绝缘体，你几乎必须加 U（或者使用更昂贵的混合泛函 HSE06），否则你的电子结构（尤其是带隙）将是完全错误的。</strong></p>
<hr>
<h3 id="2-通常不加-U-的情况-误差破坏性小"><a href="#2-通常不加-U-的情况-误差破坏性小" class="headerlink" title="2. 通常不加 U 的情况 (误差破坏性小)"></a>2. 通常不加 U 的情况 (误差破坏性小)</h3><p>这类体系中，d¹⁰ 轨道是<strong>半芯态 (semi-core state)<strong>，它们在能量上</strong>远远低于</strong>费米面（或价带）。</p>
<ul>
<li><strong>经典案例：</strong> 单质金属 Cu, 单质金属 Zn。</li>
<li><strong>PBE 的问题：</strong> PBE 确实<strong>仍然</strong>会把它们的 d¹⁰ 能带算得偏高（例如，对 Cu 金属，PBE 算出的 d 带顶距离费米面约 -2 eV，而实验值更低约 -2.5 eV）。</li>
<li><strong>为什么可以不加 U？</strong><ul>
<li>在这些金属中，起决定性作用（如导电性、成键）的是 <strong>4s 电子</strong>，而不是深埋的 3d¹⁰ 电子。</li>
<li>虽然 d¹⁰ 能带的位置不完美，但这个“小错误”对<strong>晶格常数、体模量、费米面形状</strong>等关键物理性质的<strong>影响很小</strong>。</li>
<li>标准 PBE 已经能很好地描述这些金属的宏观性质，强行加 U 反而可能需要复杂的调参，甚至可能破坏原有的平衡。</li>
</ul>
</li>
</ul>
<p><strong>结论：对于 3d¹⁰ 的金属单质，标准 PBE 计算通常被认为是“足够好”的基准。只有当你特别关心 d 带的精确位置（例如，用于模拟光电子能谱 XAS&#x2F;XPS）或研究 d 带参与的精细化学过程（如表面催化）时，才需要考虑加 U 或使用更高级的泛函。</strong></p>
<hr>
<p>以 Ni（更典型的例子是 NiO）和 Zn（更典型的例子是 ZnO）来对比：</p>
<ul>
<li><strong>NiO (Ni²⁺, 3d⁸):</strong> 3d 电子<strong>未占满</strong>。</li>
<li><strong>ZnO (Zn²⁺, 3d¹⁰):</strong> 3d 电子<strong>已占满</strong>。</li>
</ul>
<h3 id="核心区别：定性错误-vs-定量错误"><a href="#核心区别：定性错误-vs-定量错误" class="headerlink" title="核心区别：定性错误 vs. 定量错误"></a>核心区别：定性错误 vs. 定量错误</h3><ol>
<li><strong>NiO (d⁸, 未满): PBE 犯了“定性错误”</strong><ul>
<li><strong>物理现实：</strong> NiO 是一个典型的<strong>莫特绝缘体 (Mott Insulator)<strong>。它的 d 电子由于强烈的在位库仑排斥（U）而高度</strong>局域化</strong>，导致其成为宽带隙绝缘体（实验带隙约 4.0 eV）。</li>
<li><strong>PBE 的计算结果：</strong> PBE (不加U) 无法处理这种强关联。它错误地将 d 电子描述为“巡游”的，导致能带重叠，<strong>错误地预测 NiO 是一个金属（没有带隙）</strong>。</li>
<li><strong>加 U 的目的 (LDA+U)：</strong> 在这里，U 是用来<strong>“惩罚”</strong>电子的巡游行为，**强迫 d 电子局域化**。这个 U 在自旋向上和自旋向下的能带之间<strong>“打开”了一个能隙</strong>（Mott-Hubbard 隙）。</li>
<li><strong>总结：</strong> 加 U 是为了<strong>修正一个定性的、0 vs. 1 的错误</strong>（金属 vs. 绝缘体）。</li>
</ul>
</li>
<li><strong>ZnO (d¹⁰, 全满): PBE 犯了“定量错误”</strong><ul>
<li><strong>物理现实：</strong> ZnO 是一个常规的**带状绝缘体 (Band Insulator)**。它的 3d¹⁰ 轨道全满，深埋在价带（O 2p）之下。实验带隙约 3.4 eV。</li>
<li><strong>PBE 的计算结果：</strong> PBE (不加U) <strong>正确地预测 ZnO 是一个绝缘体</strong>（因为 d 壳层全满了，它天然有带隙）。但是，PBE 的自相互作用误差导致 d¹⁰ 能带的<strong>能量位置算错了</strong>（算得太高），并与 O 2p 轨道产生了过度的虚假杂化，最终导致<strong>带隙被严重低估</strong>（算出来仅 0.8 eV 左右）。</li>
<li><strong>加 U 的目的 (LDA+U)：</strong> 在这里，d 电子已经是“局域”的（它们在全满的壳层里）。加 U 的目的<strong>不是</strong>为了打开能隙（能隙本来就有），而是为了<strong>“修正”d¹⁰ 能带的能量位置</strong>。U 将 d¹⁰ 能带推向更深的束缚能，解除了与 O 2p 的虚假杂化，从而<strong>“修正”了带隙大小</strong>，使其更接近实验值。</li>
<li><strong>总结：</strong> 加 U 是为了<strong>修正一个定量的错误</strong>（带隙 0.8 eV vs. 3.4 eV）</li>
</ul>
</li>
</ol>
<hr>
<p><strong>ZnO 中当然有 d 电子的库仑排斥作用，而且非常强。</strong></p>
<p>您的物理直觉是完全正确的。d 轨道的局域性是它的“本性”，这与它是否满占据无关。Zn 3d 轨道和 Ni 3d 轨道在空间上都是非常局域的，因此电子“挤”在同一个原子上的库仑排斥（U）都非常大。</p>
<p>那么，为什么我们在讨论 NiO 和 ZnO 时，对 U 的描述听起来如此不同呢？</p>
<p>关键区别在于：<strong>这个强大的“U”在 d 壳层“未满”和“全满”时，所导致的“物理后果”不同，因此我们使用 DFT+U 去“修正”的目标也不同。</strong></p>
<hr>
<h3 id="1-NiO-d⁸-未满-U-决定了“能不能动”-局域化"><a href="#1-NiO-d⁸-未满-U-决定了“能不能动”-局域化" class="headerlink" title="1. NiO (d⁸, 未满): U 决定了“能不能动” (局域化)"></a>1. NiO (d⁸, 未满): U 决定了“能不能动” (局域化)</h3><ul>
<li><strong>物理情景：</strong><ul>
<li>Ni²⁺ 的 d 壳层未满 (d⁸)，这意味着 d 轨道上<strong>既有电子，也有空位</strong>。</li>
<li>理论上，一个 Ni 上的 d 电子可以“跳” (hopping) 到邻近 Ni 的 d 空位上，从而在晶体中巡游，形成能带，使材料导电（成为金属）。</li>
<li><strong>但是，U 登场了。</strong></li>
<li>这个“U”就是指当一个电子“跳”到邻近 Ni 上时，它必须与那个 Ni 上已有的 d 电子“共处一室”。这个新来的电子会受到其他 8 个电子的<strong>巨大库仑排斥</strong>。</li>
<li>这个能量代价（U）是如此之大，以至于电子“跳”不起来。</li>
</ul>
</li>
<li><strong>后果：</strong><ul>
<li>电子为了避免这个高昂的 U 代价，选择“放弃巡游”，<strong>老实地“局域”在自己的原子上</strong>。</li>
<li>这种由 U 引起的局域化，阻止了电子运动，从而在能带图上<strong>打开了一个能隙</strong>。这就是**莫特绝缘体 (Mott Insulator)**。</li>
</ul>
</li>
<li><strong>PBE 的问题：</strong> PBE 低估了这个 U，错误地认为电子可以“跳”，所以算出来是金属。</li>
<li><strong>加 U 的目的：</strong> <strong>模拟这种局域化行为</strong>，强行“打开”这个Mott能隙。</li>
</ul>
<hr>
<h3 id="2-ZnO-d¹⁰-全满-U-决定了“有多深”-能级位置"><a href="#2-ZnO-d¹⁰-全满-U-决定了“有多深”-能级位置" class="headerlink" title="2. ZnO (d¹⁰, 全满): U 决定了“有多深” (能级位置)"></a>2. ZnO (d¹⁰, 全满): U 决定了“有多深” (能级位置)</h3><ul>
<li><strong>物理情景：</strong><ul>
<li>Zn²⁺ 的 d 壳层<strong>已经全满了</strong> (d¹⁰)。</li>
<li><strong>关键点：</strong> 因为壳层全满了，d 电子<strong>没有空位可跳</strong>。它们天然就<strong>不能</strong>在 d 轨道之间巡游。它们<strong>本来就是局域化</strong>的。</li>
<li>所以，U 在这里<strong>不再扮演“阻止跳跃”的角色</strong>。</li>
<li><strong>但是，U 依然存在。</strong></li>
<li>这 10 个 d 电子之间强烈的内部库仑排斥（U），<strong>决定了这套 d¹⁰ 能带的绝对能量位置</strong>。</li>
</ul>
</li>
<li><strong>后果：</strong><ul>
<li>这套 d¹⁰ 能带是满的，它不是导带也不是价带，而是深埋在价带（O 2p）之下的“半芯态”。</li>
<li>U 决定了这套 d¹⁰ 能带<strong>应该“埋”得多深</strong>。</li>
</ul>
</li>
<li><strong>PBE 的问题：</strong> PBE 的自相互作用误差<strong>错误地估计</strong>了这套 d¹⁰ 能带的能量位置。它把这套 d¹⁰ 能带算得<strong>“太浅”了</strong>（能量过高，过于接近 O 2p 价带）。</li>
<li><strong>加 U 的目的：</strong><ul>
<li><strong>不是</strong>为了打开能隙（d 壳层全满，本身就不导电）。</li>
<li>而是为了<strong>“修正能级”</strong>。</li>
<li>加 U 之后，PBE 被迫承认 d 电子有更强的排斥，其效果是将这套 d¹⁰ 能带<strong>“推”回到更深、更物理的能量位置</strong>。</li>
<li>这消除了 d¹⁰ 能带与 O 2p 价带的虚假杂化，从而修正了价带顶的位置，最终<strong>修正了带隙大小</strong>。</li>
</ul>
</li>
</ul>
<hr>
<p>但是Zr4+的3d电子是满的，那3d电子的库伦相互作用也很大，为什么不用考虑呢</p>
<p>您提出了一个非常敏锐且关键的物理问题！您的观察是正确的，这个问题的答案是区分“芯电子”和“价电子”的关键。</p>
<p><strong>您的观察：Zr⁴⁺ (和 Zr 原子) 的 3d 电子确实是满的 (3d¹⁰)。</strong> <strong>您的问题：为什么这个 3d¹⁰ 不需要加 U，而 Zn 的 3d¹⁰ 却需要？</strong></p>
<p><strong>答案是：因为 Zr 的 3d¹⁰ 是一个深能级的“芯能级” (Core Level)，而 Zn 的 3d¹⁰ 是一个浅能级的“价能级” (Valence Level) 或“半芯能级” (Semi-core Level)。</strong></p>
<p>这个能量位置的巨大差异，导致了它们在计算中截然不同的处理方式。</p>
<hr>
<h3 id="1-能量位置的巨大差异-物理现实"><a href="#1-能量位置的巨大差异-物理现实" class="headerlink" title="1. 能量位置的巨大差异 (物理现实)"></a>1. 能量位置的巨大差异 (物理现实)</h3><ul>
<li><strong>Zn (3d¹⁰) 在 ZnO 中：</strong><ul>
<li>Zn 3d¹⁰ 能带的能量<strong>非常浅</strong>。</li>
<li>它位于 O 2p 价带的<strong>正下方</strong>（束缚能大约在 -7 到 -10 eV，非常接近价带顶 VBM）。</li>
<li><strong>后果：</strong> 正是因为它离价带太近，PBE 算错它的位置（算得太高）时，它就会<strong>严重地</strong>与 O 2p 轨道发生虚假杂化，从而“污染”价带顶，导致带隙计算错误。</li>
</ul>
</li>
<li><strong>Zr (3d¹⁰) 在 ZrO₂ 中：</strong><ul>
<li>Zr 3d¹⁰ 能带的能量<strong>极其深</strong>。</li>
<li>它位于 O 2p 价带下方<strong>几百电子伏特 (eV)</strong> 的地方。（实验上，Zr 3d 的束缚能大约在 <strong>-180 eV</strong> 附近）。</li>
<li><strong>后果：</strong> 这个能级<strong>离价带（约 0 eV）和导带（约 5-6 eV）太远了</strong>。PBE 就算算错了它的位置（比如算成了 -175 eV 或 -185 eV），这个“错误”也<strong>毫无意义</strong>，因为它<strong>绝对不会</strong>与 O 2p 价带或 Zr 4d 导带发生任何杂化。</li>
</ul>
</li>
</ul>
<p><strong>总结：</strong> 我们为 Zn 3d 加 U，是因为它是一个<strong>“惹是生非”</strong>的浅能级，其位置错误会严重影响我们关心的带隙。 我们不为 Zr 3d 加 U，是因为它是一个<strong>“与世隔绝”</strong>的深能级，无论它在哪里，都不会影响我们关心的带隙。</p>
<hr>
<h3 id="2-VASP-赝势的处理-计算现实"><a href="#2-VASP-赝势的处理-计算现实" class="headerlink" title="2. VASP 赝势的处理 (计算现实)"></a>2. VASP 赝势的处理 (计算现实)</h3><p>基于上述的物理现实，VASP（以及所有赝势方法）在实际计算中会做如下处理：</p>
<ul>
<li><strong>赝势 (Pseudopotential)</strong> 的基本思想就是：只显式计算“价电子”，而把“芯电子”冻结在原子核周围，用一个势来等效替代。</li>
<li><strong>对于 Zn (锌)：</strong><ul>
<li>因为 3d¹⁰ 轨道能量很浅，<strong>会</strong>参与化学成键（或至少会干扰成键），所以它<strong>必须被当作“价电子”</strong>来显式计算。</li>
<li>因此，VASP 的 Zn 赝势（如 <code>Zn_pv</code> 或 <code>Zn</code>）会将 3d 和 4s 电子（共 12 个电子）都当作价电子。</li>
<li><strong>既然 3d 被显式计算了，你就有机会 (也需要) 对它加 U。</strong></li>
</ul>
</li>
<li><strong>对于 Zr (锆)：</strong><ul>
<li>因为 3d¹⁰ 轨道能量非常深，是典型的芯电子，<strong>不</strong>参与化学成键。</li>
<li>VASP 的 Zr 赝势（如 <code>Zr_sv</code>）会将 1s, 2s, 2p, <strong>3s, 3p, 3d</strong> 轨道<strong>全部“冻结”在芯能级里</strong>，根本不显式计算它们。</li>
<li>VASP 显式计算的“价电子”是 4s, 4p, 5s, 4d。</li>
<li><strong>既然 Zr 3d 轨道从一开始就没被 VASP 算，你根本没有机会（也完全不需要）对它加 U。</strong></li>
</ul>
</li>
</ul>
<p><strong>一句话总结：</strong></p>
<p>我们只对那些<strong>被 VASP 当作“价电子”来显式计算、且能量位置接近费米面（价带）的 d&#x2F;f 轨道</strong>考虑加 U。Zr 的 3d 是深芯电子，不在此列。</p>
<hr>
<h3 id="重要"><a href="#重要" class="headerlink" title="重要"></a>重要</h3><ul>
<li>过渡金属元素需要加磁性ISPIN&#x3D;2（可以不设置磁矩让它自己去优化磁矩），且算法不能为davision(normal)，应该换成RMM(fast&#x2F;veryfast)，否则会电子步不收敛。可以不用加U，因为U是一个经验值，和实验来对的</li>
</ul>
<p>加U无助于电子步收敛，加自旋有助于电子步收敛</p>
<blockquote>
<p>可以都加上ISPIN&#x3D;2 让它自动的去优化磁矩。 <code>grep magnetization OUTCAR </code>可以查看磁矩</p>
</blockquote>
<ul>
<li><p>关于结构优化中U和磁性</p>
<p>结构优化是根据能量进行结构的优化，使得能量向减小的方向演化，可能没有加U的能量不对，但是这和结构优化不收敛是不相干的。结构优化不收敛就是算法的问题。磁性还是有必要加的</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/349419162#:~:text=02">DFT+U理论及“一步”完成DFT+U多步计算 - 知乎 (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/502440652#:~:text=DFT%2BU%E7%90%86%E8%AE%BA">带你解读DFT+U计算，如何加U - 知乎 (zhihu.com)</a></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20240131093236149.png" alt="image-20240131093236149"></p>
<hr>
<h3 id="重要-1"><a href="#重要-1" class="headerlink" title="重要"></a>重要</h3><h3 id="关于LASPH和LMAXMIX"><a href="#关于LASPH和LMAXMIX" class="headerlink" title="关于LASPH和LMAXMIX"></a>关于LASPH和LMAXMIX</h3><p>vasp 4.6只计算PAW球内球形电子云的贡献，当轨道包括d，f等非球形电子云时，通过设置LASPH &#x3D; True，可以考虑非球形电子云的贡献。</p>
<p>此外，当使用高级泛函 如 DFT + U，杂化泛函等时，考虑非球形电子云也能够计算更加精确的电子结构和能量。</p>
<p>vasp默认是关闭LASPH的</p>
<hr>
<p>LMAXMIX控制直到哪个量子数范围内的PAW电荷密度会通过电荷密度混合器处理并写入CHGCAR文件。通常不需要增加LMAXMIX，但当进行DFT+U计算时，需要将LMAXMIX增加到4（对d电子体系）或6（对f电子体系）。对于DFT+U计算能带结构时，必须要提高LMAXMIX。考虑非共线磁性的自旋密度泛函理论(SDFT)时，需要考虑增加LMAXMIX</p>
<h2 id="13-磁性"><a href="#13-磁性" class="headerlink" title="13. 磁性"></a>13. 磁性</h2><p>通常磁矩是通过查看未成对电子数量来设置的，同时也要看轨道，对于弥散的轨道（s p)，即便有未配对电子，电子的取向仍是随机的，而不是规则排序的。每个未成对电子对应最大磁矩为1</p>
<p>需要设置LORBIT &#x3D; 11 然后在vasp的OSZICAR中，可以查看最终的总磁矩，在OUTCAR中，关键词mag可以查看分原子的磁矩。</p>
<p>磁矩通常是从上向下优化的，可以设置一个比较大的初始磁矩，让它从上向下优化</p>
<p>在一个磁性原子周围，可能会存在原本非磁性原子带有一些磁性的现象，这在计算中可以观察到</p>
<hr>
<p>材料的磁性对应的微观电子结构为<strong>电子自旋的方向并不均匀分布</strong>。</p>
<p>绝大多数的磁性材料计算中，电子的自旋只会平行排列（磁各向同性，是共线磁矩 </p>
<p>不考虑自旋的占据态能级自旋向上的能级和向下的能级相同，由同一个能级表示。</p>
<p>考虑共线磁矩时，自旋向上和自旋向下的能级分别输出，每个能级的电子占据数为1，共同计算费米能级。</p>
<p>由于自旋上和下能级大小不同，如果费米能级以下的不同自旋指标的能级数量不同，将导致体系整体出现磁矩。</p>
<p>对于反铁磁的情况，体系的磁密度呈现整体无磁矩，局部有磁矩的情况。</p>
<p>非共线磁矩</p>
<p>有的体系中，电子的自旋会沿不同方向排列（磁各向异性），这时磁密度通过x y z三个方向的投影表示</p>
<hr>
<p><code>Davidson</code> 算法对于磁性材料（ISPIN&#x3D;2)有可能无法收敛，这时候解决的办法是更换电子算法为RMM （veryfast)，或者手动设置磁矩 <code>MAGMOM</code></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20250726104944063.png" alt="image-20250726104944063"></p>
<h2 id="14-如何设置参数加快计算速度"><a href="#14-如何设置参数加快计算速度" class="headerlink" title="14. 如何设置参数加快计算速度"></a>14. 如何设置参数加快计算速度</h2><ol>
<li>注意kpar 和ncore的设置，**在计算带时不要跨节点计算!**（总核数&#x2F;kpar&#x2F;ncore 应该是节点数量的整数除数) </li>
<li>LREAL 打开</li>
<li>减小KSPACING 和ENCUT</li>
</ol>
<h2 id="15-关于vasp的输出中的free-energy-TOTEN-和energy-without-entropy-和-sigma-0"><a href="#15-关于vasp的输出中的free-energy-TOTEN-和energy-without-entropy-和-sigma-0" class="headerlink" title="15. 关于vasp的输出中的free energy TOTEN 和energy without entropy 和 sigma &gt;&gt;0"></a>15. 关于vasp的输出中的free energy TOTEN 和energy without entropy 和 sigma &gt;&gt;0</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.sina.com.cn/s/blog_17589e0920102xkp0.html">Vasp输出的几种energy_郝玲娟xueer_新浪博客 (sina.com.cn)</a></p>
</blockquote>
<p>在没有展宽时，（ismear &#x3D; -5） 自由能和without能量是一致的，TOTEN和without的差异是展宽导致的</p>
<pre><code>For the calculation of the total energy in bulk materials, we recommend the tetrahedron method with Blöchl corrections (ISMEAR=-5). This method also gives a good account of the electronic density of states (DOS). The only drawback is that the method is not variational with respect to the partial occupancies. Therefore the calculated forces and the stress tensor can be wrong by up to 5 to 10% for metals. Only for semiconductors and insulators, the forces are correct because the partial occupancies do not vary and are either zero or one. 
</code></pre>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20240918102339891.png" alt="image-20240918102339891"></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20240918102358653.png" alt="image-20240918102358653"></p>
<h2 id="12-计算声子谱"><a href="#12-计算声子谱" class="headerlink" title="12. 计算声子谱"></a>12. 计算声子谱</h2><p>一个技巧是可以用SPOSCAR做自洽算出CHGCAR和WAVECAR，用作其他微小位移的结构的初猜CHGCAR，在对微小位移结构做自洽时，需要设置ICHARG &#x3D; 1 （读取但是会迭代）不能用ICHARG &#x3D; 11 （读取后保持稳定不迭代）</p>
<h3 id="1-有限位移法-phonopy"><a href="#1-有限位移法-phonopy" class="headerlink" title="1. 有限位移法  phonopy"></a>1. 有限位移法  phonopy</h3><ul>
<li><p>生成超胞，自动搜索原胞</p>
<pre><code>phonopy -d --dim 2 2 3 --pa auto  
</code></pre>
</li>
<li><p>生成力常数矩阵</p>
<pre><code>phonopy -f disp-&#123;001..003&#125;/vasprun.xml
</code></pre>
</li>
<li><p>计算dos，绘制pdos</p>
</li>
</ul>
<pre><code>  phonopy-load --mesh 20 20 20 -p
</code></pre>
<pre><code>   phonopy-pdosplot -i &#39;1 2 4 5, 3 6&#39; -o &#39;pdos.pdf&#39; partial_dos.dat
</code></pre>
<ul>
<li><p>计算声子谱，得到band.yaml文件</p>
<pre><code>phonopy-load --band auto -p
</code></pre>
</li>
<li><p>绘制声子谱</p>
<pre><code class="python">phonopy-bandplot band.yaml -o band.jpg
</code></pre>
</li>
<li><p>得到band.dat文件（可以直接用下面的python 脚本，更准确）</p>
<pre><code>phonopy-bandplot --gnuplot band.yaml &gt;&gt; band.dat
</code></pre>
</li>
</ul>
<h3 id="2-绘制声子谱python脚本"><a href="#2-绘制声子谱python脚本" class="headerlink" title="2. 绘制声子谱python脚本"></a>2. 绘制声子谱python脚本</h3><pre><code class="python">#处理band.yaml
#要求每一个路径的k点个数都相同,最好和phonopy官方的图对比一下
import yaml
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.font_manager as fm


# --- 1. 加载 band.yaml 文件 ---
with open(&#39;band.yaml&#39;, &#39;r&#39;) as f:
    data = yaml.safe_load(f)

# --- 2. 提取数据 ---
nqpoint = data[&#39;nqpoint&#39;]
nband = data[&#39;natom&#39;] * 3
segments_nq = data[&#39;segment_nqpoint&#39;]
for i in range(1, len(segments_nq)): 
        if segments_nq[i] != segments_nq[0]:
            print(&#39;Warning: 检测到不一致元素，需要修改脚本&#39;)
labels_list = data[&quot;labels&quot;]



# 提取距离、频率和高对称点标签
distances = []
frequencies = []



for q_point in data[&#39;phonon&#39;]:
    distances.append(q_point[&#39;distance&#39;])
    frequencies.append([band[&#39;frequency&#39;] for band in q_point[&#39;band&#39;]])


distances = np.array(distances)
frequencies = np.array(frequencies)

# --- 3. 保存为数据文件
output_data = np.hstack((distances.reshape(-1, 1), frequencies))

# 保存为 band_py.dat，格式为：距离 Freq1 Freq2 Freq3 ...
np.savetxt(
    &#39;band.dat&#39;,
    output_data,
    fmt=&#39;%.8f&#39;,
    header=&#39;Distance Frequencies(THz)...&#39;
)

print(&quot;数据已成功提取并保存到 band_py.dat&quot;)
# print(&quot;高对称点位置:&quot;, labels)

n_path = len(labels_list)
n_points = nqpoint
n_per_path = n_points // n_path 
# print(n_per_path)

gap_width = 0.02  
x_prev = 0.0    
new_distances = []
new_frequencies = []
xticks = []
xticklabels = []


&quot;&quot;&quot;
合并YAML格式的标签对，当相邻标签对满足前一个末端与后一个初段相同时合并
&quot;&quot;&quot;    
merged_labels = [labels_list[0]]
segments_nq_new = [segments_nq[0]]
for i in range(1, len(labels_list)):
    current = merged_labels[-1]
    next_label = labels_list[i]
    if current[-1] == next_label[0]:
        merged_labels[-1] = current + next_label[1:]
        segments_nq_new[-1] += segments_nq[i] 
    else:
        merged_labels.append(next_label)
        segments_nq_new.append(segments_nq[i])

if len(segments_nq_new) != len(merged_labels):
    print(&#39;长度不匹配，有问题&#39;)
new_xticks = []
for i, label_path in enumerate(merged_labels):
    start_idx = sum(segments_nq_new[:i])
    end_idx = start_idx + segments_nq_new[i]
    seg_dist = distances[start_idx:end_idx]
    seg_freq = frequencies[start_idx:end_idx]
    num_nodes = len(label_path)
    points_per_subsegment = len(seg_dist) // (num_nodes - 1)
    if i == 0:
        seg_dist_shifted = seg_dist  # 第一段无前置间隙
    else:
        seg_dist_shifted = seg_dist - seg_dist[0] + x_prev + gap_width  # 加间隙
    new_xticks.append(seg_dist_shifted[0])
    new_xticks.append(seg_dist_shifted[-1])
    new_distances.append(seg_dist_shifted)
    new_frequencies.append(seg_freq)
    
    # 记录高对称点位置和标签（保留间隙时，符号会重复显示）
    # print(label_path)
    for j in range(num_nodes):
        if j == 0:
            xticks.append(seg_dist_shifted[0])
        else:
            xticks.append(seg_dist_shifted[-1+ (j * points_per_subsegment)])
        xticklabels.append(label_path[j])
    
    # 更新上一段末尾位置（含当前段长度 + 间隙）
    x_prev = seg_dist_shifted[-1]

# print(xticklabels)
# print(xticks)


font_path = &#39;/usr/share/fonts/truetype/msttcorefonts/Times_New_Roman.ttf&#39;
font_path_bold = &#39;/usr/share/fonts/truetype/msttcorefonts/Times_New_Roman_Bold.ttf&#39;
fm.fontManager.addfont(font_path)
fm.fontManager.addfont(font_path_bold)
plt.rcParams[&#39;font.family&#39;] = &#39;Times New Roman&#39;
plt.rcParams[&#39;axes.linewidth&#39;] = 2

font_bold_prop = fm.FontProperties(family=&#39;Times New Roman&#39;, weight=&#39;bold&#39;)

plt.rcParams.update(&#123;
    &#39;mathtext.fontset&#39;: &#39;custom&#39;,
    &#39;mathtext.rm&#39;: &#39;Times New Roman&#39;,
    &#39;mathtext.bf&#39;: &#39;Times New Roman:bold&#39;,
    &#39;font.family&#39;: &#39;Times New Roman&#39;,
    &#39;font.weight&#39;: &#39;bold&#39;,
    &#39;axes.labelweight&#39;: &#39;bold&#39;, 
&#125;)


fig = plt.figure(figsize=(8,6),dpi = 300)
# fig.subplots_adjust(left=0.2, right=0.8, top=0.8, bottom=0.2)
grid = fig.add_gridspec(1,1)
ax = fig.add_subplot(grid[0,0])


# print(len(new_distances))
for d, f in zip(new_distances, new_frequencies):
    f = np.array(f)
    for band in f.T:
        ax.plot(d, band, color=&#39;red&#39;, linewidth=2)
        ax.hlines(y=0, xmin=np.min(d), xmax=np.max(d), color=&#39;gray&#39;, linewidth=2, linestyle=&#39;:&#39;)

for tick in new_xticks:
    plt.axvline(x=tick, color=&#39;black&#39;, linewidth=2, linestyle=&#39;-&#39;)


ax.set_ylabel(r&quot;Frequency (THz)&quot;, fontsize = 35,fontname=&#39;Times New Roman&#39;,fontweight=&quot;bold&quot;)

xmin = min(arr.min() for arr in new_distances)
xmax = max(arr.max() for arr in new_distances)
ax.set_xlim(xmin, xmax)

ax.tick_params(
        axis=&#39;x&#39;,
        which=&#39;both&#39;,
        top=False,
        bottom = True,
        labelbottom = True,
        labeltop=False,  
        width=2
    )
ax.tick_params(
        axis=&#39;y&#39;,
        which=&#39;both&#39;,
        right=False,
        left = True,
        labelright=False,
        labelleft = True,
        width=2
    )

plt.yticks(fontsize = 25,fontname = &quot;Times New Roman&quot;,fontweight = &#39;bold&#39;)
ax.set_xticks(xticks)
ax.set_xticklabels(xticklabels,
                  fontsize=25,
                  fontname = &quot;Times New Roman&quot;,
                  fontweight = &#39;bold&#39;)



plt.tight_layout()

plt.savefig(&#39;phonon_band_structure.png&#39;)
</code></pre>
<h1 id="2-关于并行参数"><a href="#2-关于并行参数" class="headerlink" title="2. 关于并行参数"></a>2. 关于并行参数</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/485153538">vasp并行参数设置 - 知乎 (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://scc.ustc.edu.cn/zlsc/jsrj/201810/W020181016364157753668.pdf">VASP应用运行优化 (ustc.edu.cn)</a></p>
<p>&#x3D;&#x3D;解释&#x3D;&#x3D;</p>
<p>第一性原理的计算过程是计算一个体系的不同k点上许多不同的电子态，不同的电子态也称为带&#x2F;band，每个k点有很多要计算的带</p>
<p>假设一个场景，用一个cpu核计算一个体系，那么这个体系会先计算这个体系的第一个k点的第一个带，再计算第一个k点的第二个带，依次往后，计算第二个k点的第一个带。。。</p>
<p>并行指的是用多个cpu核同时计算多个任务。对一个计算而言，可以分为带并行和k点并行，也就是同时跑多少个k点，同时跑一个k点的多少个带。设置不同的并行参数，会分配给每个k点，每个k点的不同带cpu核心数。这两个并行并不是平行的，先对k点并行，然后给一个k点的带分配核数。</p>
<p>KPOINT 并行属于外层的并行，BAND 并行属于较内层的并行</p>
<p>比如一共有48核，一个k点要算的带数目为4，如果设置k点并行为6，带并行为4，那么就是同时计算6个k点，每个k点用48&#x2F;6&#x3D;8个核心来计算，同时计算一个k点的4个带，每个k点的每个带用2个核心计算。</p>
<p>如果一个k点要算的带数目一共只有3个呢，（当然最好设置带并行为3），假设设置带并行为2（设置为4会有一些核不进行计算），那么单个k点用48&#x2F;6&#x3D;8个核心，每个带用4个核心，同时计算2个带，但是这时候，会有一个带没有计算，在计算完一个带后，才会计算另一个k点，此时还会有一批cpu空下来，因此如果k点并行不设置为k点数目的除数，会出现空余的现象。 k点并行也一样，如果k点并行设置的太大，那么可能会有多的核数用不到</p>
<p>实际中应该把带并行和k点并行分开来看</p>
<p>一个重要的知识点</p>
<p>k点的并行优点是不需要通讯，因为没有数据的分发，缺点是要耗费内存。内存比较大的系统可以设置k点并行。</p>
<p>带的并行是把数据分发到不同的带上，这样的优点是耗费的内存少，缺点是不同带间需要通讯。当通讯带宽比较大的时候，可以把带的数目设置大一点，这样即便设置多个带并行通讯效率也不会太差；但是通讯带宽比较小时，不要设置同时并行太多带， 因为会大大增加带的通讯。</p>
<p>&#x3D;&#x3D;cpu核数从哪里来？&#x3D;&#x3D;</p>
<p>增加cpu的核数可以从两方面，一个是节点内并行，一个是多节点的并行。</p>
<p>节点内的并行相比节点间肯定是降低了通讯的时间的，但是有时候很难在一个节点内得到足够多的核心数，所以需要多个节点来串联计算。但是在设置并行参数时需要考虑的是尽量让k点和带的计算不要跨节点，比如给一个带分配50个核，但是一个节点只有48个核心，那么就需要去别的节点借来两个核心，由于节点间有通讯，这样会大大降低计算速度。不同节点的cpu核心串联时是依次串联的，因此可以先用第一个节点的，再用后面的。</p>
<p>也就是尽量保持节点间的独立性。</p>
<p>&#x3D;&#x3D;vasp中的并行参数&#x3D;&#x3D;</p>
<p>vasp中用KPAR来控制k点的并行，也就是一次计算多少个k点</p>
<p>KPAR默认为1，也就是并行计算一个k点，使用所有的核</p>
<p>vasp中用NPAR来控制带的并行，也就是每个k点同时计算多少条带  </p>
<p>NPAR默认值为核的数量，比如有48核，NPAR默认为48，也就是同时计算48个带，每个带用1个核心计算，这一个核心计算完这一系列带再计算其他的带，其他的k点。</p>
<p>如果只设置NPAR，那么默认KPAR为1，NCORE&#x3D;cpus&#x2F;NPAR</p>
<p>带并行会把数据按照带来分发，这样需要增加不同带之间的通讯，当通讯带宽比较大的时候，可以把带的数目设置大一点，但是通讯带宽比较小时，不要设置同时并行太多带， 因为会大大增加带的通讯。</p>
<p>vasp中用NCORE来控制计算一个带的核心的数量（等同于NPAR的效果。  cpus&#x2F;NCORE&#x3D;NPAR)</p>
<p>NCORE 默认值为1 (与NPAR的默认值为所有的核数相对应，NCORE*NPAR的默认值为总核数)</p>
<p>&#x3D;&#x3D;KPAR×NPAR×NCORE &#x3D; cpus&#x3D;&#x3D;</p>
<p>设置技巧</p>
<blockquote>
<p>KPAR控制k点并行，这个参数应该设置为k点的除数，（不一定是k点本身的数目，这样就是同时算一个带的所有k点）</p>
<p>节点内并行要快于节点间的并行，因此尽量保证计算过程中一个节点计算整数条带，比如设置NCORE的值为一个节点的cpu核数，或者它的除数，这样保证一条带只在一个节点上计算</p>
<p> The best value NCORE depends somewhat on the number of atoms in the unit cell. Values around 4 are usually ideal for 100 atoms in the unit cell. For very large unit cells (more than 400 atoms) values around 12-16 are often optimal. If you run extensive simulations for similar systems, make your own tests.</p>
<p>让KPAR、NPAR、NCORE三个数比较相近</p>
<h3 id="小体系并行"><a href="#小体系并行" class="headerlink" title="小体系并行"></a>小体系并行</h3><p>小体系的特点是原子数少, K点较多, 能带少. 因此KPAR应尽可能设大, NPAR可设为1.</p>
<p>在中等规模的系统(20-100 个原子)中，情况会有所不同。此时，计算的不可约k 点的数量很少（5-50），而电子能带的数量会很大(&gt;100).</p>
<ul>
<li>尽可能将 k 点并行化驱动到最大值（KPAR 尽可能大）。这里的限制因素是实际的 k 点数和可用的内存量。后者是因为更高的 KPAR 值会导致更高的内存需求。[<a href="https://link.zhihu.com/?target=https://dannyvanpoucke.be/2016/12/%23_ftn2">2]</a></li>
<li>使用 Gamma 版本的 VASP 仅用于 Γ 点计算。它显着降低了内存使用量（3.7Gb→ 2.8Gb&#x2F;core 用于 512 原子金刚石系统）并提高了计算效率，有时甚至提高了 2 倍。</li>
<li>NPAR 并行化可用于减少高 KPAR 计算的内存负载，但就计算效率而言, 增加 KPAR 优于增加 NPAR。</li>
<li>如果只有 NPAR 并行化可用，由于 k 点太少，并且使用大型系统，NPAR 并行化也很重要。</li>
</ul>
<p><strong>K 点并行很重要！如果要大量计算类似结构, 如长时间的MD等, 应该在计算前简单测算选取最优的KPAR&#x2F;NPAR(NCORE)参数.</strong></p>
<p>NCORE 与 NPAR 只 能指定一个有效</p>
<p>NCORE &#x3D; 8 下的运行时间经常处于最优值，且基本处于 [4,16] 空间范围内。</p>
</blockquote>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20231214094205234.png" alt="image-20231214094205234"></p>
<h1 id="3-关于K点"><a href="#3-关于K点" class="headerlink" title="3. 关于K点"></a>3. 关于K点</h1><p>K-points里面的设置就是总共插入了多少个点，但是会由于对称性进行约化，得到的是不可约k点。比如 333出来14个k点，是因为约化了</p>
<p><a target="_blank" rel="noopener" href="http://bbs.keinsci.com/thread-13066-1-1.html">http://bbs.keinsci.com/thread-13066-1-1.html</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/397873103?utm_id=0">https://zhuanlan.zhihu.com/p/397873103?utm_id=0</a></p>
<h2 id="关于测试K点和kSPACING"><a href="#关于测试K点和kSPACING" class="headerlink" title="关于测试K点和kSPACING"></a>关于测试K点和kSPACING</h2><p>&#x3D;&#x3D;需要保证能量差小于1mev&#x2F;atom&#x3D;&#x3D;  </p>
<p>&#x3D;&#x3D;k点没有想象中那么大，ENCUT没有想象中那么小&#x3D;&#x3D;</p>
<p>先测ENCUT再测KSPACING</p>
<p>**金刚石测试结果(8 atoms) **PBE54</p>
<p>KSPACING &#x3D; 0.1</p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20240109150611877.png" alt="image-20240109150611877"></p>
<p>KSPACING &#x3D; 0.2</p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20240109151749175.png" alt="image-20240109151749175"></p>
<p>C的ENCUT&#x3D;400 eV  用900才可以（注意是*100） KSPACING&#x3D;0.1 2920 k点  KSPACING&#x3D;0.2 365k点已经够了 </p>
<p>PAW_PBE 0.2 (material project中使用的)</p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20240109160358474.png" alt="image-20240109160358474"></p>
<p>石墨测试(16atoms)</p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20240109150705858.png" alt="image-20240109150705858"></p>
<p>石墨的ENCUT需要用800 eV  ，但是KSPACING可以用0.2</p>
<h1 id="4-计算报错"><a href="#4-计算报错" class="headerlink" title="4.计算报错"></a>4.计算报错</h1><h3 id="试试ISYM-0"><a href="#试试ISYM-0" class="headerlink" title="试试ISYM &#x3D; 0"></a>试试ISYM &#x3D; 0</h3><h3 id="1-internal-ERROR-RSPHER-running-out-of-buffer"><a href="#1-internal-ERROR-RSPHER-running-out-of-buffer" class="headerlink" title="1. internal ERROR RSPHER:running out of buffer"></a>1. internal ERROR RSPHER:running out of buffer</h3><p><strong>Abort(1) on node 15 (rank 15 in comm 0): application called MPI_Abort(MPI_COMM_WORLD, 1) - process 15</strong><br> <strong>原因：buffer传输不够</strong></p>
<blockquote>
<p><strong>解决方法：<a target="_blank" rel="noopener" href="https://www.vasp.at/forum/viewtopic.php?t=2806&p=2809">https://www.vasp.at/forum/viewtopic.php?t=2806&amp;p=2809</a></strong><br><strong>​                  改nonlr.F，重新编译vasp</strong><br><strong>​                   search for the following lines in nonlr.F</strong><br><strong>IF (IRMAX &gt; NONLR_S%IRMAX) THEN</strong><br><strong>! IRMAX is the maximum global number, could be improved !!!!</strong><br>*<em>NONLR_S%IRMAX &#x3D;IRMAX <em>1.1<br>LREALLOCATE&#x3D;.TRUE.<br>ENDIF<br>IF( IRALLOC &gt; NONLR_S%IRALLOC) THEN<br>! more safety on parallel machines increase by 20 %<br>NONLR_S%IRALLOC &#x3D;IRALLOC</em>1.2</em>*<br><strong>LREALLOCATE&#x3D;.TRUE.</strong><br><strong>ENDIF</strong><br><strong>and change</strong><br><strong>NONLR_S%IRALLOC &#x3D;IRALLOC<em>1.1 to<br>NONLR_S%IRALLOC &#x3D;IRALLOC</em>1.2</strong><br><strong>and</strong><br><strong>NONLR_S%IRALLOC &#x3D;IRALLOC<em>1.2 to<br>NONLR_S%IRALLOC &#x3D;IRALLOC</em>1.3</strong></p>
</blockquote>
<h3 id="2-报错-Error-EDDDAV-Call-to-ZHEGV-failed-Returncode"><a href="#2-报错-Error-EDDDAV-Call-to-ZHEGV-failed-Returncode" class="headerlink" title="2 . 报错 Error EDDDAV: Call to ZHEGV failed. Returncode &#x3D;"></a>2 . 报错 Error EDDDAV: Call to ZHEGV failed. Returncode &#x3D;</h3><blockquote>
<p>**1.NPAR **</p>
<p><strong>2.赝势</strong></p>
<p>**3.ALGO  **</p>
<p><strong>参见 <a target="_blank" rel="noopener" href="http://www.error.wiki/Error_EDDDAV:_Call_to_ZHEGV_failed%EF%BC%88%E5%9C%A8BN%E5%92%8CNSmSiO%E8%87%AA%E6%B4%BD%E4%B8%AD%E9%81%87%E5%88%B0%E8%BF%87%EF%BC%89">http://www.error.wiki/Error_EDDDAV:_Call_to_ZHEGV_failed（在BN和NSmSiO自洽中遇到过）</a></strong></p>
</blockquote>
<h3 id="3-报错-ERROR-FEXCP-supplied-Exchange-correletion-table-is-too-small-maximal-index"><a href="#3-报错-ERROR-FEXCP-supplied-Exchange-correletion-table-is-too-small-maximal-index" class="headerlink" title="3. 报错 ERROR FEXCP: supplied Exchange-correletion table is too small, maximal index :"></a>3. 报错 ERROR FEXCP: supplied Exchange-correletion table is too small, maximal index :</h3><blockquote>
<p><strong>编译器和vasp版本的冲突（编译的时候使用的是intel2018,使用时用intel2020会出现这样的问题），可能是POTCAR与vasp版本不兼容</strong><br><strong>vasp5.4-intel2020 vasp6.1-intel2018</strong><br><strong>一定要注意运行时使用的编译器版本和编译时使用的编译器版本相同（尤其是自己编译的）</strong></p>
</blockquote>
<h3 id="4-ERROR-FEXCP-supplied-Exchange-correletion-table-is-too-small-maximal-index-3885"><a href="#4-ERROR-FEXCP-supplied-Exchange-correletion-table-is-too-small-maximal-index-3885" class="headerlink" title="4. ERROR FEXCP: supplied Exchange-correletion table is too small, maximal index :        3885"></a>4. ERROR FEXCP: supplied Exchange-correletion table is too small, maximal index :        3885</h3><blockquote>
<p><strong>对称性的问题，设置ISYM &#x3D; 0</strong></p>
</blockquote>
<h3 id="5-Sub-Space-Matrix-is-not-hermitian"><a href="#5-Sub-Space-Matrix-is-not-hermitian" class="headerlink" title="5. Sub-Space-Matrix is not hermitian"></a>5. Sub-Space-Matrix is not hermitian</h3><p>​      我排查的问题是使用的节点太多了，减少使用的节点后可以运行</p>
<h3 id="6-HNFORM-ERROR-k-point-generating-vectors-and-reciprocal-lattice-are-incommensurate"><a href="#6-HNFORM-ERROR-k-point-generating-vectors-and-reciprocal-lattice-are-incommensurate" class="headerlink" title="6. HNFORM: ERROR: k-point generating vectors and reciprocal lattice   are incommensurate."></a>6. HNFORM: ERROR: k-point generating vectors and reciprocal lattice   are incommensurate.</h3><p>设置ISYM &#x3D; 0</p>
<h3 id="7-自洽不收敛"><a href="#7-自洽不收敛" class="headerlink" title="7.自洽不收敛"></a>7.自洽不收敛</h3><p>换电子算法</p>
<h3 id="8-内存溢出-BAD-TERMINATION-OF-ONE-OF-YOUR-APPLICATION-PROCESSES"><a href="#8-内存溢出-BAD-TERMINATION-OF-ONE-OF-YOUR-APPLICATION-PROCESSES" class="headerlink" title="8. 内存溢出&#x2F;BAD TERMINATION OF ONE OF YOUR APPLICATION PROCESSES"></a>8. 内存溢出&#x2F;BAD TERMINATION OF ONE OF YOUR APPLICATION PROCESSES</h3><p>  RANK 0 PID 45924 RUNNING AT comput45<br>  KILLED BY SIGNAL: 9 (Killed)</p>
<p>内存的问题，设置的k点太密</p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20240613095017005.png" alt="image-20240613095017005"></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20240613095302034.png" alt="image-20240613095302034"></p>
<h2 id="9-跑完第一个离子步报错-LAPACK-Routine-ZPOTRF-failed-INFO-1-KPOINT-1-SPIN-1"><a href="#9-跑完第一个离子步报错-LAPACK-Routine-ZPOTRF-failed-INFO-1-KPOINT-1-SPIN-1" class="headerlink" title="9. 跑完第一个离子步报错  LAPACK: Routine ZPOTRF failed! INFO:1 KPOINT:1 SPIN:1"></a>9. 跑完第一个离子步报错  LAPACK: Routine ZPOTRF failed! INFO:1 KPOINT:1 SPIN:1</h2><p><img src="/./../../%E5%9B%BE%E7%89%87/image-20240920094137844.png" alt="image-20240920094137844"></p>
<p>看看是不是在优化带真空层的结构，如果用了ISIF&#x3D;3 会因为塌陷真空层太快而报错，可以改用ISIF&#x3D;2或者ISIF&#x3D;3调低 POTIM 然后循环优化</p>
<h2 id="10-Intel-MKL-ERROR-parameter-5-was-incorrect-on-entry-to-DSTEIN2"><a href="#10-Intel-MKL-ERROR-parameter-5-was-incorrect-on-entry-to-DSTEIN2" class="headerlink" title="10. Intel MKL ERROR parameter 5 was incorrect on entry to DSTEIN2."></a>10. Intel MKL ERROR parameter 5 was incorrect on entry to DSTEIN2.</h2><p><img src="/./../../%E5%9B%BE%E7%89%87/image-20250120095148246.png" alt="image-20250120095148246"></p>
<p>修改ALGO从Normal到Fast可以了</p>
<h1 id="5-计算脚本"><a href="#5-计算脚本" class="headerlink" title="5.计算脚本"></a>5.计算脚本</h1><h2 id="1-变压优化"><a href="#1-变压优化" class="headerlink" title="1.变压优化"></a><strong>1.变压优化</strong></h2><pre><code class="shell">for p in 100 200 300 
#for i in $(seq 300 50 700)
do
cat &gt; INCAR &lt;&lt; lizhaohenshua
#cat 命令 查看文件的内容、连接文件、创建一个或多个文件和重定向输出到终端或文件 cat &gt;test;cat a b &gt; c; cat a; 
#cat 后跟输入之后进行标准输出
#&lt;&lt;EOF是定界标识符 终结字符串必须写在行首 &gt;是重写 &gt;&gt;是追加 
   SYSTEM=Li
   PREC = Accurate
   ENCUT = 600
   EDIFF = 1e-6
   IBRION = 2
   ISIF = 3
   NSW = 200
   ISMEAR = 0
   SIGMA =0.05
   POTIM = 0.2
   KSPACING = 0.18
   EDIFFG = -0.001
lizhaohenshuai
mpirun -np 48 vasp路径 &gt; vasp.log 2&gt;&amp;1``

cp CONTCAR CONTCAR_$p
cp OUTCAR OUTCAR _$p
done	
</code></pre>
<h1 id="6-tips"><a href="#6-tips" class="headerlink" title="6.tips"></a>6.tips</h1><ul>
<li><p><strong><code>OUTCAR</code>中的能量是晶格结构的能量，而OSZICAR中的能量E包括热浴和晶格结构的能量，<code>OZICAR</code>中的F是<code>OUTCAR</code>中的能量。按照经验来看，热浴的能量一直不平衡，但是系统的能量是平衡的。</strong></p>
</li>
<li><p><strong><code>KPOINTS</code>中，相同晶格常数应具有相同的k点密度，否则无法运行</strong></p>
</li>
<li><p><code>**vasp.log ! vasp.log! vasp.log!</code></p>
</li>
<li><p><strong>编译vasp：参考<a target="_blank" rel="noopener" href="http://hmli.ustc.edu.cn/doc/app/vasp.5.4.1-vtst.htm">http://hmli.ustc.edu.cn/doc/app/vasp.5.4.1-vtst.htm</a></strong></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zesuzesuzesu/article/details/120232558">VASP 6.1.0 + VTST + intel新OneAPI 安装编译_vasp vtst onapi-CSDN博客</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/Installing_VASP.6.X.X">Installing VASP.6.X.X - VASP Wiki</a>  可以多核并行来编译</p>
<ul>
<li><strong>vasp的文件在桌面&#x2F;vasp&#x2F;vasp编译文件夹中</strong></li>
<li><strong>source &#x2F;work&#x2F;env&#x2F;intel2020</strong> </li>
<li><strong>把makefile.include 复制到目录</strong></li>
<li><strong>make all</strong></li>
</ul>
</li>
<li><p>*<em>加背景电荷 <code>NELECT= POTCAR</code> 中(<code>ZVAL of the element</code>) <em>POSCAR中原子个数</em></em></p>
</li>
<li><p><strong>vasp <code>ALGO= All</code> 和<code>ALGO = Fast/Normal</code>的运行效果对比</strong>  </p>
<ul>
<li><strong>1.All的能量会略高于Fast 但是不多可忽略了</strong></li>
<li><strong>2.All花费的时间更长  Fast的单个电子步时长会慢慢变短 但是All维持一个时间长度。因此总的花费时间更长</strong></li>
<li><strong>3.All每个离子步中的电子步数大致相同，但是Fast会随着离子步增加收敛需要的电子步减少</strong></li>
</ul>
</li>
</ul>
<h1 id="7-编译vasp"><a href="#7-编译vasp" class="headerlink" title="7. 编译vasp"></a>7. 编译vasp</h1><h2 id="1-只编译vasp"><a href="#1-只编译vasp" class="headerlink" title="1.只编译vasp"></a>1.只编译vasp</h2><ol>
<li><p><strong>把arch里对应的makefile.include复制到arch的上一文件夹</strong></p>
</li>
<li><p><strong>source  intel环境</strong></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20230510143608518.png" alt="image-20230510143608518"></p>
</li>
<li><p><strong>在makefile的文件夹下 make</strong></p>
</li>
<li><p>注意：2025版的intel oneapi不支持ifort，icc，只有ifx icx，因此需要在makefile.include中把mpiifort改为mpiifx ,把icc改为icx 把icpx改为icx ，或者改icc为gcc icpx为g++</p>
</li>
</ol>
<h2 id="2-把vtst的neb方法编译进vasp"><a href="#2-把vtst的neb方法编译进vasp" class="headerlink" title="2.把vtst的neb方法编译进vasp"></a>2.把vtst的neb方法编译进vasp</h2><blockquote>
<p><strong>首先查看官方教程 <a target="_blank" rel="noopener" href="http://toeory.cm.utexas.edu/vtsttools/">vtst安装</a><strong>，</strong>官方网站给出了具体需要复制、修改哪些行</strong></p>
</blockquote>
<ol>
<li><p><strong>将vtstcode文件夹的子文件夹对应版本中的所有.F文件复制到vasp的src文件夹</strong></p>
</li>
<li><p><strong>将</strong></p>
<pre><code>bfgs.o dynmat.o instanton.o lbfgs.o sd.o cg.o dimer.o bbm.o \
fire.o lanczos.o neb.o qm.o opt.o \
</code></pre>
<p><strong>加入到vasp的src&#x2F;.objects文件中，具体位置在chain.o之前。&#x3D;&#x3D;一共有两个chain.o，都要复制上&#x3D;&#x3D;</strong></p>
<p><strong><img src="/./../../%E5%9B%BE%E7%89%87/image-20230510144526781.png" alt="image-20230510144526781"></strong></p>
</li>
<li><p><strong>修改main.F</strong></p>
</li>
</ol>
<p><strong><img src="/./../../%E5%9B%BE%E7%89%87/image-20230510144647525.png" alt="image-20230510144647525"></strong></p>
<ol start="4">
<li><strong>source intel环境</strong></li>
<li><strong>复制对应版本的makefile.include</strong></li>
<li><strong>make</strong></li>
</ol>
<blockquote>
<p><strong>原始版 教程</strong></p>
</blockquote>
<p><img src="/./../../%E5%9B%BE%E7%89%87/b2c49b21b20e2461934680c97d683e7.jpg" alt="b2c49b21b20e2461934680c97d683e7"></p>
<h2 id="3-编译可设置optcell的vasp"><a href="#3-编译可设置optcell的vasp" class="headerlink" title="3. 编译可设置optcell的vasp"></a>3. 编译可设置optcell的vasp</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.shishiruqi.com/2019/05/05/constr/">VASP固定基矢优化结构方法 | 世事如棋</a></p>
</blockquote>
<p><img src="/./../../%E5%9B%BE%E7%89%87/Screenshot_20250528_094301_mark_via_gp_Shell_edit_602658091741300.jpg" alt="Screenshot_20250528_094301_mark_via_gp_Shell_edit_602658091741300"></p>
<h1 id="8-使用MS技巧"><a href="#8-使用MS技巧" class="headerlink" title="8. 使用MS技巧"></a>8. 使用MS技巧</h1><ol>
<li><p>如何去除原子周期性，这样删除一个原子不会删除所有等价位置的原子</p>
<p>build -symmetry-make p1</p>
</li>
<li><p>在做吸附时，如果发现复制一个分子上去会出现很多分子，这是由于主体结构包括对称性导致的，需要把主体结构make p1 然后再复制就会只出现一个分子</p>
</li>
<li><p>报错</p>
</li>
</ol>
<p><img src="/./../../%E5%9B%BE%E7%89%87/110501y8ajy28r019eai10.jpg" alt="img"></p>
<p>原因：有道词典划词翻译？ 关掉有道就好使了</p>
<h1 id="9-关于用零点振动能修正自由能"><a href="#9-关于用零点振动能修正自由能" class="headerlink" title="9. 关于用零点振动能修正自由能"></a>9. 关于用零点振动能修正自由能</h1><p>见模拟方法 OER台阶图</p>
<h1 id="10-关于vaspkit的KPOINTS和INPUT中的KSPACING的关系"><a href="#10-关于vaspkit的KPOINTS和INPUT中的KSPACING的关系" class="headerlink" title="10. 关于vaspkit的KPOINTS和INPUT中的KSPACING的关系"></a>10. 关于vaspkit的KPOINTS和INPUT中的KSPACING的关系</h1><p>vaspkit*2Π &#x3D; KSPACING </p>
<p>因为vaspkit的单位是2Π&#x2F;A ,而KSPACING的单位是1&#x2F;A</p>
<p>vaspkit产生的KPOINTS可能会有错误，比如对真空层中一个水分子进行处理时，得到的KPOINTS是115这是不应该的</p>
<h1 id="10-机器使用"><a href="#10-机器使用" class="headerlink" title="10.机器使用"></a>10.机器使用</h1><p>申请192核然后用96核跑 scontrol show node nodelist 可能负载超过96，是因为开启多线程导致的，export OMP_NUM_THREADS&#x3D;1用来控制关闭多线程</p>
<h1 id="11-生成正交包"><a href="#11-生成正交包" class="headerlink" title="11. 生成正交包"></a>11. 生成正交包</h1><p><a target="_blank" rel="noopener" href="https://qvasp.com/">qvasp</a></p>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源  有问题可通过github提交issue </span>
    </div>
</article>







    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2024 xaz
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 582px;
    }
    .nav.fullscreen {
        margin-left: -582px;
    }
    .nav-left {
        width: 160px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 552px;
        }
        .nav.fullscreen {
            margin-left: -552px;
        }
        .nav-left {
            width: 160px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 552px;
            margin-left: -552px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
    #post .pjax article :not(pre) > code {
        color: #24292e;
        font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
        background-color: rgba(27,31,35,.05);
        border-radius: 3px;
        font-size: 85%;
        margin: 0;
        padding: .2em .4em;
    }
    
</style>







</html>
