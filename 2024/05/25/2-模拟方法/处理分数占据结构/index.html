<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>处理分数占据结构 | xaz的花花世界</title>
  <meta name="keywords" content="">
  <meta name="description" content="处理分数占据结构 | xaz的花花世界">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="快捷键">
<meta property="og:type" content="website">
<meta property="og:title" content="about">
<meta property="og:url" content="http://example.com/about/index.html">
<meta property="og:site_name" content="xaz的花花世界">
<meta property="og:description" content="快捷键">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/%E5%9B%BE%E7%89%87/%E5%BF%AB%E6%8D%B7%E9%94%AE.jpg">
<meta property="article:published_time" content="2024-05-25T09:36:13.000Z">
<meta property="article:modified_time" content="2024-05-25T09:40:28.322Z">
<meta property="article:author" content="xaz">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/%E5%9B%BE%E7%89%87/%E5%BF%AB%E6%8D%B7%E9%94%AE.jpg">


<link rel="icon" href="/img/1.png">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="xaz的花花世界" type="application/atom+xml">
</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/1.png"/>
</a>
<div class="author">
    <span>xaz</span>
</div>

<div class="icon">
    
</div>





<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(92)</small>
            
        </div>
    </li>
    
        
            
                
    <li>
        <div data-rel="学习笔记">
            
            学习笔记
            <small>(12)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="模拟方法">
            
            模拟方法
            <small>(12)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="分子动力学">
            <i class="fold iconfont icon-right"></i>
            分子动力学
            <small>(20)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="分子动力学&lt;---&gt;分析方法">
            <i class="fold iconfont icon-right"></i>
            分析方法
            <small>(8)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="分子动力学&lt;---&gt;分析方法&lt;---&gt;msd">
            
            msd
            <small>(3)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

                
                    
    <li>
        <div data-rel="分子动力学&lt;---&gt;lammps模拟">
            
            lammps模拟
            <small>(9)</small>
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="分子动力学&lt;---&gt;vasp模拟">
            
            vasp模拟
            <small>(3)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="机器学习">
            
            机器学习
            <small>(9)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="linux学习使用">
            
            linux学习使用
            <small>(10)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="课题研究">
            
            课题研究
            <small>(6)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="绘图与写作">
            
            绘图与写作
            <small>(6)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="杂谈">
            
            杂谈
            <small>(12)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="网站收集">
            
            网站收集
            <small>(5)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">关于</a>
        
        <a style="width: 50%"
                
                                           class="friends">友链</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="92">
<input type="hidden" id="yelog_site_word_count" value="128.2k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://www.ruanyifeng.com/blog/">阮一峰的网络日志</a></li>
            
            <li><a target="_blank" href="https://www.fomal.cn/social/link/">Fomalhaut</a></li>
            
            <li><a target="_blank" href="https://fe32.top/">唐志远</a></li>
            
            <li><a target="_blank" href="https://clashgithub.com/">clash节点分享</a></li>
            
            <li><a target="_blank" href="https://study.hycbook.com/">兼一书虫</a></li>
            
            <li><a target="_blank" href="https://blognas.hwb0307.com/">Bensz</a></li>
            
            <li><a target="_blank" href="https://wiki.cheng-group.net/">厦门大学程俊课题组</a></li>
            
            <li><a target="_blank" href="https://advancedmath.org/">advancedmath</a></li>
            
            <li><a target="_blank" href="https://blog.shishiruqi.com/">世事如棋</a></li>
            
            <li><a target="_blank" href="https://qijingzheng.github.io/">郑奇靖老师</a></li>
            
            <li><a target="_blank" href="https://blog.yizhou.ac.cn/">某个学弟</a></li>
            
            <li><a target="_blank" href="https://wiki.scio.icu/index.php/">一个wiki格式的博客</a></li>
            
            <li><a target="_blank" href="https://liuyuyang.net/">一个很励志的博客</a></li>
            
            <li><a target="_blank" href="https://wukan.me/">一个程序员</a></li>
            
            <li><a target="_blank" href="https://whuzbf.github.io/">理论物理方向一个博主郑卜凡</a></li>
            
            <li><a target="_blank" href="https://egoist.dev/">一个独立开发者chatwise作者</a></li>
            
            <li><a target="_blank" href="https://www.skyue.com/">拾月</a></li>
            
            <li><a target="_blank" href="https://www.damtp.cam.ac.uk/user/tong/index.html/">Professor David Tong</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>节点</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>影视 音乐 游戏 pt站</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>msd</a>
            </li>
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        
        <a id="top" class="全部文章 学习笔记 "
           href="/2024/05/27/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%BE%85%E5%AD%A6%E4%B9%A0%E5%86%85%E5%AE%B9/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="待学习内容">待学习内容</span>
            <span class="post-date" title="2024-05-27 09:28:23">2024/05/27</span>
        </a>
        
        
        <a id="top" class="全部文章 杂谈 "
           href="/2024/05/25/8-%E6%9D%82%E8%B0%88/%E7%AC%AC%E4%B8%80-%E7%9C%81%E8%87%AA%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="省自集">省自集</span>
            <span class="post-date" title="2024-05-25 21:14:43">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2025/06/03/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8D%E5%AE%B6%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="名家集">名家集</span>
            <span class="post-date" title="2025-06-03 09:59:13">2025/06/03</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2025/05/27/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E7%BC%96%E8%AF%91ACNN/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="编译ACNN">编译ACNN</span>
            <span class="post-date" title="2025-05-27 09:30:30">2025/05/27</span>
        </a>
        
        
        <a  class="全部文章 绘图与写作 "
           href="/2025/04/16/7-%E7%BB%98%E5%9B%BE%E4%B8%8E%E5%86%99%E4%BD%9C/%E5%85%B3%E4%BA%8E%E6%AF%95%E4%B8%9A%E8%AE%BA%E6%96%87/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="关于毕业论文">关于毕业论文</span>
            <span class="post-date" title="2025-04-16 10:29:27">2025/04/16</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 vasp模拟 "
           href="/2025/04/14/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/vasp%E6%A8%A1%E6%8B%9F/vasp%E4%B8%AD%E7%9A%84%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6%E7%B3%BB%E7%BB%BC/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vasp中的分子动力学系综">vasp中的分子动力学系综</span>
            <span class="post-date" title="2025-04-14 09:17:38">2025/04/14</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2025/04/09/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/vscode%E5%BF%AB%E6%8D%B7%E9%94%AE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vscode快捷键">vscode快捷键</span>
            <span class="post-date" title="2025-04-09 20:47:00">2025/04/09</span>
        </a>
        
        
        <a  class="全部文章 绘图与写作 "
           href="/2025/04/07/7-%E7%BB%98%E5%9B%BE%E4%B8%8E%E5%86%99%E4%BD%9C/python%E7%BB%98%E5%9B%BE%E5%9B%BE%E6%A1%88%E8%A7%84%E8%8C%83/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="python绘图图案规范">python绘图图案规范</span>
            <span class="post-date" title="2025-04-07 09:12:00">2025/04/07</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2025/02/17/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/bader%E7%94%B5%E8%8D%B7%E5%88%86%E6%9E%90/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="bader电荷分析">bader电荷分析</span>
            <span class="post-date" title="2025-02-17 14:21:06">2025/02/17</span>
        </a>
        
        
        <a  class="全部文章 绘图与写作 "
           href="/2025/02/14/7-%E7%BB%98%E5%9B%BE%E4%B8%8E%E5%86%99%E4%BD%9C/mattersim-x/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="mattersim-x">mattersim-x</span>
            <span class="post-date" title="2025-02-14 13:55:22">2025/02/14</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2025/02/11/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E5%8A%9F%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="功函数计算">功函数计算</span>
            <span class="post-date" title="2025-02-11 11:18:17">2025/02/11</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2025/01/21/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="大模型">大模型</span>
            <span class="post-date" title="2025-01-21 21:22:55">2025/01/21</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2025/01/09/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/%E4%B8%80%E4%BA%9B%E8%AF%BE%E9%A2%98/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="一些课题">一些课题</span>
            <span class="post-date" title="2025-01-09 14:10:02">2025/01/09</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2025/01/02/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/%E9%95%B6%E5%B5%8C%E5%9B%BE%E5%BD%A2/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="镶嵌图形">镶嵌图形</span>
            <span class="post-date" title="2025-01-02 11:07:02">2025/01/02</span>
        </a>
        
        
        <a  class="全部文章 网站收集 "
           href="/2024/12/25/9-%E7%BD%91%E7%AB%99%E6%94%B6%E9%9B%86/%E4%BA%A4%E6%B5%81%E7%AB%99/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="交流站">交流站</span>
            <span class="post-date" title="2024-12-25 16:15:50">2024/12/25</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2024/12/17/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/%E6%B2%B8%E7%9F%B3%E7%BB%93%E6%9E%84/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="沸石结构">沸石结构</span>
            <span class="post-date" title="2024-12-17 10:58:35">2024/12/17</span>
        </a>
        
        
        <a  class="全部文章 网站收集 "
           href="/2024/12/16/9-%E7%BD%91%E7%AB%99%E6%94%B6%E9%9B%86/%E8%B5%84%E6%BA%90%E7%BD%91%E7%AB%99/"
           data-tag="影视 音乐 游戏 pt站"
           data-author="" >
            <span class="post-title" title="资源网站">资源网站</span>
            <span class="post-date" title="2024-12-16 16:56:28">2024/12/16</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/10/25/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/git%E4%BD%BF%E7%94%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="git使用">git使用</span>
            <span class="post-date" title="2024-10-25 08:55:46">2024/10/25</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/10/03/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/manjaro%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="manjaro学习笔记">manjaro学习笔记</span>
            <span class="post-date" title="2024-10-03 11:38:17">2024/10/03</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/08/29/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E4%B8%8D%E5%90%8C%E7%9A%84%E4%B8%BB%E5%8A%A8%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="不同的主动学习方法">不同的主动学习方法</span>
            <span class="post-date" title="2024-08-29 08:08:58">2024/08/29</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/08/10/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E9%AB%98%E7%B2%BE%E5%BA%A6%E6%95%B0%E6%8D%AE%E9%9B%86%E6%9E%84%E5%BB%BA%E6%AD%A5%E9%AA%A4/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="高精度数据集构建步骤">高精度数据集构建步骤</span>
            <span class="post-date" title="2024-08-10 14:04:46">2024/08/10</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/07/18/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/OER%E5%92%8CHER/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="OER台阶图">OER台阶图</span>
            <span class="post-date" title="2024-07-18 20:55:56">2024/07/18</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/06/21/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="机器学习的理论基础">机器学习的理论基础</span>
            <span class="post-date" title="2024-06-21 19:40:04">2024/06/21</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/06/17/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BB%9F%E8%AE%A1%E5%8A%9B%E5%AD%A6/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="统计力学">统计力学</span>
            <span class="post-date" title="2024-06-17 21:25:23">2024/06/17</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/06/05/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/dpmd-dpgen/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="dpmd-dpgen">dpmd-dpgen</span>
            <span class="post-date" title="2024-06-05 15:22:59">2024/06/05</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/06/05/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/meta-dynamics-plumed/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="meta_dynamics_plumed">meta_dynamics_plumed</span>
            <span class="post-date" title="2024-06-05 15:22:59">2024/06/05</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/06/05/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E4%BB%8EMP%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E5%8F%96%E7%BB%93%E6%9E%84/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="从MP数据库提取结构">从MP数据库提取结构</span>
            <span class="post-date" title="2024-06-05 10:19:13">2024/06/05</span>
        </a>
        
        
        <a  class="全部文章 网站收集 "
           href="/2024/06/01/9-%E7%BD%91%E7%AB%99%E6%94%B6%E9%9B%86/%E6%95%85%E4%BA%8B%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="故事集">故事集</span>
            <span class="post-date" title="2024-06-01 20:29:00">2024/06/01</span>
        </a>
        
        
        <a  class="全部文章 网站收集 "
           href="/2024/05/31/9-%E7%BD%91%E7%AB%99%E6%94%B6%E9%9B%86/%E7%9F%A5%E8%AF%86%E7%BD%91%E7%AB%99/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="知识网站">知识网站</span>
            <span class="post-date" title="2024-05-31 10:08:33">2024/05/31</span>
        </a>
        
        
        <a  class="全部文章 网站收集 "
           href="/2024/05/30/9-%E7%BD%91%E7%AB%99%E6%94%B6%E9%9B%86/%E5%B7%A5%E5%85%B7%E7%BD%91%E7%AB%99/"
           data-tag="节点"
           data-author="" >
            <span class="post-title" title="工具网站">工具网站</span>
            <span class="post-date" title="2024-05-30 21:49:59">2024/05/30</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/30/8-%E6%9D%82%E8%B0%88/%E9%A3%8E%E7%89%A9%E9%9B%B6%E9%A3%9F%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="风物零食集">风物零食集</span>
            <span class="post-date" title="2024-05-30 19:01:58">2024/05/30</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/28/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/zotero%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="zotero使用技巧">zotero使用技巧</span>
            <span class="post-date" title="2024-05-28 16:16:10">2024/05/28</span>
        </a>
        
        
        <a  class="全部文章 绘图与写作 "
           href="/2024/05/27/7-%E7%BB%98%E5%9B%BE%E4%B8%8E%E5%86%99%E4%BD%9C/%E5%86%99%E4%BD%9C%E5%B7%A5%E5%85%B7/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="写作工具">写作工具</span>
            <span class="post-date" title="2024-05-27 19:37:31">2024/05/27</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/27/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/slurm%E7%B3%BB%E7%BB%9F/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="slurm系统">slurm系统</span>
            <span class="post-date" title="2024-05-27 16:36:48">2024/05/27</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/27/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/lammps_plumed%E5%AE%89%E8%A3%85/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="lammps_plumed安装">lammps_plumed安装</span>
            <span class="post-date" title="2024-05-27 09:36:27">2024/05/27</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/26/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/windows%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="windows使用技巧">windows使用技巧</span>
            <span class="post-date" title="2024-05-26 12:59:08">2024/05/26</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E9%AB%98%E9%80%9A%E9%87%8F%E7%AD%9B%E9%80%89%E7%BB%93%E6%9E%84/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="高通量筛选结构">高通量筛选结构</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E8%A1%A8%E9%9D%A2%E8%AE%A1%E7%AE%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="表面计算">表面计算</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/25/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BD%91%E6%98%93%E5%85%AC%E5%BC%80%E8%AF%BE_%E6%B0%A2%E5%8E%9F%E5%AD%90%E6%B3%A2%E5%87%BD%E6%95%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="网易公开课_氢原子波函数">网易公开课_氢原子波函数</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/25/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BC%BA%E9%99%B7%E8%83%BD/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="缺陷能">缺陷能</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 绘图与写作 "
           href="/2024/05/25/7-%E7%BB%98%E5%9B%BE%E4%B8%8E%E5%86%99%E4%BD%9C/%E7%BB%98%E5%9B%BE%E7%BB%86%E8%8A%82/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="绘图细节">绘图细节</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/25/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BA%B3%E7%B1%B3%E9%9A%8F%E6%9C%BA%E7%83%AD%E5%8A%9B%E5%AD%A6%E6%9A%91%E6%9C%9F%E8%AE%B2%E4%B9%A0%E7%8F%AD%202023/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="纳米随机热力学暑期讲习班">纳米随机热力学暑期讲习班</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E7%94%BB%E7%9B%B8%E5%9B%BE-%E8%AE%A1%E7%AE%97%E5%90%88%E6%88%90%E8%B7%AF%E5%BE%84/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="画相图-计算可能的合成路径">画相图-计算可能的合成路径</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/25/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/linux%E4%B8%AD%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux中的软件安装">linux中的软件安装</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E7%94%B5%E6%B1%A0%E8%AE%A1%E7%AE%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="电池计算">电池计算</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/25/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%94%B5%E5%AD%90%E8%83%BD%E5%B8%A6%E7%90%86%E8%AE%BA/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="电子能带理论">电子能带理论</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/05/25/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B8%8E%E4%B8%BB%E5%8A%A8%E5%AD%A6%E4%B9%A0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="机器学习与主动学习">机器学习与主动学习</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/25/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%99%B6%E6%A0%BC%E6%8C%AF%E5%8A%A8%E4%B8%8E%E5%A3%B0%E5%AD%90/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="晶格振动与声子">晶格振动与声子</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E5%A4%84%E7%90%86%E5%88%86%E6%95%B0%E5%8D%A0%E6%8D%AE%E7%BB%93%E6%9E%84/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="处理分数占据结构">处理分数占据结构</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6%E7%90%86%E8%A7%A3%E5%8F%8A%E5%8F%AF%E5%88%A9%E7%94%A8%E7%9A%84%E8%AE%A1%E7%AE%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="分子动力学理解及可利用的计算">分子动力学理解及可利用的计算</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/25/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/VDOS%20and%20band%20center/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="VDOS and band center">VDOS and band center</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2024/05/25/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/%E5%85%83%E7%B4%A0%E4%BB%B7%E6%80%81/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="元素价态">元素价态</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/vasp%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vasp使用教程">vasp使用教程</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2024/05/25/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/Te%E7%BA%B3%E7%B1%B3%E7%BA%BF/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Te纳米线">Te纳米线</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/%E4%B8%80%E4%BA%9Bpython%E8%84%9A%E6%9C%AC/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="一些python脚本">一些python脚本</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 模拟方法 "
           href="/2024/05/25/2-%E6%A8%A1%E6%8B%9F%E6%96%B9%E6%B3%95/NEB%E8%AE%A1%E7%AE%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="NEB计算">NEB计算</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 绘图与写作 "
           href="/2024/05/25/7-%E7%BB%98%E5%9B%BE%E4%B8%8E%E5%86%99%E4%BD%9C/markdown&latex%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="markdown&amp;latex使用教程">markdown&amp;latex使用教程</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/25/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/linux%E6%93%8D%E4%BD%9C/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux操作">linux操作</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 linux学习使用 "
           href="/2024/05/25/5-linux%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8/ABACUS%E4%BD%BF%E7%94%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ABACUS使用">ABACUS使用</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 课题研究 "
           href="/2024/05/25/6-%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/can_do/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="can_do">can_do</span>
            <span class="post-date" title="2024-05-25 22:01:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/lammps%E8%AE%A1%E7%AE%97msd/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="lammps计算msd">lammps计算msd</span>
            <span class="post-date" title="2024-05-25 10:42:50">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/%E8%BD%AC%E6%8D%A2lammps%E8%BD%A8%E8%BF%B9%E4%B8%BAXDATCAR/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="转换lammps轨迹为XDATCAR">转换lammps轨迹为XDATCAR</span>
            <span class="post-date" title="2024-05-25 10:41:42">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/lammps%E5%A4%84%E7%90%86%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="lammps处理计算结果">lammps处理计算结果</span>
            <span class="post-date" title="2024-05-25 10:32:15">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/lammps%E6%89%B9%E9%87%8F%E6%8F%90%E4%BB%BB%E5%8A%A1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="lammps批量提任务">lammps批量提任务</span>
            <span class="post-date" title="2024-05-25 10:31:33">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 机器学习 "
           href="/2024/05/25/4-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%85%B3%E4%BA%8Emaxvol/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="关于maxvol">关于maxvol</span>
            <span class="post-date" title="2024-05-25 10:30:25">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/%E8%BD%AC%E6%8D%A2POSCAR/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="转换POSCAR">转换POSCAR</span>
            <span class="post-date" title="2024-05-25 10:27:07">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 msd "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/npt%E7%B3%BB%E7%BB%BC%E4%B8%AD%E7%9A%84msd/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="npt系综中的msd">npt系综中的msd</span>
            <span class="post-date" title="2024-05-25 10:16:55">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/lammps%E7%9A%84%E8%BE%93%E5%87%BA/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="lammps的输出">lammps的输出</span>
            <span class="post-date" title="2024-05-25 10:15:56">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/%E5%86%85%E7%BD%AE%E7%9A%84msd%E7%AE%97%E6%B3%95&%E8%B4%A8%E5%BF%83%E9%A3%98%E7%A7%BB%E5%8A%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="内置的msd算法&amp;质心飘移&amp;TMSD与MSD">内置的msd算法&amp;质心飘移&amp;TMSD与MSD</span>
            <span class="post-date" title="2024-05-25 10:11:17">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/%E5%8F%82%E6%95%B0variable/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="参数variable">参数variable</span>
            <span class="post-date" title="2024-05-25 10:09:44">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 lammps模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/lammps%E6%A8%A1%E6%8B%9F/in-lmp%E5%8F%82%E6%95%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="in.lmp参数">in.lmp参数</span>
            <span class="post-date" title="2024-05-25 10:05:19">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 vasp模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/vasp%E6%A8%A1%E6%8B%9F/vasp%E6%89%B9%E9%87%8F%E6%8F%90%E4%BB%BB%E5%8A%A1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vasp批量提任务">vasp批量提任务</span>
            <span class="post-date" title="2024-05-25 09:36:55">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/van-hove-%E5%87%BD%E6%95%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="van hove 函数">van hove 函数</span>
            <span class="post-date" title="2024-05-25 09:23:40">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/%E5%A4%9A%E9%9D%A2%E4%BD%93%E6%8C%87%E6%95%B0%E8%AE%A1%E7%AE%97/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="多面体指数计算">多面体指数计算</span>
            <span class="post-date" title="2024-05-25 09:22:20">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 vasp模拟 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/vasp%E6%A8%A1%E6%8B%9F/%E5%8D%87%E6%B8%A9%E8%BF%87%E7%A8%8B%E8%BE%A8%E6%9E%90/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="升温过程辨析">升温过程辨析</span>
            <span class="post-date" title="2024-05-25 09:21:27">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/%E5%BE%84%E5%90%91%E5%88%86%E5%B8%83%E5%87%BD%E6%95%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="径向分布函数-rdf">径向分布函数-rdf</span>
            <span class="post-date" title="2024-05-25 09:19:29">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/%E6%A6%82%E7%8E%87%E5%AF%86%E5%BA%A6%E5%9B%BE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="概率密度图">概率密度图</span>
            <span class="post-date" title="2024-05-25 09:18:21">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 msd "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/msd%E6%94%B6%E6%95%9B%E6%80%A7%E5%88%86%E6%9E%90/"
           data-tag="msd"
           data-author="" >
            <span class="post-title" title="msd收敛性分析">msd收敛性分析</span>
            <span class="post-date" title="2024-05-25 09:09:28">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 分子动力学 分析方法 msd "
           href="/2024/05/25/3-%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/vasp%E6%A0%BC%E5%BC%8F%E8%AE%A1%E7%AE%97msd/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vasp格式计算msd">vasp格式计算msd</span>
            <span class="post-date" title="2024-05-25 09:03:59">2024/05/25</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/24/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%B6%85%E7%A6%BB%E5%AD%90%E5%AF%BC%E4%BD%93%E4%B8%AD%E9%98%BF%E4%BC%A6%E5%B0%BC%E4%B9%8C%E6%96%AF%E5%85%AC%E5%BC%8F%E7%9A%84%E7%89%A9%E7%90%86%E8%B5%B7%E6%BA%90/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="超离子导体中阿伦尼乌斯公式的物理起源">超离子导体中阿伦尼乌斯公式的物理起源</span>
            <span class="post-date" title="2024-05-24 21:17:54">2024/05/24</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/24/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%9B%BA%E6%80%81%E7%A6%BB%E5%AD%90%E5%AD%A6/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="固态离子学">固态离子学</span>
            <span class="post-date" title="2024-05-24 00:00:00">2024/05/24</span>
        </a>
        
        
        <a  class="全部文章 学习笔记 "
           href="/2024/05/23/1-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB%E6%A0%87%E5%87%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="文献阅读标准">文献阅读标准</span>
            <span class="post-date" title="2024-05-23 21:26:05">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E7%A9%BA%E6%9A%87%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="空暇集">空暇集</span>
            <span class="post-date" title="2024-05-23 20:47:46">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E7%96%BE%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="疾集">疾集</span>
            <span class="post-date" title="2024-05-23 14:34:22">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E4%BF%A1%E5%BF%B5%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="信念集">信念集</span>
            <span class="post-date" title="2024-05-23 14:19:39">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E6%84%A4%E6%85%A8%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="愤慨集">愤慨集</span>
            <span class="post-date" title="2024-05-23 14:15:43">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/other/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="other">other</span>
            <span class="post-date" title="2024-05-23 00:14:33">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/future/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="future">future</span>
            <span class="post-date" title="2024-05-23 00:14:33">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E4%BB%BB%E5%8A%A1%E6%B8%85%E5%8D%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="任务清单">任务清单</span>
            <span class="post-date" title="2024-05-23 00:14:33">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E5%A5%87%E6%80%9D%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="奇思集">奇思集</span>
            <span class="post-date" title="2024-05-23 00:14:33">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/23/8-%E6%9D%82%E8%B0%88/%E5%B9%B4%E5%8D%8E%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="年华集">年华集</span>
            <span class="post-date" title="2024-05-23 00:14:33">2024/05/23</span>
        </a>
        
        
        <a  class="全部文章 杂谈 "
           href="/2024/05/11/8-%E6%9D%82%E8%B0%88/%E7%A4%BE%E4%BC%9A%E9%9B%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="社会集">社会集</span>
            <span class="post-date" title="2024-05-11 09:02:21">2024/05/11</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-2-模拟方法/处理分数占据结构" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">处理分数占据结构</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="模拟方法">模拟方法</a>
            
        </span>
        
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2024-12-16 15:48:20'>2024-05-25 22:01</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:8.7k</span>
        
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-pymatgen%E6%A3%80%E9%AA%8C%E7%9B%B8%E5%90%8C%E7%BB%93%E6%9E%84"><span class="toc-text">1.pymatgen检验相同结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%B8%80%E6%AC%A1%E6%80%A7%E6%A3%80%E9%AA%8C"><span class="toc-text">1.一次性检验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%80%90%E4%B8%AA%E6%A3%80%E9%AA%8C"><span class="toc-text">2.逐个检验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%A3%80%E9%AA%8C%E4%B8%A4%E4%B8%AA%E7%BB%93%E6%9E%84"><span class="toc-text">3. 检验两个结构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-pymatgen-enumeration"><span class="toc-text">2. pymatgen-enumeration</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-pymatgen-orderdisorder"><span class="toc-text">3. pymatgen-orderdisorder</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E8%AE%A1%E7%AE%97%E9%9D%99%E7%94%B5%E8%83%BD"><span class="toc-text">4.计算静电能</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-sqs"><span class="toc-text">5. sqs</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%89%8D%E5%A4%84%E7%90%86"><span class="toc-text">1.前处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%BD%AC%E6%8D%A2rndstr%E6%A0%BC%E5%BC%8F%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">1. 转换rndstr格式的结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8F%90%E4%BA%A4%E5%A4%9A%E4%B8%AAip%E7%9A%84%E4%BB%BB%E5%8A%A1"><span class="toc-text">2.提交多个ip的任务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%90%8E%E5%A4%84%E7%90%86"><span class="toc-text">2. 后处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%8F%90%E5%8F%96bestcorr"><span class="toc-text">1. 提取bestcorr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AF%B9%E5%A4%9A%E4%BB%BB%E5%8A%A1ip%E4%BA%A7%E7%94%9F%E7%9A%84best-out%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-text">2.对多任务ip产生的best.out文件处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%A3%80%E9%AA%8C%E7%9B%B8%E5%90%8C%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">3. 检验相同的结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E6%9A%B4%E5%8A%9B%E6%9E%9A%E4%B8%BE"><span class="toc-text">6.暴力枚举</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%9E%9A%E4%B8%BE%E8%84%9A%E6%9C%AC"><span class="toc-text">1.枚举脚本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%A4%9A%E4%BB%BB%E5%8A%A1%E8%84%9A%E6%9C%AC-%E6%A3%80%E9%AA%8C%E7%9B%B8%E5%90%8C%E7%BB%93%E6%9E%84"><span class="toc-text">2. 多任务脚本 检验相同结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%94%B9%E8%89%AF%E7%89%88"><span class="toc-text">3.改良版</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%99%90%E5%AE%9A%E6%9C%80%E5%B0%8F%E8%B7%9D%E7%A6%BB"><span class="toc-text">1.限定最小距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%99%90%E5%AE%9A%E6%9C%80%E5%B0%8F%E8%B7%9D%E7%A6%BB%E4%B8%94%E4%BF%9D%E8%AF%81%E6%9B%BF%E4%BB%A3%E5%8F%91%E7%94%9F%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-text">2.限定最小距离且保证替代发生在不同的位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%99%90%E5%AE%9A%E7%A9%BA%E9%97%B4%E7%BE%A4"><span class="toc-text">3.限定空间群</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%81%9A%E6%94%B9%E8%89%AF%E7%89%88"><span class="toc-text">4.多任务做改良版</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8%E6%9E%9A%E4%B8%BE%E6%96%B9%E6%B3%95%E5%A4%84%E7%90%86%E8%93%9D%E9%92%BB%E7%BB%93%E6%9E%84"><span class="toc-text">4.使用枚举方法处理蓝钻结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%8C%E5%85%A8%E9%9A%8F%E6%9C%BA%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%88%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%94%BE%E5%8F%8C%E6%89%8B%E4%BA%86%EF%BC%89"><span class="toc-text">1.完全随机的方法（完全解放双手了）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%8F%90%E4%BB%BB%E5%8A%A1"><span class="toc-text">1. 提任务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-changeatom-py"><span class="toc-text">2. changeatom.py</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-multitask-sh-%E5%81%9A%E4%B8%80%E4%BA%9B%E6%96%87%E4%BB%B6%E5%A4%B9-%EF%BC%8C%E6%8F%90%E4%BA%A4%E4%BA%A7%E7%94%9F%E7%BB%93%E6%9E%84%E7%9A%84%E4%BB%BB%E5%8A%A1%EF%BC%8C%E6%8F%90%E4%BA%A4%E8%AE%A1%E7%AE%97ewald%E8%83%BD%E9%87%8F%E7%9A%84%E4%BB%BB%E5%8A%A1"><span class="toc-text">3. multitask.sh :做一些文件夹 ，提交产生结构的任务，提交计算ewald能量的任务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%90%8E%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6-get-all-sh-%E6%8F%90%E5%8F%96%E8%83%BD%E9%87%8F%E6%9C%80%E4%BD%8E%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">4. 后处理文件 get-all.sh   提取能量最低的结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9B%BF%E6%8D%A2%E4%B8%BAB-3O%E5%92%8CB-4O%E6%9E%84%E5%9E%8B%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%88%E8%BF%98%E9%9C%80%E8%A6%81%E6%89%8B%E5%8A%A8%E5%81%9A%E4%B8%80%E4%BA%9B%E6%B5%81%E7%A8%8B%EF%BC%89"><span class="toc-text">2. 替换为B_3O和B_4O构型的方法（还需要手动做一些流程）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%9E%9A%E4%B8%BE%E6%B0%A7%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-text">1. 枚举氧的位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%A3%80%E9%AA%8C%E7%9B%B8%E5%90%8C%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">2. 检验相同的结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%9B%BF%E6%8D%A2B%E5%8E%9F%E5%AD%90"><span class="toc-text">3. 替换B原子</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%86%8D%E6%AC%A1%E6%A3%80%E9%AA%8C%E7%9B%B8%E5%90%8C%E7%BB%93%E6%9E%84"><span class="toc-text">4. 再次检验相同结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E8%AE%A1%E7%AE%97%E8%83%BD%E9%87%8F%EF%BC%8C%E6%95%B4%E7%90%86%E7%BB%93%E6%9E%84"><span class="toc-text">5. 计算能量，整理结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%9B%BF%E6%8D%A2%E4%B8%BAB-2O%E5%92%8CB-3O%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">3. 替换为B_2O和B_3O的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%9E%9A%E4%B8%BE%E6%B0%A7%E7%9A%84%E7%BB%93%E6%9E%84%E5%92%8C%E5%85%B6%E4%BB%96%E6%AD%A5%E9%AA%A4"><span class="toc-text">1.枚举氧的结构和其他步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E6%9B%BF%E6%8D%A2B%E5%8E%9F%E5%AD%90-%E8%81%94%E5%90%88%E5%8F%96%E4%BB%A3%E3%80%81%E5%AE%8C%E5%85%A8%E6%9E%9A%E4%B8%BE"><span class="toc-text">2-1. 替换B原子(联合取代、完全枚举)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%85%88%E5%88%86%E7%B1%BB%E5%86%8D%E6%9B%BF%E4%BB%A3"><span class="toc-text">2-2 先分类再替代</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E6%AF%8F%E4%B8%AA%E7%BB%93%E6%9E%84%E9%9A%8F%E6%9C%BA%E5%8F%96%E6%A0%B7%E7%89%B9%E5%AE%9A%E6%95%B0%E7%9B%AE%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">2-3 每个结构随机取样特定数目的结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9E%9A%E4%B8%BE-%E8%BF%AD%E4%BB%A3%E5%99%A8%E8%BF%9B%E8%A1%8C%E5%B7%A5%E4%BD%9C"><span class="toc-text">4.枚举+迭代器进行工作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%9E%9A%E4%B8%BE-%E4%BD%BF%E7%94%A8%E9%9D%99%E7%94%B5%E8%83%BD%E4%BD%9C%E4%B8%BA%E5%93%88%E5%B8%8C%E5%80%BC%E8%80%8C%E4%B8%8D%E6%98%AFfit"><span class="toc-text">5.枚举-使用静电能作为哈希值而不是fit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%8F%AF%E4%BB%A5%E5%88%86%E6%AD%A5%E9%AA%A4%E6%9D%A5%E5%81%9A%EF%BC%8C%E5%85%88%E6%9B%BF%E6%8D%A2%E5%9B%9B%E4%B8%AA%EF%BC%8C%E5%86%8D%E6%9B%BF%E6%8D%A2%E4%B8%A4%E4%B8%AA-%EF%BC%81"><span class="toc-text">6. 可以分步骤来做，先替换四个，再替换两个 ！</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%A3%80%E9%AA%8C"><span class="toc-text">5.检验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%80%90%E4%B8%AA%E6%A3%80%E9%AA%8C%E7%9B%B8%E4%BC%BC%E6%80%A7"><span class="toc-text">1. 逐个检验相似性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A3%80%E9%AA%8C%E4%B8%A4%E4%B8%AA%E7%BB%93%E6%9E%84"><span class="toc-text">2. 检验两个结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E6%89%BE%E5%87%BA%E7%BC%BA%E5%A4%B1%E7%9A%84%E5%8E%9F%E5%AD%90"><span class="toc-text">7.找出缺失的原子</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%A4%84%E7%90%86CaH6%E7%9A%84333%E5%80%8D%E8%83%9E%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%88%E5%B0%86324%E4%B8%AAH%E4%B8%AD%E7%9A%8414%E4%B8%AA%E6%89%A3%E6%8E%89-%E5%8F%AF%E4%BB%A5%E6%9E%9A%E4%B8%BE%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">7. 处理CaH6的333倍胞的问题（将324个H中的14个扣掉-可以枚举的方法</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-4 i,
    .toc-level-4 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><div class='inner-toc'><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-pymatgen%E6%A3%80%E9%AA%8C%E7%9B%B8%E5%90%8C%E7%BB%93%E6%9E%84"><span class="toc-text">1.pymatgen检验相同结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%B8%80%E6%AC%A1%E6%80%A7%E6%A3%80%E9%AA%8C"><span class="toc-text">1.一次性检验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%80%90%E4%B8%AA%E6%A3%80%E9%AA%8C"><span class="toc-text">2.逐个检验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%A3%80%E9%AA%8C%E4%B8%A4%E4%B8%AA%E7%BB%93%E6%9E%84"><span class="toc-text">3. 检验两个结构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-pymatgen-enumeration"><span class="toc-text">2. pymatgen-enumeration</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-pymatgen-orderdisorder"><span class="toc-text">3. pymatgen-orderdisorder</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E8%AE%A1%E7%AE%97%E9%9D%99%E7%94%B5%E8%83%BD"><span class="toc-text">4.计算静电能</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-sqs"><span class="toc-text">5. sqs</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%89%8D%E5%A4%84%E7%90%86"><span class="toc-text">1.前处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%BD%AC%E6%8D%A2rndstr%E6%A0%BC%E5%BC%8F%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">1. 转换rndstr格式的结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8F%90%E4%BA%A4%E5%A4%9A%E4%B8%AAip%E7%9A%84%E4%BB%BB%E5%8A%A1"><span class="toc-text">2.提交多个ip的任务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%90%8E%E5%A4%84%E7%90%86"><span class="toc-text">2. 后处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%8F%90%E5%8F%96bestcorr"><span class="toc-text">1. 提取bestcorr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AF%B9%E5%A4%9A%E4%BB%BB%E5%8A%A1ip%E4%BA%A7%E7%94%9F%E7%9A%84best-out%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-text">2.对多任务ip产生的best.out文件处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%A3%80%E9%AA%8C%E7%9B%B8%E5%90%8C%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">3. 检验相同的结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E6%9A%B4%E5%8A%9B%E6%9E%9A%E4%B8%BE"><span class="toc-text">6.暴力枚举</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%9E%9A%E4%B8%BE%E8%84%9A%E6%9C%AC"><span class="toc-text">1.枚举脚本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%A4%9A%E4%BB%BB%E5%8A%A1%E8%84%9A%E6%9C%AC-%E6%A3%80%E9%AA%8C%E7%9B%B8%E5%90%8C%E7%BB%93%E6%9E%84"><span class="toc-text">2. 多任务脚本 检验相同结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%94%B9%E8%89%AF%E7%89%88"><span class="toc-text">3.改良版</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%99%90%E5%AE%9A%E6%9C%80%E5%B0%8F%E8%B7%9D%E7%A6%BB"><span class="toc-text">1.限定最小距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%99%90%E5%AE%9A%E6%9C%80%E5%B0%8F%E8%B7%9D%E7%A6%BB%E4%B8%94%E4%BF%9D%E8%AF%81%E6%9B%BF%E4%BB%A3%E5%8F%91%E7%94%9F%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-text">2.限定最小距离且保证替代发生在不同的位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%99%90%E5%AE%9A%E7%A9%BA%E9%97%B4%E7%BE%A4"><span class="toc-text">3.限定空间群</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%81%9A%E6%94%B9%E8%89%AF%E7%89%88"><span class="toc-text">4.多任务做改良版</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8%E6%9E%9A%E4%B8%BE%E6%96%B9%E6%B3%95%E5%A4%84%E7%90%86%E8%93%9D%E9%92%BB%E7%BB%93%E6%9E%84"><span class="toc-text">4.使用枚举方法处理蓝钻结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%8C%E5%85%A8%E9%9A%8F%E6%9C%BA%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%88%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%94%BE%E5%8F%8C%E6%89%8B%E4%BA%86%EF%BC%89"><span class="toc-text">1.完全随机的方法（完全解放双手了）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%8F%90%E4%BB%BB%E5%8A%A1"><span class="toc-text">1. 提任务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-changeatom-py"><span class="toc-text">2. changeatom.py</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-multitask-sh-%E5%81%9A%E4%B8%80%E4%BA%9B%E6%96%87%E4%BB%B6%E5%A4%B9-%EF%BC%8C%E6%8F%90%E4%BA%A4%E4%BA%A7%E7%94%9F%E7%BB%93%E6%9E%84%E7%9A%84%E4%BB%BB%E5%8A%A1%EF%BC%8C%E6%8F%90%E4%BA%A4%E8%AE%A1%E7%AE%97ewald%E8%83%BD%E9%87%8F%E7%9A%84%E4%BB%BB%E5%8A%A1"><span class="toc-text">3. multitask.sh :做一些文件夹 ，提交产生结构的任务，提交计算ewald能量的任务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%90%8E%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6-get-all-sh-%E6%8F%90%E5%8F%96%E8%83%BD%E9%87%8F%E6%9C%80%E4%BD%8E%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">4. 后处理文件 get-all.sh   提取能量最低的结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9B%BF%E6%8D%A2%E4%B8%BAB-3O%E5%92%8CB-4O%E6%9E%84%E5%9E%8B%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%88%E8%BF%98%E9%9C%80%E8%A6%81%E6%89%8B%E5%8A%A8%E5%81%9A%E4%B8%80%E4%BA%9B%E6%B5%81%E7%A8%8B%EF%BC%89"><span class="toc-text">2. 替换为B_3O和B_4O构型的方法（还需要手动做一些流程）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%9E%9A%E4%B8%BE%E6%B0%A7%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-text">1. 枚举氧的位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%A3%80%E9%AA%8C%E7%9B%B8%E5%90%8C%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">2. 检验相同的结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%9B%BF%E6%8D%A2B%E5%8E%9F%E5%AD%90"><span class="toc-text">3. 替换B原子</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%86%8D%E6%AC%A1%E6%A3%80%E9%AA%8C%E7%9B%B8%E5%90%8C%E7%BB%93%E6%9E%84"><span class="toc-text">4. 再次检验相同结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E8%AE%A1%E7%AE%97%E8%83%BD%E9%87%8F%EF%BC%8C%E6%95%B4%E7%90%86%E7%BB%93%E6%9E%84"><span class="toc-text">5. 计算能量，整理结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%9B%BF%E6%8D%A2%E4%B8%BAB-2O%E5%92%8CB-3O%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">3. 替换为B_2O和B_3O的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%9E%9A%E4%B8%BE%E6%B0%A7%E7%9A%84%E7%BB%93%E6%9E%84%E5%92%8C%E5%85%B6%E4%BB%96%E6%AD%A5%E9%AA%A4"><span class="toc-text">1.枚举氧的结构和其他步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E6%9B%BF%E6%8D%A2B%E5%8E%9F%E5%AD%90-%E8%81%94%E5%90%88%E5%8F%96%E4%BB%A3%E3%80%81%E5%AE%8C%E5%85%A8%E6%9E%9A%E4%B8%BE"><span class="toc-text">2-1. 替换B原子(联合取代、完全枚举)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%85%88%E5%88%86%E7%B1%BB%E5%86%8D%E6%9B%BF%E4%BB%A3"><span class="toc-text">2-2 先分类再替代</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E6%AF%8F%E4%B8%AA%E7%BB%93%E6%9E%84%E9%9A%8F%E6%9C%BA%E5%8F%96%E6%A0%B7%E7%89%B9%E5%AE%9A%E6%95%B0%E7%9B%AE%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">2-3 每个结构随机取样特定数目的结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9E%9A%E4%B8%BE-%E8%BF%AD%E4%BB%A3%E5%99%A8%E8%BF%9B%E8%A1%8C%E5%B7%A5%E4%BD%9C"><span class="toc-text">4.枚举+迭代器进行工作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%9E%9A%E4%B8%BE-%E4%BD%BF%E7%94%A8%E9%9D%99%E7%94%B5%E8%83%BD%E4%BD%9C%E4%B8%BA%E5%93%88%E5%B8%8C%E5%80%BC%E8%80%8C%E4%B8%8D%E6%98%AFfit"><span class="toc-text">5.枚举-使用静电能作为哈希值而不是fit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%8F%AF%E4%BB%A5%E5%88%86%E6%AD%A5%E9%AA%A4%E6%9D%A5%E5%81%9A%EF%BC%8C%E5%85%88%E6%9B%BF%E6%8D%A2%E5%9B%9B%E4%B8%AA%EF%BC%8C%E5%86%8D%E6%9B%BF%E6%8D%A2%E4%B8%A4%E4%B8%AA-%EF%BC%81"><span class="toc-text">6. 可以分步骤来做，先替换四个，再替换两个 ！</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%A3%80%E9%AA%8C"><span class="toc-text">5.检验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%80%90%E4%B8%AA%E6%A3%80%E9%AA%8C%E7%9B%B8%E4%BC%BC%E6%80%A7"><span class="toc-text">1. 逐个检验相似性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A3%80%E9%AA%8C%E4%B8%A4%E4%B8%AA%E7%BB%93%E6%9E%84"><span class="toc-text">2. 检验两个结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E6%89%BE%E5%87%BA%E7%BC%BA%E5%A4%B1%E7%9A%84%E5%8E%9F%E5%AD%90"><span class="toc-text">7.找出缺失的原子</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%A4%84%E7%90%86CaH6%E7%9A%84333%E5%80%8D%E8%83%9E%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%88%E5%B0%86324%E4%B8%AAH%E4%B8%AD%E7%9A%8414%E4%B8%AA%E6%89%A3%E6%8E%89-%E5%8F%AF%E4%BB%A5%E6%9E%9A%E4%B8%BE%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">7. 处理CaH6的333倍胞的问题（将324个H中的14个扣掉-可以枚举的方法</span></a></li></ol></div></p>
<h1 id="1-pymatgen检验相同结构"><a href="#1-pymatgen检验相同结构" class="headerlink" title="1.pymatgen检验相同结构"></a>1.pymatgen检验相同结构</h1><p>fcc、bcc等对应着特殊空间群里特定位置的占据</p>
<h2 id="1-一次性检验"><a href="#1-一次性检验" class="headerlink" title="1.一次性检验"></a>1.一次性检验</h2><pre><code class="python">import os 
from pymatgen.core import Structure
from pymatgen.io.vasp.sets import batch_write_input, MPRelaxSet
from pymatgen.io.vasp.inputs import Poscar
standard_structures= []
dir=&#39;./&#39;
for i in range(1000):
    filename = &quot;&#123;&#125;.vasp&quot;.format(i)
    if not os.path.exists(os.path.join(dir,filename)):
        continue
    print(filename)
    structure = Structure.from_file(filename)
    structure.remove_species(&quot;O&quot;)
    standard_structures.append(structure)
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
groups = matcher.group_structures([d for d in standard_structures])
print(len(groups))
groupstructures = [x[0] for x in groups]  # 将嵌套列表的每个列表的第一个元素提取出来做成一个新列表
from pymatgen.io.vasp.inputs import Poscar
n = 0
for Cry_Str in groupstructures:
    #print(Cry_Str)
    Vasp_Str = Poscar(Cry_Str)
    n = n+1
    Vasp_Str.write_file(&#39;%dnew.vasp&#39;%n)
</code></pre>
<h2 id="2-逐个检验"><a href="#2-逐个检验" class="headerlink" title="2.逐个检验"></a>2.逐个检验</h2><pre><code class="python">import numpy as np
import sys,os,time
from pymatgen.core import Structure
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
all_str = []
for i in range(1,100000):
    file = f&#39;&#123;i&#125;.vasp&#39;
    if not os.path.exists(file):
       continue
    print(file)
    strua = Structure.from_file(file)
    match_found = False
    for str in all_str:
        if matcher.fit(strua,str):
           match_found = True
           break
    if not match_found:
        all_str.append(strua)
        print(&#39;%d structures&#39; % len(all_str))
from pymatgen.io.vasp.inputs import Poscar
n = 0
for strua in all_str:
    Vasp_Str = Poscar(strua)
    n +=1
    Vasp_Str.write_file(&#39;%dnew.vasp&#39;%n)
</code></pre>
<h2 id="3-检验两个结构"><a href="#3-检验两个结构" class="headerlink" title="3. 检验两个结构"></a>3. 检验两个结构</h2><pre><code class="python">import numpy as np
import sys,os,time
from pymatgen.core import Structure
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
aa = Structure.from_file(&#39;16.vasp&#39;)
bb = Structure.from_file(&#39;4199.vasp&#39;)
matcher.fit(aa,bb)
</code></pre>
<h1 id="2-pymatgen-enumeration"><a href="#2-pymatgen-enumeration" class="headerlink" title="2. pymatgen-enumeration"></a>2. pymatgen-enumeration</h1><pre><code class="python">from pymatgen.core import Structure
from pymatgen.symmetry.analyzer import SpacegroupAnalyzer
from pymatgen.transformations.advanced_transformations import EnumerateStructureTransformation
from pymatgen.io.vasp.sets import batch_write_input, MPRelaxSet
from pymatgen.analysis.energy_models import EwaldElectrostaticModel
from pymatgen.analysis.bond_valence import BVAnalyzer
structure = Structure.from_file(&quot;a.cif&quot;)
data = &#123;&quot;Na&quot;:1, &quot;Y&quot;:3, &quot;Si&quot;:4,&quot;O&quot;:-2,&quot;Al&quot;:3,&quot;K&quot;:1&#125;
analyzer = SpacegroupAnalyzer(structure)
prim_cell = analyzer.find_primitive()
prim_cell.add_oxidation_state_by_element(data)
#print(prim_cell)
enum = EnumerateStructureTransformation()
enumerated = enum.apply_transformation(prim_cell, 100)
structures = [d[&quot;structure&quot;] for d in enumerated]
print(&quot;%d structures returned.&quot; % len(structures))
from pymatgen.io.vasp.inputs import Poscar
n = 0
for Cry_Str in structures:
    #print(Cry_Str)
    Vasp_Str = Poscar(Cry_Str)
    n = n+1
    Vasp_Str.write_file(&#39;%d.vasp&#39;%n)
#from pymatgen.io.cif import CifWriter

#n = 0
#for Cry_Str in structures:
#    n = n + 1
#    cif_filename = f&quot;&#123;n&#125;.cif&quot;
#    cif_writer = CifWriter(Cry_Str)
#    cif_writer.write_file(cif_filename)   

#energy= [d[&quot;energy&quot;] for d in enumerated]
#fl = open(&#39;energy.dat&#39;,&#39;w&#39;)
#fl.writelines(str(energy))
#data = &#123;&quot;K&quot;:1, &quot;O&quot;:-2, &quot;Fe&quot;:2,&quot;Ti&quot;:4.25,&quot;Mn&quot;:3.75&#125;
#abc=[]
#for i in range(1,101):
#    m = Structure.from_file(&#39;%d.vasp&#39;%i)
#    m.add_oxidation_state_by_element(data)
#    energy = EwaldElectrostaticModel().get_energy(m)
#    abc.append(energy)
#f2 = open(&#39;energy2.dat&#39;,&#39;w&#39;)
#f2.writelines(str(abc))
with open(&#39;energy.dat&#39;, &#39;w&#39;) as f:
    for item in abc:
        f.write(str(item) + &#39;\n&#39;)

#strcturelist2.sort(key = EwaldElectrostaticModel().get_energy)
</code></pre>
<h1 id="3-pymatgen-orderdisorder"><a href="#3-pymatgen-orderdisorder" class="headerlink" title="3. pymatgen-orderdisorder"></a>3. pymatgen-orderdisorder</h1><pre><code class="python">import os
from pymatgen.io.cif import CifParser, CifWriter
from pymatgen.transformations.standard_transformations import SubstitutionTransformation, OrderDisorderedStructureTransformation, SupercellTransformation
from pymatgen.core import Structure
from pymatgen.symmetry.analyzer import SpacegroupAnalyzer
from pymatgen.analysis.energy_models import EwaldElectrostaticModel
from pymatgen.transformations.advanced_transformations import EnumerateStructureTransformation
from pymatgen.io.vasp.sets import batch_write_input, MPRelaxSet
from pymatgen.io.vasp.inputs import Poscar
structure = Structure.from_file(&quot;a.cif&quot;)
data = &#123;&quot;Ni&quot;:2, &quot;Co&quot;:3, &quot;S&quot;:-2,&quot;Se&quot;:-2&#125;
analyzer = SpacegroupAnalyzer(structure)
prim_cell = analyzer.find_primitive()
prim_cell.add_oxidation_state_by_element(data)
print(prim_cell)
order = OrderDisorderedStructureTransformation()
standard_structures=order.apply_transformation(prim_cell,return_ranked_list=1000)
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
groups = matcher.group_structures([d[&quot;structure&quot;] for d in standard_structures]) #这应该是个字典，把字典中的structure关键字提出来组&gt;成列表,groups里只剩下结构了

#structures = [d[&quot;structure&quot;] for d in standard_structures]
#print(&quot;%d structures returned.&quot; % len(structures))

#from pymatgen.io.vasp.inputs import Poscar
#n = 0
#for Cry_Str in structures:
    #print(Cry_Str)
#    Vasp_Str = Poscar(Cry_Str)
#    n = n+1
#    Vasp_Str.write_file(&#39;%d.vasp&#39;%n)
groupstructures = [x[0] for x in groups]  # 将嵌套列表的每个列表的第一个元素提取出来做成一个新列表
from pymatgen.io.vasp.inputs import Poscar
n = 0
for Cry_Str in groupstructures:
    #print(Cry_Str)
    Vasp_Str = Poscar(Cry_Str)
    n = n+1
    Vasp_Str.write_file(&#39;%d.vasp&#39;%n)
#产生等差数列 for i in range(len(groups))
#提取出列举时计算的能量 energy = [x(&#39;energy&#39;) for x in standard_structures]
#验证同一类群下的结构静电能相等
#suoyoua = [x for x in groups[0]]
#for cry in suoyoua:
#   energy = EwaldElectrostaticModel().get_energy(cry)
#  print(energy)
#验证输出的顺序是按照能量升序进行的
#suoyou1 = [x[0] for x in groups]
#for cry in suoyou1:
#    energy = EwaldElectrostaticModel().get_energy(cry)
#    print(energy)
</code></pre>
<h1 id="4-计算静电能"><a href="#4-计算静电能" class="headerlink" title="4.计算静电能"></a>4.计算静电能</h1><pre><code class="python">import os
from pymatgen.core import Structure
from pymatgen.io.vasp.inputs import Poscar
from pymatgen.analysis.energy_models import EwaldElectrostaticModel
abc=[]
data = &#123;&quot;Ca&quot;:-6, &quot;H&quot;:1&#125;
for i in range(1,5034):
    m = Structure.from_file(&#39;%d.vasp&#39;%i)
    m.add_oxidation_state_by_element(data)
    energy = EwaldElectrostaticModel().get_energy(m)
    abc.append(energy)
with open(&#39;energy.dat&#39;, &#39;w&#39;) as f:
    for item in abc:
        f.write(str(item) + &#39;\n&#39;)
    
</code></pre>
<h1 id="5-sqs"><a href="#5-sqs" class="headerlink" title="5. sqs"></a>5. sqs</h1><h2 id="1-前处理"><a href="#1-前处理" class="headerlink" title="1.前处理"></a>1.前处理</h2><h3 id="1-转换rndstr格式的结构"><a href="#1-转换rndstr格式的结构" class="headerlink" title="1. 转换rndstr格式的结构"></a><strong>1. 转换rndstr格式的结构</strong></h3><pre><code class="python">from pymatgen.core import Structure
structure = Structure.from_file(&quot;a.cif&quot;)
structure.to(filename=&#39;rndstr.in&#39;)
</code></pre>
<h3 id="2-提交多个ip的任务"><a href="#2-提交多个ip的任务" class="headerlink" title="2.提交多个ip的任务"></a><strong>2.提交多个ip的任务</strong></h3><pre><code class="shell">for i in $(seq 1 1 20)
do
cat &gt; sqs_$i.slurm &lt;&lt; liz
#!/bin/sh
#SBATCH -J analyze
#SBATCH -p xieyu
#SBATCH -N 1
#SBATCH -n 1
#SBATCH -w c0406


source activate liz

mcsqs -n=36 -ip=$i
liz
sbatch sqs_$i.slurm
done
#grep Objective_function bestcorr*.out|sort -n
</code></pre>
<h2 id="2-后处理"><a href="#2-后处理" class="headerlink" title="2. 后处理"></a>2. 后处理</h2><h3 id="1-提取bestcorr"><a href="#1-提取bestcorr" class="headerlink" title="1. 提取bestcorr"></a><strong>1. 提取bestcorr</strong></h3><pre><code class="shell">for i in $(seq 1 1 12)
do
tail -n 1 bestcorr.out &gt;&gt; corr.dat
done
</code></pre>
<h3 id="2-对多任务ip产生的best-out文件处理"><a href="#2-对多任务ip产生的best-out文件处理" class="headerlink" title="2.对多任务ip产生的best.out文件处理"></a><strong>2.对多任务ip产生的best.out文件处理</strong></h3><p>&#x3D;&#x3D;<strong>注意，数字前的空格会对结构在vesta中的显示产生影响</strong>&#x3D;&#x3D; </p>
<blockquote>
<p><strong>sqs2poscar文件在 同步空间&#x2F;计算脚本&#x2F;sqs处</strong></p>
</blockquote>
<pre><code class="shell">for i in $(seq 1 1 12)
do 
./sqs2poscar bestsqs$i.out
mv bestsqs$i.out-POSCAR $i.vasp
sed -i &#39;2s/.*/1/&#39; $i.vasp
sed -i &#39;3s/-10\.57524/ -10.57524/&#39; $i.vasp
done 
</code></pre>
<h3 id="3-检验相同的结构"><a href="#3-检验相同的结构" class="headerlink" title="3. 检验相同的结构"></a><strong>3. 检验相同的结构</strong></h3><pre><code class="python">import os
from pymatgen.core import Structure
from pymatgen.io.vasp.sets import batch_write_input, MPRelaxSet
from pymatgen.io.vasp.inputs import Poscar
standard_structures= []
for i in range(1,13):
    filename = &quot;&#123;&#125;.vasp&quot;.format(i)
    print(filename)
    structure = Structure.from_file(filename)
    standard_structures.append(structure)
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
groups = matcher.group_structures([d for d in standard_structures])  #这应该是个字典，把字典中的structure关键字提出来组成列表,groups里只剩下结构了

#structures = [d[&quot;structure&quot;] for d in standard_structures]
#print(&quot;%d structures returned.&quot; % len(structures))

#from pymatgen.io.vasp.inputs import Poscar
#n = 0
#for Cry_Str in structures:
    #print(Cry_Str)
#    Vasp_Str = Poscar(Cry_Str)
#    n = n+1
#    Vasp_Str.write_file(&#39;%d.vasp&#39;%n)
print(len(groups))
groupstructures = [x[0] for x in groups]  # 将嵌套列表的每个列表的第一个元素提取出来做成一个新列表
from pymatgen.io.vasp.inputs import Poscar
n = 0
for Cry_Str in groupstructures:
    #print(Cry_Str)
    Vasp_Str = Poscar(Cry_Str)
    n = n+1
    Vasp_Str.write_file(&#39;%dnew.vasp&#39;%n)
#产生等差数列 for i in range(len(groups))
#提取出列举时计算的能量 energy = [x(&#39;energy&#39;) for x in standard_structures]
#验证同一类群下的结构静电能相等
#suoyoua = [x for x in groups[0]]
#for cry in suoyoua:
#   energy = EwaldElectrostaticModel().get_energy(cry)
#  print(energy)
#验证输出的顺序是按照能量升序进行的
#suoyou1 = [x[0] for x in groups]
#for cry in suoyou1:
#    energy = EwaldElectrostaticModel().get_energy(cry)
#    print(energy)
</code></pre>
<h1 id="6-暴力枚举"><a href="#6-暴力枚举" class="headerlink" title="6.暴力枚举"></a>6.暴力枚举</h1><h2 id="1-枚举脚本"><a href="#1-枚举脚本" class="headerlink" title="1.枚举脚本"></a>1.枚举脚本</h2><p>在替换多种元素时，可以只替换一种元素，然后在生成的poscar中直接修改元素种类和个数</p>
<pre><code class="python">#!/usr/bin/python2
#Change the format of crystal structure
#python Str_Format.py infile outfile
try:
    from pymatgen.core.structure          import IStructure, Structure
    from pymatgen.io.vasp.inputs          import Poscar
except:
    print (&#39;You should install pymatgen first.&#39;)
    exit(0)

from monty.io import zopen
import random
import sys,os,time
import numpy as np

def readvasp(infile):
    with zopen(infile, &quot;rt&quot;) as f:
        contents = f.read()

    Cry_Str = IStructure.from_str(contents, fmt=&quot;poscar&quot;)
    lattice = Cry_Str.lattice
    species = [ x.species.elements[0] for x in Cry_Str.sites ]
    coords  = [ x.coords for x in Cry_Str.sites ]
    Cry_Str = Structure(lattice,species,coords,coords_are_cartesian=True)
    return Cry_Str

def replace(Cry_Str, replace_list, outfile):
    natom = len(Cry_Str.sites)
    for ele in replace_list:
        for i in ele[0]:
            Cry_Str.replace(i,ele[1])

    Cry_Str.sort()
    Vasp_Str = Poscar(Cry_Str)
    Vasp_Str.write_file(outfile)
    return


if __name__ == &#39;__main__&#39;:
    instr = &#39;a.vasp&#39;

    Cry_Str = readvasp(instr)
    #modify
    Cry_Str.make_supercell([1,1,1])
    for i in range(10):

        Cry_tp = Cry_Str.copy()
        re_index = np.arange(28,82)
        np.random.shuffle(re_index)
        re_index1 = re_index[:3]
        re_index2 = re_index[7:9]



        replace_list = [ [re_index1, &#39;B&#39;],[re_index2,&#39;O&#39;] ]

        tmp = &#39;%d.vasp&#39;%i
        replace(Cry_tp, replace_list, tmp)
</code></pre>
<h2 id="2-多任务脚本-检验相同结构"><a href="#2-多任务脚本-检验相同结构" class="headerlink" title="2. 多任务脚本 检验相同结构"></a>2. 多任务脚本 检验相同结构</h2><pre><code class="shell">for i in $(seq 0 1000 25000)
do 
cat &gt; job_$i.sh &lt;&lt; liz
#!/bin/sh
#SBATCH -J liz
#SBATCH -p xieyu
#SBATCH -N 1
#SBATCH -n 1
#SBATCH -w c0607
source activate liz

python jianyan_$i.py

liz
cat &gt; jianyan_$i.py &lt;&lt; liz
import os
from pymatgen.core import Structure
from pymatgen.io.vasp.sets import batch_write_input, MPRelaxSet
from pymatgen.io.vasp.inputs import Poscar
standard_structures= []
dir=&#39;/work/home/liz/workspace/D-LuNH-sqs/2-Lu-25电子/1-暴力破解/3-zuhe&#39;
for i in range($i,$((i+1000))):
    filename = &quot;&#123;&#125;.vasp&quot;.format(i)
    if not os.path.exists(os.path.join(dir,filename)):
        continue
    print(filename)
    structure = Structure.from_file(filename)
    standard_structures.append(structure)
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
groups = matcher.group_structures([d for d in standard_structures])
print(len(groups))
groupstructures = [x[0] for x in groups]  # 将嵌套列表的每个列表的第一个元素提取出来做成一个新列表
from pymatgen.io.vasp.inputs import Poscar
n = $i
for Cry_Str in groupstructures:
    #print(Cry_Str)
    Vasp_Str = Poscar(Cry_Str)
    n = n+1
    Vasp_Str.write_file(&#39;%dnew.vasp&#39;%n)
liz
sbatch job_$i.sh
done
</code></pre>
<h2 id="3-改良版"><a href="#3-改良版" class="headerlink" title="3.改良版"></a>3.改良版</h2><h3 id="1-限定最小距离"><a href="#1-限定最小距离" class="headerlink" title="1.限定最小距离"></a>1.限定最小距离</h3><pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure

strua = Structure.from_file(&quot;a.vasp&quot;)
#print(strua.sites[re_index1[1]])
#print(strua.get_distance(re_index1[0],re_index1[1]))

#a_frac_coords=strua.sites[re_index1[0]].frac_coords
#b_frac_coords=strua.sites[re_index1[1]].frac_coords
#c_frac_coords=strua.sites[re_index1[2]].frac_coords
#arr1=a_frac_coords-b_frac_coords
#arr1[arr1 &gt;= 0.5] = 1
#arr1[arr1 &lt;= -0.5] = -1
#arr1[np.logical_and(arr1 &gt; -0.5, arr1 &lt; 0.5)] = 0
#print(arr1)
#strua.sites[re_index1[1]].frac_coords +=arr1
#print(strua.sites[re_index1[1]])
#print(strua.get_distance(re_index1[0],re_index1[1]))
#diff1=np.sqrt(np.dot(strua.sites[re_index1[0]].coords-strua.sites[re_index1[1]].coords,strua.sites[re_index1[0]].coords-strua.sites[re_index1[1]].coords))
#if diff1&lt;3
#print(strua.sites[re_index1[1]].frac_coords)
#h2=a_frac_coords-c_frac_coords
#h3=b_frac_coords-c_frac_coords
#lattice = strua.lattice
#lattice_matrix =np.array(lattice.matrix)
#coords  = [ x.coords for x in strua.sites ]
#矩阵乘法 np.dot(A,B)
#矩阵改变维数 A.reshape(1,3)
#sites从0开始
#np.dot(a,a)求平方和
#strua.sites[0].coords 输出笛卡尔坐标 .frac_coords分数坐标
#print(np.sqrt(np.dot(strua.sites[70].coords-strua.sites[71].coords,strua.sites[70].coords-strua.sites[71].coords)))
#求两个原子的距离
for i in range(20):
    Cry_tp = strua.copy()
    re_index = np.arange(27,82)
    np.random.shuffle(re_index)
    re_index1 = re_index[:3]
    replace_list = [ [re_index1, &#39;N&#39;] ]
    if Cry_tp.get_distance(re_index1[0],re_index1[1])&lt;3.6 or Cry_tp.get_distance(re_index1[0],re_index1[2])&lt;3.6 or Cry_tp.get_distance(re_index1[1],re_index1[2])&lt;3.6:
        continue
    for ele in replace_list:
        for j in ele[0]:
            Cry_tp.replace(j,ele[1])
    Cry_tp.sort()
    Vasp_Str = Poscar(Cry_tp)
    Vasp_Str.write_file(&#39;%d.vasp&#39;%i)
</code></pre>
<h3 id="2-限定最小距离且保证替代发生在不同的位置"><a href="#2-限定最小距离且保证替代发生在不同的位置" class="headerlink" title="2.限定最小距离且保证替代发生在不同的位置"></a>2.限定最小距离且保证替代发生在不同的位置</h3><pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure

strua = Structure.from_file(&quot;a.vasp&quot;)
#print(strua.sites[re_index1[1]])
#print(strua.get_distance(re_index1[0],re_index1[1]))

#a_frac_coords=strua.sites[re_index1[0]].frac_coords
#b_frac_coords=strua.sites[re_index1[1]].frac_coords
#c_frac_coords=strua.sites[re_index1[2]].frac_coords
#arr1=a_frac_coords-b_frac_coords
#arr1[arr1 &gt;= 0.5] = 1
#arr1[arr1 &lt;= -0.5] = -1
#arr1[np.logical_and(arr1 &gt; -0.5, arr1 &lt; 0.5)] = 0
#print(arr1)
#strua.sites[re_index1[1]].frac_coords +=arr1
#print(strua.sites[re_index1[1]])
#print(strua.get_distance(re_index1[0],re_index1[1]))
#diff1=np.sqrt(np.dot(strua.sites[re_index1[0]].coords-strua.sites[re_index1[1]].coords,strua.sites[re_index1[0]].coords-strua.sites[re_index1[1]].coords))
#if diff1&lt;3
#print(strua.sites[re_index1[1]].frac_coords)
#h2=a_frac_coords-c_frac_coords
#h3=b_frac_coords-c_frac_coords
#lattice = strua.lattice
#lattice_matrix =np.array(lattice.matrix)
#coords  = [ x.coords for x in strua.sites ]
#矩阵乘法 np.dot(A,B)
#矩阵改变维数 A.reshape(1,3)
#sites从0开始
#np.dot(a,a)求平方和
#strua.sites[0].coords 输出笛卡尔坐标 .frac_coords分数坐标
#print(np.sqrt(np.dot(strua.sites[70].coords-strua.sites[71].coords,strua.sites[70].coords-strua.sites[71].coords)))
#求两个原子的距离
for i in range(20):
    Cry_tp = strua.copy()
    re_index = np.arange(27,108)
    np.random.shuffle(re_index)
    re_index1 = re_index[:3]
    if all(27&lt;= num &lt;=53 for num in re_index1):
        continue
    if all(54&lt;= num &lt;=107 for num in re_index1):
        continue
    replace_list = [ [re_index1, &#39;N&#39;] ]
    if Cry_tp.get_distance(re_index1[0],re_index1[1])&lt;3.6 or Cry_tp.get_distance(re_index1[0],re_index1[2])&lt;3.6 or Cry_tp.get_distance(re_index1[1],re_index1[2])&lt;3.6:
        continue
    for ele in replace_list:
        for j in ele[0]:
            Cry_tp.replace(j,ele[1])
    Cry_tp.sort()
    Vasp_Str = Poscar(Cry_tp)
    Vasp_Str.write_file(&#39;%d.vasp&#39;%i)
</code></pre>
<h3 id="3-限定空间群"><a href="#3-限定空间群" class="headerlink" title="3.限定空间群"></a>3.限定空间群</h3><pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure
from pymatgen.symmetry.analyzer import SpacegroupAnalyzer
from pymatgen.analysis.structure_matcher import StructureMatcher
strua = Structure.from_file(&quot;a.vasp&quot;)
#print(strua.sites[re_index1[1]])
#print(strua.get_distance(re_index1[0],re_index1[1]))

#a_frac_coords=strua.sites[re_index1[0]].frac_coords
#b_frac_coords=strua.sites[re_index1[1]].frac_coords
#c_frac_coords=strua.sites[re_index1[2]].frac_coords
#arr1=a_frac_coords-b_frac_coords
#arr1[arr1 &gt;= 0.5] = 1
#arr1[arr1 &lt;= -0.5] = -1
#arr1[np.logical_and(arr1 &gt; -0.5, arr1 &lt; 0.5)] = 0
#print(arr1)
#strua.sites[re_index1[1]].frac_coords +=arr1
#print(strua.sites[re_index1[1]])
#print(strua.get_distance(re_index1[0],re_index1[1]))
#diff1=np.sqrt(np.dot(strua.sites[re_index1[0]].coords-strua.sites[re_index1[1]].coords,strua.sites[re_index1[0]].coords-strua.sites[re_index1[1]].coords))
#if diff1&lt;3
#print(strua.sites[re_index1[1]].frac_coords)
#h2=a_frac_coords-c_frac_coords
#h3=b_frac_coords-c_frac_coords
#lattice = strua.lattice
#lattice_matrix =np.array(lattice.matrix)
#coords  = [ x.coords for x in strua.sites ]
#矩阵乘法 np.dot(A,B)
#矩阵改变维数 A.reshape(1,3)
#sites从0开始
#np.dot(a,a)求平方和
#strua.sites[0].coords 输出笛卡尔坐标 .frac_coords分数坐标
#print(np.sqrt(np.dot(strua.sites[70].coords-strua.sites[71].coords,strua.sites[70].coords-strua.sites[71].coords)))
#求两个原子的距离
total_structure=[]
for i in range(200000):
    Cry_tp = strua.copy()
    re_index = np.arange(0,96)
    np.random.shuffle(re_index)
    re_index1 = re_index[:4]
    Cry_tp.remove_sites(re_index1)
    a=SpacegroupAnalyzer(Cry_tp).get_space_group_number()
    if a&lt;= 140:
      continue
    print(i)
    print(a)
    Vasp_Str = Poscar(Cry_tp)
    Vasp_Str.write_file(&#39;%d.vasp&#39;%i)
    total_structure.append(Cry_tp)
matcher = StructureMatcher()
groups = matcher.group_structures([d for d in total_structure])
groupstructures = [x[0] for x in groups]
from pymatgen.io.vasp.inputs import Poscar
n = 10001
for Cry_Str in groupstructures:
    #print(Cry_Str)
    Vasp_Str = Poscar(Cry_Str)
    n = n+1
    Vasp_Str.write_file(&#39;%dnew.vasp&#39;%n)
</code></pre>
<h3 id="4-多任务做改良版"><a href="#4-多任务做改良版" class="headerlink" title="4.多任务做改良版"></a>4.多任务做改良版</h3><pre><code class="shell">for i in $(seq 1 100 10100)
do
cat &gt; baoli_$i.py &lt;&lt; liz
from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure
from pymatgen.symmetry.analyzer import SpacegroupAnalyzer
from pymatgen.analysis.structure_matcher import StructureMatcher
strua = Structure.from_file(&quot;a.vasp&quot;)
#print(strua.sites[re_index1[1]])
#print(strua.get_distance(re_index1[0],re_index1[1]))

#a_frac_coords=strua.sites[re_index1[0]].frac_coords
#b_frac_coords=strua.sites[re_index1[1]].frac_coords
#c_frac_coords=strua.sites[re_index1[2]].frac_coords
#arr1=a_frac_coords-b_frac_coords
#arr1[arr1 &gt;= 0.5] = 1
#arr1[arr1 &lt;= -0.5] = -1
#arr1[np.logical_and(arr1 &gt; -0.5, arr1 &lt; 0.5)] = 0
#print(arr1)
#strua.sites[re_index1[1]].frac_coords +=arr1
#print(strua.sites[re_index1[1]])
#print(strua.get_distance(re_index1[0],re_index1[1]))
#diff1=np.sqrt(np.dot(strua.sites[re_index1[0]].coords-strua.sites[re_index1[1]].coords,strua.sites[re_index1[0]].coords-strua.sites[re_index1[1]].coords))
#if diff1&lt;3
#print(strua.sites[re_index1[1]].frac_coords)
#h2=a_frac_coords-c_frac_coords
#h3=b_frac_coords-c_frac_coords
#lattice = strua.lattice
#lattice_matrix =np.array(lattice.matrix)
#coords  = [ x.coords for x in strua.sites ]
#矩阵乘法 np.dot(A,B)
#矩阵改变维数 A.reshape(1,3)
#sites从0开始
#np.dot(a,a)求平方和
#strua.sites[0].coords 输出笛卡尔坐标 .frac_coords分数坐标
#print(np.sqrt(np.dot(strua.sites[70].coords-strua.sites[71].coords,strua.sites[70].coords-strua.sites[71].coords)))
#求两个原子的距离
total_structure=[]
for i in range(20000):
    Cry_tp = strua.copy()
    re_index = np.arange(0,96)
    np.random.shuffle(re_index)
    re_index1 = re_index[:4]
    Cry_tp.remove_sites(re_index2)
    a=SpacegroupAnalyzer(Cry_tp).get_space_group_number()
    if a&lt;= 140:
      continue
    print(i)
    print(a)
    Vasp_Str = Poscar(Cry_tp)
    Vasp_Str.write_file(&#39;%d.vasp&#39;%i)
    total_structure.append(Cry_tp)
matcher = StructureMatcher()
groups = matcher.group_structures([d for d in total_structure])
groupstructures = [x[0] for x in groups]
from pymatgen.io.vasp.inputs import Poscar
n = $((i))
for Cry_Str in groupstructures:
    #print(Cry_Str)
    Vasp_Str = Poscar(Cry_Str)
    n = n+1
    Vasp_Str.write_file(&#39;%dnew.vasp&#39;%n)
liz
done
</code></pre>
<h2 id="4-使用枚举方法处理蓝钻结构"><a href="#4-使用枚举方法处理蓝钻结构" class="headerlink" title="4.使用枚举方法处理蓝钻结构"></a>4.使用枚举方法处理蓝钻结构</h2><blockquote>
<ol>
<li>这是第一次系统使用暴力枚举法产生结构，其中，由于pymatgen用于计算ewald加和的程序太慢，使用了组内ARES中用于计算ewald能量的脚本ewalds.x</li>
<li>一共有两种方式产生，一种是完全随机的，另一种相当于对整个分子的替代（使用了pymatgen中找原子附近其他原子的功能</li>
<li>脚本、流程都经过了反复的改进</li>
</ol>
</blockquote>
<h3 id="1-完全随机的方法（完全解放双手了）"><a href="#1-完全随机的方法（完全解放双手了）" class="headerlink" title="1.完全随机的方法（完全解放双手了）"></a>1.完全随机的方法（完全解放双手了）</h3><blockquote>
<ol>
<li>一共需要四个文件</li>
</ol>
<p>a.vasp </p>
<p>multitask.sh</p>
<p>ewalds.x </p>
<p>changeatom.py:用于产生随机的结构</p>
<p>以及一个后处理文件</p>
<p>get-all.sh</p>
<p>2.分为三级别目录</p>
<p>一级： 1-21</p>
<p>二级： 1-48</p>
<p>三级： 1-random  2-low ；其中 1-random是随机产生的结构，并计算了静电能，2-low是能量最低的前30个结构以及对应的能量</p>
<ol start="3">
<li>通过设置不同的价态，可以得到不同种原子靠近或者远离的结构</li>
</ol>
</blockquote>
<p>流程(产生1000万个随机结构）：</p>
<h4 id="1-提任务"><a href="#1-提任务" class="headerlink" title="1. 提任务"></a>1. 提任务</h4><p><code>for i in $(seq 1 1 10);do mkdir $i;cp a.vasp ewalds.x multitask.sh changeatom.py $i;cd $i; ./multitask.sh ;cd ..;done</code></p>
<h4 id="2-changeatom-py"><a href="#2-changeatom-py" class="headerlink" title="2. changeatom.py"></a>2. <code>changeatom.py</code></h4><p>需要更改的地方是产生结构的数量、以及替换的种类和位置</p>
<pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure
from pymatgen.analysis.energy_models import EwaldElectrostaticModel
strua = Structure.from_file(&quot;a.vasp&quot;)
#需要考虑
for i in range(10000):
    print(i)
    Cry_tp = strua.copy()
    re_index = np.arange(0,512)
    np.random.shuffle(re_index)
    re_index1 = re_index[:7]
    re_index2 = re_index[7:9]
    replace_list = [ [re_index1, &#39;B&#39;],[re_index2,&#39;O&#39;] ]
    for ele in replace_list:
        for j in ele[0]:
            Cry_tp.replace(j,ele[1])
    Cry_tp.sort()
    Vasp_Str = Poscar(Cry_tp)
    Vasp_Str.write_file(&#39;%d.vasp&#39;%i)
</code></pre>
<h4 id="3-multitask-sh-做一些文件夹-，提交产生结构的任务，提交计算ewald能量的任务"><a href="#3-multitask-sh-做一些文件夹-，提交产生结构的任务，提交计算ewald能量的任务" class="headerlink" title="3. multitask.sh :做一些文件夹 ，提交产生结构的任务，提交计算ewald能量的任务"></a>3. <code>multitask.sh</code> :做一些文件夹 ，提交产生结构的任务，提交计算ewald能量的任务</h4><p>需要注意的是，使用ewalds.x需要先source环境</p>
<pre><code class="shell">for i in $(seq 1 1 48)
do
mkdir $i
cd $i
mkdir 1-random 2-low
cd ..
cp changeatom.py $i/1-random
cp ewalds.x $i/1-random
cp a.vasp $i/1-random
cd $i/1-random
cat &gt; job.slurm &lt;&lt; liz
#!/bin/sh
#SBATCH  --job-name=opt 
#SBATCH  --output=log.out.%j
#SBATCH  --error=log.err.%j
#SBATCH  --partition=xieyu
#SBATCH  --nodes=1
#SBATCH  --ntasks=1
#SBATCH  --cpus-per-task=1
source activate liz

python changeatom.py &gt; log 2&gt;&amp;1

liz

sbatch job.slurm
cd ..
cd ..
done



sleep 1m
for i in $(seq 1 1 48)
do
cd $i/1-random
cat &gt; ewaldenergy.slurm &lt;&lt;liz2
#!/bin/sh
#SBATCH  --job-name=opt 
#SBATCH  --output=log.out.%j
#SBATCH  --error=log.err.%j
#SBATCH  --partition=xieyu
#SBATCH  --nodes=1
#SBATCH  --ntasks=1
#SBATCH  --cpus-per-task=1
source /work/env/intel2020

for j in \$(seq 0 1 9999);
do
echo -n \$j.vasp &gt;&gt; energy.dat
./ewalds.x \$j.vasp 3 5 -2 &gt;&gt; energy.dat
done
sort -k3n energy.dat &gt; ewaldenergy.dat
head -n 30 ewaldenergy.dat &gt; ../2-low/ewaldenergy.dat
head -n 30 ewaldenergy.dat | awk &#39;&#123;print \$1&#125;&#39; | while read -r line; do
cp &quot;\$line&quot; ../2-low/
done
liz2
sbatch ewaldenergy.slurm
cd ..
cd ..
done
</code></pre>
<h4 id="4-后处理文件-get-all-sh-提取能量最低的结构"><a href="#4-后处理文件-get-all-sh-提取能量最低的结构" class="headerlink" title="4. 后处理文件 get-all.sh   提取能量最低的结构"></a>4. 后处理文件 <code>get-all.sh </code>  提取能量最低的结构</h4><pre><code class="shell">rm all-sorted.dat
for i in $(seq 1 1 21)
do
cd $i
for j in $(seq 1 1 48)
do
cd $j
cd 2-low
#awk -v var=&quot;$j&quot; &#39;&#123; $1 = var &quot; &quot; $1 &#125; 1&#39; ewaldenergy.dat &gt; data.dat
awk -v var=&quot;$i&quot; -v var2=&quot;$j&quot; &#39;&#123; $1 = var &quot; &quot;  var2 &quot; &quot; $1 &#125; 1&#39; ewaldenergy.dat &gt; data.dat
cat data.dat &gt;&gt; ../../data.dat
rm data.dat
cd ..
cd ..
done
cd ..
done
for h in $(seq 1 1 21)
do
cat $h/data.dat &gt;&gt; ./all.dat
rm $h/data.dat
done
sort -k5n all.dat  &gt; all-sorted.dat
rm all.dat

echo &#39;sucess1&#39;
# 设置计数器
count=1
rm -r all
mkdir all
# 读取包含三列信息的文件
head -n 100 all-sorted.dat | while read -r line; do
  # 提取大目录、小目录和文件名
  directory=$(echo &quot;$line&quot; | awk &#39;&#123;print $1&#125;&#39;)
  subdirectory=$(echo &quot;$line&quot; | awk &#39;&#123;print $2&#125;&#39;)
  filename=$(echo &quot;$line&quot; | awk &#39;&#123;print $3&#125;&#39;)

  # 构建目标文件名
  target_filename=&quot;$&#123;count&#125;_$&#123;directory&#125;_$&#123;subdirectory&#125;_$&#123;filename&#125;.vasp&quot;

  # 复制文件到当前目录并重命名
  cp &quot;$&#123;directory&#125;/$&#123;subdirectory&#125;/2-low/$&#123;filename&#125;&quot; &quot;./all/$&#123;target_filename&#125;&quot;

  # 增加计数器
  ((count++))
done
echo &#39;sucess2&#39;
</code></pre>
<h3 id="2-替换为B-3O和B-4O构型的方法（还需要手动做一些流程）"><a href="#2-替换为B-3O和B-4O构型的方法（还需要手动做一些流程）" class="headerlink" title="2. 替换为B_3O和B_4O构型的方法（还需要手动做一些流程）"></a>2. 替换为B_3O和B_4O构型的方法（还需要手动做一些流程）</h3><blockquote>
<ol>
<li>替换为特定构型的方法利用了pymatgen中寻找相邻原子的方法，基本的流程是</li>
</ol>
<p>  先随机找两个可能替换氧原子的位置</p>
<p>  检验氧原子的距离是否符合要求（在本例中设定两个氧原子不要靠的太近，以免产生O-B-O键</p>
<p>  查找两个位置附近的原子的位置</p>
<p>  替换附近原子为B</p>
<p>  检验相同结构</p>
<p>  计算静电能</p>
<ol start="2">
<li>另一套流程是：(下文的流程)</li>
</ol>
<p>  先随机替换氧的位置</p>
<p>  检验氧原子距离</p>
<p>  检验氧的相同结构</p>
<p>  替换B</p>
<p>  检验相同结构</p>
<p>  计算静电能</p>
<p>  这样流程的好处是可以大大减少产生结构的数量，缺点是不能把算能量的步骤集成</p>
<ol start="3">
<li>值得注意的一点是，在这次的产生结构的脚本中，是可以枚举O的所有可能情况的，所以最终结果是枚举的</li>
</ol>
</blockquote>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20230612211658194.png" alt="image-20230612211658194"></p>
<h4 id="1-枚举氧的位置"><a href="#1-枚举氧的位置" class="headerlink" title="1. 枚举氧的位置"></a>1. 枚举氧的位置</h4><pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure
from pymatgen.analysis.energy_models import EwaldElectrostaticModel
from itertools import combinations
strua = Structure.from_file(&quot;a.vasp&quot;)
hh=np.arange(512)
combinations_list1 = list(combinations(hh, 2))
print(len(combinations_list1))
combinations_array1 = np.array(combinations_list1)
numberbb = 0
numberaa = 0
for ar in combinations_array1:
    ara=strua.copy()
    numberbb +=1
    print(numberbb)
    if ara.get_distance(ar[0],ar[1])&gt;11 or ara.get_distance(ar[0],ar[1])&lt;3:
        continue
    numberaa +=1
    replace_list = [[ar,&#39;O&#39;] ]
    for ele in replace_list:
        for j in ele[0]:
            ara.replace(j,ele[1])
    ara.sort()
    Vasp_Str = Poscar(ara)
    Vasp_Str.write_file(&#39;%d.vasp&#39;% numberaa)    
</code></pre>
<h4 id="2-检验相同的结构"><a href="#2-检验相同的结构" class="headerlink" title="2. 检验相同的结构"></a>2. 检验相同的结构</h4><p>需要多次分批次检验，否则太慢了，有一个多任务脚本和一个py脚本</p>
<p>在不同文件夹中多次进行多脚本计算，会比较方便</p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20230612172111471.png" alt="image-20230612172111471"></p>
<p><code>cp  ../*new.vasp ./1-first</code></p>
<p>第一次检验</p>
<pre><code class="shell">for i in $(seq 0 1000 130000)
do
cat &gt; job_$i.sh &lt;&lt; liz
#!/bin/sh
#SBATCH  --job-name=opt 
#SBATCH  --output=log.out.%j
#SBATCH  --error=log.err.%j
#SBATCH  --partition=xieyu
#SBATCH  --nodes=1
#SBATCH  --ntasks=1
#SBATCH  --cpus-per-task=1
source activate liz

python jianyan_$i.py &gt;&gt; jianyan_$i.dat 2&gt;&amp;1

liz
cat &gt; jianyan_$i.py &lt;&lt; liz
import os
from pymatgen.core import Structure
from pymatgen.io.vasp.sets import batch_write_input, MPRelaxSet
from pymatgen.io.vasp.inputs import Poscar
standard_structures= []
dir=&#39;/work/home/liz/workspace/3-temporary-duty/2-blue/4-zhengshi/3-B3O-B4O/4-xinzuo/1-替换O/1-str&#39;
for j in range($i,$((i+1000))):
    filename = &quot;&#123;&#125;.vasp&quot;.format(j)
    filepath = os.path.join(dir, filename)
    if not os.path.exists(filepath):
        continue
    print(filename)
    structure = Structure.from_file(filepath)
    standard_structures.append(structure)
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
groups = matcher.group_structures([d for d in standard_structures])
print(len(groups))
groupstructures = [x[0] for x in groups]  # 将嵌套列表的每个列表的第一个元素提取出来做成一个新列表
from pymatgen.io.vasp.inputs import Poscar
n = $i
for Cry_Str in groupstructures:
    #print(Cry_Str)
    Vasp_Str = Poscar(Cry_Str)
    n = n+1
    Vasp_Str.write_file(&#39;%dnew.vasp&#39;%n)
liz
sbatch job_$i.sh
done
</code></pre>
<p>第二次检验</p>
<pre><code class="python">for i in $(seq 0 10000 130000)
do
cat &gt; job_$i.sh &lt;&lt; liz
#!/bin/sh
#SBATCH  --job-name=opt 
#SBATCH  --output=log.out.%j
#SBATCH  --error=log.err.%j
#SBATCH  --partition=xieyu
#SBATCH  --nodes=1
#SBATCH  --ntasks=1
#SBATCH  --cpus-per-task=1
source activate liz

python jianyan_$i.py &gt;&gt; jianyan_$i.dat 2&gt;&amp;1

liz
cat &gt; jianyan_$i.py &lt;&lt; liz
import os
from pymatgen.core import Structure
from pymatgen.io.vasp.sets import batch_write_input, MPRelaxSet
from pymatgen.io.vasp.inputs import Poscar
standard_structures= []
dir=&#39;/work/home/liz/workspace/3-temporary-duty/2-blue/4-zhengshi/3-B3O-B4O/4-xinzuo/2-去除相同结构/1-first&#39;
for j in range($i,$((i+11000))):
    filename = &quot;&#123;&#125;new.vasp&quot;.format(j)
    filepath = os.path.join(dir, filename)
    if not os.path.exists(filepath):
        continue
    print(filename)
    structure = Structure.from_file(filepath)
    standard_structures.append(structure)
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
groups = matcher.group_structures([d for d in standard_structures])
print(len(groups))
groupstructures = [x[0] for x in groups]  # 将嵌套列表的每个列表的第一个元素提取出来做成一个新列表
from pymatgen.io.vasp.inputs import Poscar
n = $i
for Cry_Str in groupstructures:
    #print(Cry_Str)
    Vasp_Str = Poscar(Cry_Str)
    n = n+1
    Vasp_Str.write_file(&#39;%dnew.vasp&#39;%n)
liz
sbatch job_$i.sh
done      
</code></pre>
<p>最后一步的检验</p>
<pre><code class="python">import os
from pymatgen.core import Structure
from pymatgen.io.vasp.sets import batch_write_input, MPRelaxSet
from pymatgen.io.vasp.inputs import Poscar
standard_structures= []
dir=&#39;/work/home/liz/workspace/3-temporary-duty/2-blue/4-zhengshi/3-B3O-B4O/4-xinzuo/2-去除相同结构/2-new&#39;
for j in range(124000):
    filename = &quot;&#123;&#125;new.vasp&quot;.format(j)
    filepath = os.path.join(dir, filename)
    if not os.path.exists(filepath):
        continue
    print(filename)
    structure = Structure.from_file(filepath)
    standard_structures.append(structure)
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
groups = matcher.group_structures([d for d in standard_structures])
print(len(groups))
groupstructures = [x[0] for x in groups]  # 将嵌套列表的每个列表的第一个元素提取出来做成一个新列表
from pymatgen.io.vasp.inputs import Poscar
n = 0
for Cry_Str in groupstructures:
    #print(Cry_Str)
    Vasp_Str = Poscar(Cry_Str)
    n = n+1
    Vasp_Str.write_file(&#39;%dnew.vasp&#39;%n)
    
    
</code></pre>
<h4 id="3-替换B原子"><a href="#3-替换B原子" class="headerlink" title="3. 替换B原子"></a>3. 替换B原子</h4><blockquote>
<p>先替换B4，再替换B3</p>
</blockquote>
<pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure
from pymatgen.analysis.energy_models import EwaldElectrostaticModel
from itertools import combinations
dir=&#39;/work/home/liz/workspace/3-temporary-duty/2-blue/4-zhengshi/3-B3O-B4O/4-xinzuo/2-去除相同结构/2-new&#39;
counter = 0
for j in range(124000):
    filename = &quot;&#123;&#125;new.vasp&quot;.format(j)
    filepath = os.path.join(dir, filename)
    if not os.path.exists(filepath):
        continue
    print(filename)
    structure = Structure.from_file(filepath)
    o_indices = [i for i, site in enumerate(structure) if site.specie.name == &quot;O&quot;]
    o_array = np.array(o_indices)
    ara=structure.copy()
    list1=ara.get_neighbors(ara[o_array[0]], r=2.0)
    list2=ara.get_neighbors(ara[o_array[1]], r=2.0)
    list1index=np.array([site.index for site in list1])
    list2index=np.array([site.index for site in list2])

    replace_list = [ [list1index, &#39;B&#39;] ]
    for ele in replace_list:
        for j in ele[0]:
            ara.replace(j,ele[1])
    combinations_list = list(combinations(list2index, 3))
    combinations_array = np.array(combinations_list)
    for br in combinations_array:
        counter += 1
        brb=ara.copy()
        replace_listara = [ [br, &#39;B&#39;] ]
        for ele in replace_listara:
           for j in ele[0]:
                 brb.replace(j,ele[1])
        brb.sort()
        Vasp_Str = Poscar(brb)
        Vasp_Str.write_file(&#39;%d.vasp&#39;% counter)
        print(counter)
</code></pre>
<h4 id="4-再次检验相同结构"><a href="#4-再次检验相同结构" class="headerlink" title="4. 再次检验相同结构"></a>4. 再次检验相同结构</h4><pre><code class="python">import os
from pymatgen.core import Structure
from pymatgen.io.vasp.sets import batch_write_input, MPRelaxSet
from pymatgen.io.vasp.inputs import Poscar
standard_structures= []
dir=&#39;/work/home/liz/workspace/3-temporary-duty/2-blue/4-zhengshi/3-B3O-B4O/4-xinzuo/3-替换B&#39;
for j in range(500):
    filename = &quot;&#123;&#125;.vasp&quot;.format(j)
    filepath = os.path.join(dir, filename)
    if not os.path.exists(filepath):
        continue
    print(filename)
    structure = Structure.from_file(filepath)
    standard_structures.append(structure)
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
groups = matcher.group_structures([d for d in standard_structures])
print(len(groups))
groupstructures = [x[0] for x in groups]  # 将嵌套列表的每个列表的第一个元素提取出来做成一个新列表
from pymatgen.io.vasp.inputs import Poscar
n = 0
for Cry_Str in groupstructures:
    #print(Cry_Str)
    Vasp_Str = Poscar(Cry_Str)
    n = n+1
    Vasp_Str.write_file(&#39;%dnew.vasp&#39;%n)
</code></pre>
<h4 id="5-计算能量，整理结构"><a href="#5-计算能量，整理结构" class="headerlink" title="5. 计算能量，整理结构"></a>5. 计算能量，整理结构</h4><pre><code class="shell">rm energy.dat
for i in $(seq 1 1 99);
do 
echo -n $&#123;i&#125;new.vasp &gt;&gt; energy.dat
./ewalds.x ../4-去除相同结构/$&#123;i&#125;new.vasp -1 0 2 &gt;&gt; energy.dat
done
sort -k3n energy.dat  &gt; sorted.dat
mkdir str
cd str
count=1
head -n 100 ../sorted.dat |while read -r line;do
filename=$(echo &quot;$line&quot; | awk &#39;&#123;print $1&#125;&#39;)
target_filename=$&#123;count&#125;.vasp
cp ../../4-去除相同结构/$&#123;filename&#125; ./$&#123;target_filename&#125;
count=$((count+ 1))
done
cd ..
</code></pre>
<h3 id="3-替换为B-2O和B-3O的方法"><a href="#3-替换为B-2O和B-3O的方法" class="headerlink" title="3. 替换为B_2O和B_3O的方法"></a>3. 替换为B_2O和B_3O的方法</h3><h4 id="1-枚举氧的结构和其他步骤"><a href="#1-枚举氧的结构和其他步骤" class="headerlink" title="1.枚举氧的结构和其他步骤"></a>1.枚举氧的结构和其他步骤</h4><h4 id="2-1-替换B原子-联合取代、完全枚举"><a href="#2-1-替换B原子-联合取代、完全枚举" class="headerlink" title="2-1. 替换B原子(联合取代、完全枚举)"></a>2-1. 替换B原子(联合取代、完全枚举)</h4><pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure
from pymatgen.analysis.energy_models import EwaldElectrostaticModel
from itertools import combinations
dir=&#39;/work/home/liz/workspace/3-temporary-duty/2-blue/4-zhengshi/1-512-B-7-O-2/3-B2O-B3O/1-O-结构&#39;
counter = 0
filename = &quot;1new.vasp&quot;
filepath = os.path.join(dir, filename)
print(filename)
structure = Structure.from_file(filepath)
o_indices = [i for i, site in enumerate(structure) if site.specie.name == &quot;O&quot;]
o_array = np.array(o_indices)
c_indices = [i for i, site in enumerate(structure) if site.specie.name == &quot;C&quot;]
c_array = np.array(c_indices)
ara=structure.copy()
list1=ara.get_neighbors(ara[o_array[0]], r=2.0)
list2=ara.get_neighbors(ara[o_array[1]], r=2.0)
list1index=np.array([site.index for site in list1])
list2index=np.array([site.index for site in list2])
combined_array = np.concatenate((list1index, list2index))
c_array2 = np.setdiff1d(c_array, combined_array)
combinations_list1 = list(combinations(list1index, 2))
combinations_list2 = list(combinations(list2index, 3))
combinations_list3 = list(combinations(c_array2, 2))
array1 = np.array(combinations_list1)
array2 = np.array(combinations_list2)
array3 = np.array(combinations_list3)
print(array3.shape)
print(len(array1))
print(len(array2))
print(len(array3))
for i in range(len(array1)):
    for j in range(len(array2)):
        for k in range(len(array3)):
            brb = ara.copy()
            counter += 1
           # print(array1[i])
           # print(array2[j])
           # print(array3[k])
            combined_array33=np.concatenate((array1[i], array2[j], array3[k]))
            replace_listara = [ [combined_array33, &#39;B&#39;] ]
            for ele in replace_listara:
                for m in ele[0]:
                   brb.replace(m,ele[1])
            brb.sort()
            Vasp_Str = Poscar(brb)
            Vasp_Str.write_file(&#39;%d.vasp&#39;% counter)
            print(counter)
</code></pre>
<h4 id="2-2-先分类再替代"><a href="#2-2-先分类再替代" class="headerlink" title="2-2 先分类再替代"></a>2-2 先分类再替代</h4><pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure
from pymatgen.analysis.energy_models import EwaldElectrostaticModel
from itertools import combinations
dir=&#39;/work/home/liz/workspace/3-temporary-duty/2-blue/4-zhengshi/1-512-B-7-O-2/3-B2O-B3O/1-O-结构&#39;
counter = 0
filename = &quot;1new.vasp&quot;
filepath = os.path.join(dir, filename)
print(filename)
structure = Structure.from_file(filepath)
o_indices = [i for i, site in enumerate(structure) if site.specie.name == &quot;O&quot;]
o_array = np.array(o_indices)
c_indices = [i for i, site in enumerate(structure) if site.specie.name == &quot;C&quot;]
c_array = np.array(c_indices)
ara=structure.copy()
list1=ara.get_neighbors(ara[o_array[0]], r=2.0)
list2=ara.get_neighbors(ara[o_array[1]], r=2.0)
list1index=np.array([site.index for site in list1])
list2index=np.array([site.index for site in list2])
combined_array = np.concatenate((list1index, list2index))
print(combined_array)
c_array2 = np.setdiff1d(c_array, combined_array)
combinations_list1 = list(combinations(list1index, 2))
combinations_list2 = list(combinations(list2index, 3))
combinations_list3 = list(combinations(c_array2, 2))
array1 = np.array(combinations_list1)
array2 = np.array(combinations_list2)
array3 = np.array(combinations_list3)
print(array3.shape)
print(len(array1))
print(len(array2))
print(len(array3))
standard_structures=[]
for i in range(len(array1)):
    for j in range(len(array2)):
#        for k in range(len(array3)):
            brb = ara.copy()
           # print(array1[i])
           # print(array2[j])
           # print(array3[k])
            combined_array33=np.concatenate((array1[i], array2[j]))
#            print(combined_array33)
            replace_listara = [ [combined_array33, &#39;B&#39;] ]
            for ele in replace_listara:
                for m in ele[0]:
                   brb.replace(m,ele[1])
            standard_structures.append(brb)
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
groups = matcher.group_structures([d for d in standard_structures])
print(len(groups))
groupstructures = [x[0] for x in groups]
for straaa in groupstructures:
    for k in range(len(array3)):
        copy2=straaa.copy()
        counter += 1
        replace_listara = [ [array3[k], &#39;B&#39;] ]
        for ele in replace_listara:
            for m in ele[0]:
                copy2.replace(m,ele[1])
        copy2.sort()
        Vasp_Str = Poscar(copy2)

        Vasp_Str.write_file(&#39;%d.vasp&#39;% counter)
        print(counter)
</code></pre>
<h4 id="2-3-每个结构随机取样特定数目的结构"><a href="#2-3-每个结构随机取样特定数目的结构" class="headerlink" title="2-3 每个结构随机取样特定数目的结构"></a>2-3 每个结构随机取样特定数目的结构</h4><pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure
from pymatgen.analysis.energy_models import EwaldElectrostaticModel
from itertools import combinations
dir=&#39;/work/home/liz/workspace/3-temporary-duty/2-blue/4-zhengshi/1-512-B-7-O-2/3-B2O-B3O/1-O-结构&#39;
counter = 0
for j in range(100):
    filename = &quot;&#123;&#125;new.vasp&quot;.format(j)
    filepath = os.path.join(dir, filename)
    if not os.path.exists(filepath):
        continue
    print(filename)
    structure = Structure.from_file(filepath)
    o_indices = [i for i, site in enumerate(structure) if site.specie.name == &quot;O&quot;]
    o_array = np.array(o_indices)
    c_indices = [i for i, site in enumerate(structure) if site.specie.name == &quot;C&quot;]
    c_array = np.array(c_indices)
    ara=structure.copy()
    list1=ara.get_neighbors(ara[o_array[0]], r=2.0)
    list2=ara.get_neighbors(ara[o_array[1]], r=2.0)
    list1index=np.array([site.index for site in list1])
    list2index=np.array([site.index for site in list2])
    combined_array = np.concatenate((list1index, list2index))
    c_array2 = np.setdiff1d(c_array, combined_array)
    combinations_list1 = list(combinations(list1index, 2))
    combinations_list2 = list(combinations(list2index, 3))
    combinations_list3 = list(combinations(c_array2, 2))
    array1 = np.array(combinations_list1)
    array2 = np.array(combinations_list2)
    array3 = np.array(combinations_list3)
    arr1=np.arange(len(array1))
    arr2=np.arange(len(array2))
    arr3=np.arange(len(array3))
    for ww in range(5000):
        np.random.shuffle(arr1)
        np.random.shuffle(arr2)
        np.random.shuffle(arr3)

        brb = ara.copy()
        counter += 1
        combined_array33=np.concatenate((array1[arr1[1]], array2[arr2[1]], array3[arr3[1]]))
        replace_listara = [ [combined_array33, &#39;B&#39;] ]
        for ele in replace_listara:
            for m in ele[0]:
               brb.replace(m,ele[1])
        brb.sort()
        Vasp_Str = Poscar(brb)
        Vasp_Str.write_file(&#39;%d.vasp&#39;% counter)
        print(counter)
</code></pre>
<h3 id="4-枚举-迭代器进行工作"><a href="#4-枚举-迭代器进行工作" class="headerlink" title="4.枚举+迭代器进行工作"></a>4.枚举+迭代器进行工作</h3><blockquote>
<p>可以是可以，但是现在太慢了，问题出在挨个去对比结构相似性，一个可行的方案是不断地细分到不同的结构特征集合，用结构特征做一个初筛</p>
</blockquote>
<pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure
from pymatgen.analysis.energy_models import EwaldElectrostaticModel
from itertools import combinations
import itertools
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
strua = Structure.from_file(&quot;a.vasp&quot;)
hh=np.arange(16,112)
combinations_generator = itertools.combinations(hh, 6)
numberbb = 0
numberaa = 0
all_structure=[]
for ar in combinations_generator:
    ara=strua.copy()
    numberbb +=1
    print(numberbb)
    remove_list = list(ar)
    ara.remove_sites(remove_list)
    ara.sort()
    match_found =False
    for aa in all_structure:
        if matcher.fit(ara,aa):
            match_found = True
            break
    if not match_found:
        all_structure.append(ara)
        print(&quot;%d structures &quot; %len(all_structure))
        
bb=0
for aa in all_structure:    
    bb +=1
    Vasp_Str = Poscar(aa)
    Vasp_Str.write_file(&#39;%d.vasp&#39;% bb)    
</code></pre>
<h3 id="5-枚举-使用静电能作为哈希值而不是fit"><a href="#5-枚举-使用静电能作为哈希值而不是fit" class="headerlink" title="5.枚举-使用静电能作为哈希值而不是fit"></a>5.枚举-使用静电能作为哈希值而不是fit</h3><blockquote>
<p>这一方法验证错误，因为两个不同的结构可能具有相同的静电能</p>
</blockquote>
<pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure
from pymatgen.analysis.energy_models import EwaldElectrostaticModel
from itertools import combinations
import itertools
from pymatgen.analysis.structure_matcher import StructureMatcher

strua = Structure.from_file(&quot;a.vasp&quot;)
hh = np.arange(16, 112)
combinations_generator = itertools.combinations(hh, 6)
data = &#123;&quot;Ca&quot;:6, &quot;H&quot;:-1&#125;
structure_dict = &#123;&#125;  # 用于存储已处理的结构
strua.add_oxidation_state_by_element(data)
print(strua)
aaa= 0
for ar in combinations_generator:
    aaa +=1
    print(aaa)
    ara = strua.copy()
    remove_list = list(ar)
    ara.remove_sites(remove_list)
    ara.sort()
    
    # 计算结构的哈希值作为字典的键
    ara_hash = EwaldElectrostaticModel().get_energy(ara)
    
    # 使用字典进行匹配检查
    if ara_hash not in structure_dict:
        structure_dict[ara_hash] = ara
        print(&quot;New structure added! Total structures: %d&quot; % len(structure_dict))


        

for Cry_Str in structure_dict.values():
    #print(Cry_Str)
    Vasp_Str = Poscar(Cry_Str)
    n = n+1
    Vasp_Str.write_file(&#39;%d.vasp&#39;%n)
    
    
</code></pre>
<h3 id="6-可以分步骤来做，先替换四个，再替换两个-！"><a href="#6-可以分步骤来做，先替换四个，再替换两个-！" class="headerlink" title="6. 可以分步骤来做，先替换四个，再替换两个 ！"></a>6. 可以分步骤来做，先替换四个，再替换两个 ！</h3><p>先替换1个，再替换一个，再替换一个，再，，，，这样一定是可以做的</p>
<p>从上往下试，直到能够使用程序做了就停止（95–92），如果从下往上试（92—95）会面临文件数太多的困难</p>
<h2 id="5-检验"><a href="#5-检验" class="headerlink" title="5.检验"></a>5.检验</h2><h3 id="1-逐个检验相似性"><a href="#1-逐个检验相似性" class="headerlink" title="1. 逐个检验相似性"></a>1. 逐个检验相似性</h3><pre><code class="python">import numpy as np
import sys,os,time
from pymatgen.core import Structure
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
all_str = []
for i in range(1,100000):
    file = f&#39;&#123;i&#125;.vasp&#39;
    if not os.path.exists(file):
       continue
    print(file)
    strua = Structure.from_file(file)
    match_found = False
    for str in all_str:
        if matcher.fit(strua,str):
           match_found = True
           break
    if not match_found:
        all_str.append(strua)
        print(&#39;%d structures&#39; % len(all_str))
from pymatgen.io.vasp.inputs import Poscar
n = 0
for strua in all_str:
    Vasp_Str = Poscar(strua)
    n +=1
    Vasp_Str.write_file(&#39;%dnew.vasp&#39;%n)
</code></pre>
<h3 id="2-检验两个结构"><a href="#2-检验两个结构" class="headerlink" title="2. 检验两个结构"></a>2. 检验两个结构</h3><pre><code class="python">import numpy as np
import sys,os,time
from pymatgen.core import Structure
from pymatgen.analysis.structure_matcher import StructureMatcher
matcher = StructureMatcher()
aa = Structure.from_file(&#39;16.vasp&#39;)
bb = Structure.from_file(&#39;4199.vasp&#39;)
matcher.fit(aa,bb)
</code></pre>
<h1 id="7-找出缺失的原子"><a href="#7-找出缺失的原子" class="headerlink" title="7.找出缺失的原子"></a>7.找出缺失的原子</h1><pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from itertools import combinations
stru_b=Structure.from_file(filename=&#39;supercell.vasp&#39;)
frac_coords_b=stru_b.frac_coords.tolist()
normalized_coords_b = [[x % 1 for x in coord] for coord in frac_coords_b]
set2 = set(map(tuple, normalized_coords_b))
for i in range(1, 1000001):
    file = f&#39;&#123;i&#125;.vasp&#39;
    stru_a=Structure.from_file(file)
    # 检查文件是否存在
    if not os.path.exists(file):
        continue
    frac_coords_a=stru_a.frac_coords.tolist()
    normalized_coords_a = [[x % 1 for x in coord] for coord in frac_coords_a]
    set1 = set(map(tuple, normalized_coords_a))
    result= [list(i) for i in set2.difference(set1)]
    print(result)
    atom_indices=[]
    for coord in result:
        try:
            index = normalized_coords_b.index(coord)
            atom_indices.append(index)
        except ValueError:
          # 如果找不到匹配的坐标，可以添加一个标记，如-1，以表示未匹配的坐标
            atom_indices.append(-1)
    close_atom_pairs = []
    combinations_of_missing_atoms = combinations(atom_indices, 2)
    threshold_distance = 7
    for pair in combinations_of_missing_atoms:
        distance = stru_b.get_distance(pair[0], pair[1])
        if distance &lt; threshold_distance:
            close_atom_pairs.append(pair)
    # 如果 close_atom_pairs 列表不为空，则表示存在距离小于阈值的原子对
    if close_atom_pairs:
        print(&quot;存在距离小于阈值的原子对：&quot;)
        print(len(close_atom_pairs))
    else:
        print(&quot;不存在距离小于阈值的原子对。&quot;)
</code></pre>
<h1 id="7-处理CaH6的333倍胞的问题（将324个H中的14个扣掉-可以枚举的方法"><a href="#7-处理CaH6的333倍胞的问题（将324个H中的14个扣掉-可以枚举的方法" class="headerlink" title="7. 处理CaH6的333倍胞的问题（将324个H中的14个扣掉-可以枚举的方法"></a>7. 处理CaH6的333倍胞的问题（将324个H中的14个扣掉-可以枚举的方法</h1><p>&#x3D;&#x3D;&#x2F;work&#x2F;home&#x2F;liz&#x2F;workspace&#x2F;3-temporary-duty&#x2F;3-zwb&#x2F;6-333&#x2F;1-kou3&#x2F;2&#x2F;1-2&#x2F;ee.py&#x3D;&#x3D;</p>
<pre><code class="python">from pymatgen.core.structure import IStructure, Structure
from pymatgen.io.vasp.inputs import Poscar
from monty.io import zopen
import random
import sys,os,time
import numpy as np
from pymatgen.core import Structure
from pymatgen.analysis.energy_models import EwaldElectrostaticModel
from itertools import combinations
strua = Structure.from_file(&quot;a.vasp&quot;)

H_indice = [i for i, site in enumerate(strua) if site.species_string == &quot;H&quot;]
H_indices=np.array(H_indice)

distanceall=strua.distance_matrix
distance=distanceall[H_indices][:,H_indices]
print(distance.shape)
print(distance)

N = distance.shape[0]
two_dim_matrix = np.zeros((N, N), dtype=int)
for i in range(N):
    for j in range(N):
        dist1 = distance[i][j]
        if dist1 &lt;= 3.6:
            two_dim_matrix[i][j] = 0
        else:
            two_dim_matrix[i][j] = 1
allnumber = 0
matching_columns = np.where(two_dim_matrix[0, 1:] == 1)[0]
matching_columns = matching_columns  + 1
print(matching_columns)
for j in matching_columns:
    print(j)
    matching_columns2=np.where(two_dim_matrix[j, j+1:] == 1)[0]
    matching_columns2 = matching_columns2 + j + 1
    matching_columns2 = np.intersect1d(matching_columns2,matching_columns)
   # print(len(matching_columns2))
    for jj in matching_columns2:
        matching_columns3=np.where(two_dim_matrix[jj, jj+1:] == 1)[0]
        matching_columns3 = matching_columns3 + jj + 1
        matching_columns3 = np.intersect1d(matching_columns2,matching_columns3)
      #  print(len(matching_columns3))
        for jjj in matching_columns3:
            matching_columns4=np.where(two_dim_matrix[jjj, jjj+1:] == 1)[0]
            matching_columns4 = matching_columns4 + jjj + 1
            matching_columns4 = np.intersect1d(matching_columns3,matching_columns4)
           # print(len(matching_columns4))
            for jjjj in matching_columns4:
                matching_columnsddd=np.where(two_dim_matrix[jjjj, jjjj+1:] == 1)[0]
                matching_columnsddd = matching_columnsddd + jjjj + 1
                matching_columnsddd = np.intersect1d(matching_columns4,matching_columnsddd)
               # print(len(matching_columnsddd))
                for gg in matching_columnsddd:
                    matching_columns5=np.where(two_dim_matrix[gg, gg+1:] == 1)[0]
                    matching_columns5 = matching_columns5 + gg + 1
                    matching_columns5 = np.intersect1d(matching_columnsddd,matching_columns5)
                   # print(len(matching_columns5))
                    for ggg in matching_columns5:
                        matching_columns6=np.where(two_dim_matrix[ggg, ggg+1:] == 1)[0]
                        matching_columns6 = matching_columns6 + ggg + 1
                        matching_columns6 = np.intersect1d(matching_columns5,matching_columns6)
                       # print(len(matching_columns6))
                        for gggg in matching_columns6:
                            matching_columns7=np.where(two_dim_matrix[gggg, gggg+1:] == 1)[0]
                            matching_columns7 = matching_columns7 + gggg + 1
                            matching_columns7 = np.intersect1d(matching_columns6,matching_columns7)
                           # print(len(matching_columns7))
                            for dd in matching_columns7:
                                matching_columns8=np.where(two_dim_matrix[dd, dd+1:] == 1)[0]
                                matching_columns8 = matching_columns8 + dd + 1
                                matching_columns8 = np.intersect1d(matching_columns7,matching_columns8)
                               # print(len(matching_columns8))
                                for ddd in matching_columns8:
                                    matching_columns9=np.where(two_dim_matrix[ddd, ddd+1:] == 1)[0]
                                    matching_columns9 = matching_columns9 + ddd + 1
                                    matching_columns9 = np.intersect1d(matching_columns8,matching_columns9)
                                   # print(len(matching_columns9))
                                    for dddd in matching_columns9:
                                        matching_columns10=np.where(two_dim_matrix[dddd, dddd+1:] == 1)[0]
                                        matching_columns10 = matching_columns10 + dddd + 1
                                        matching_columns10 = np.intersect1d(matching_columns9,matching_columns10)
                                       # print(len(matching_columns10))
                                        for ww in matching_columns10:
                                            matching_columns11=np.where(two_dim_matrix[ww, ww+1:] == 1)[0]
                                            matching_columns11 = matching_columns11 + ww + 1
                                            matching_columns11 = np.intersect1d(matching_columns10,matching_columns11)
                                           # print(len(matching_columns11))
                                            for www in matching_columns11:
                                                matching_columns12=np.where(two_dim_matrix[www, www+1:] == 1)[0]
                                                matching_columns12 = matching_columns12 + www + 1
                                                matching_columns12 = np.intersect1d(matching_columns11,matching_columns12)
                                               # print(len(matching_columns12))
                                                for wwww in matching_columns12:
                                                    matching_columns13=np.where(two_dim_matrix[wwww, wwww+1:] == 1)[0]
                                                    matching_columns13 = matching_columns13 + wwww + 1
                                                    listaaa=[0,j,jj,jjj,jjjj,gg,ggg,gggg,dd,ddd,dddd,ww,www,wwww]
                                                   # print(listaaa)
                                                    allnumber += 1
                                                    #print(allnumber)
                                                   # print(listaaa)
                                                    if allnumber % 100000 == 0:
                                                       print(allnumber)
                                                       print(listaaa)
                                                       listbbb= H_indices[listaaa]
                                                       print(listbbb)
                                                       ara=strua.copy()
                                                       for ele in listbbb:
                                                           ara.replace(ele,&#39;O&#39;)
                                                       ara.sort()
                                                       Vasp_Str = Poscar(ara)
                                                       Vasp_Str.write_file(&#39;%d.vasp&#39;% allnumber)
                                                       
 #                                                   for wwwww in matching_columns14:
#                                                        matching_columns15=np.where(two_dim_matrix[wwwww, wwwww+1:] == 1)[0]
 #                                                       matching_columns15 = matching_columns15 + wwwww + 1


</code></pre>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20231028104117829.png" alt="image-20231028104117829"></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20231028104128748.png" alt="image-20231028104128748"></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20231028104147185.png" alt="image-20231028104147185"></p>
<p><img src="/./../../%E5%9B%BE%E7%89%87/image-20231028113559666.png" alt="image-20231028113559666"></p>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源  有问题可通过github提交issue </span>
    </div>
</article>







    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2024 xaz
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 582px;
    }
    .nav.fullscreen {
        margin-left: -582px;
    }
    .nav-left {
        width: 160px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 552px;
        }
        .nav.fullscreen {
            margin-left: -552px;
        }
        .nav-left {
            width: 160px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 552px;
            margin-left: -552px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
    #post .pjax article :not(pre) > code {
        color: #24292e;
        font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
        background-color: rgba(27,31,35,.05);
        border-radius: 3px;
        font-size: 85%;
        margin: 0;
        padding: .2em .4em;
    }
    
</style>







</html>
